<!DOCTYPE html><html><head><link rel="shortcut icon" href="https://www.nextjs.cn/static/favicon/favicon.ico"/><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, minimal-ui"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="format-detection" content="telephone=no, email=no"/><title>Clipboard 操作 (ShineShao)</title><meta name="description" content="Clipboard 操作复制粘贴 "/><meta name="keywords" content="ShineShao freeshineit Next.js Blog "/><link rel="preload" href="/_next/static/css/bbef8c32b2d61ebb9692.css" as="style"/><link rel="stylesheet" href="/_next/static/css/bbef8c32b2d61ebb9692.css" data-n-g=""/><noscript data-n-css="true"></noscript><link rel="preload" href="/_next/static/chunks/main-52b6c265a16af4968ec4.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.964e76377795026233d5.js" as="script"/><link rel="preload" href="/_next/static/chunks/5cd1e4e3c4a0b9a302ef5fe1d5b9ed8cf00e4289.d28f5a17b98837abb5c8.js" as="script"/><link rel="preload" href="/_next/static/chunks/99f422a92ff7083adb8a7d840734144fa7589f68.1b1d65909bec5ea62db3.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-86e6ae0d3ecec668b1ba.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/clipboard-5d144a6673b53cfc50d0.js" as="script"/></head><body class="custom_class"><div id="__next"><div class="Layout_layout__3guix main-mdx" style="width:100%"><header class="Layout_header__1Ex29"><div class="Layout_container__2QLYW"><nav><ul><li><a href="/">Home</a></li><li><a href="/blog">Blog</a></li><li><a href="/readme">README</a></li></ul></nav><div class="Layout_right__2NMHu"><div class="Layout_Theme__3HBe3">🌞</div><a href="https://github.com/freeshineit" target="_block"><img src="/static/images/ShineShao.jpg" alt="ShineShao" class="ShineShao_ShineShao__3y7j0" style="width:34px;height:34px;border-radius:50%"/></a></div></div></header><div class="Layout_main__3m1yK" style="margin:0 auto"><div class="mdx-box"><article><h2 id="clipboard-copy-操作" class="Heading_H2__2MwMw h2-tag"><a aria-hidden="true" tabindex="-1" href="#clipboard-copy-操作" class="A_A__LqrNw a-tag"><span class="icon icon-link"></span></a>clipboard copy 操作</h2><div class="Pre_Pre__269fU pre-tag"><pre class="Code_pre__r85Dc pre-tag prism-code language-html " style="background-color:#2a2734;color:#9a86fd;overflow:scroll;margin-top:20px;margin-bottom:20px;padding:16px"><span class="Code_language__1zO4b">html</span><div class="token-line"><span class="token doctype" style="display:inline-block">&lt;!DOCTYPE html&gt;</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token tag punctuation" style="display:inline-block">&lt;</span><span class="token tag" style="display:inline-block">html</span><span class="token tag" style="display:inline-block"> </span><span class="token tag attr-name" style="display:inline-block">lang</span><span class="token tag attr-value punctuation" style="display:inline-block">=</span><span class="token tag attr-value punctuation" style="display:inline-block">&quot;</span><span class="token tag attr-value" style="display:inline-block">en</span><span class="token tag attr-value punctuation" style="display:inline-block">&quot;</span><span class="token tag punctuation" style="display:inline-block">&gt;</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">  </span><span class="token tag punctuation" style="display:inline-block">&lt;</span><span class="token tag" style="display:inline-block">body</span><span class="token tag" style="display:inline-block"> </span><span class="token tag attr-name" style="display:inline-block">id</span><span class="token tag attr-value punctuation" style="display:inline-block">=</span><span class="token tag attr-value punctuation" style="display:inline-block">&quot;</span><span class="token tag attr-value" style="display:inline-block">body</span><span class="token tag attr-value punctuation" style="display:inline-block">&quot;</span><span class="token tag punctuation" style="display:inline-block">&gt;</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    </span><span class="token tag punctuation" style="display:inline-block">&lt;</span><span class="token tag" style="display:inline-block">div</span><span class="token tag punctuation" style="display:inline-block">&gt;</span><span class="token plain" style="display:inline-block">复制并劫持复制内容</span><span class="token tag punctuation" style="display:inline-block">&lt;/</span><span class="token tag" style="display:inline-block">div</span><span class="token tag punctuation" style="display:inline-block">&gt;</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    </span><span class="token tag punctuation" style="display:inline-block">&lt;</span><span class="token tag" style="display:inline-block">script</span><span class="token tag" style="display:inline-block"> </span><span class="token tag attr-name" style="display:inline-block">type</span><span class="token tag attr-value punctuation" style="display:inline-block">=</span><span class="token tag attr-value punctuation" style="display:inline-block">&quot;</span><span class="token tag attr-value" style="display:inline-block">text/javascript</span><span class="token tag attr-value punctuation" style="display:inline-block">&quot;</span><span class="token tag punctuation" style="display:inline-block">&gt;</span><span class="token script language-javascript" style="display:inline-block"></span></div><div class="token-line"><span class="token script language-javascript" style="display:inline-block">      </span><span class="token script language-javascript punctuation" style="display:inline-block">(</span><span class="token script language-javascript keyword" style="display:inline-block">function</span><span class="token script language-javascript" style="display:inline-block"> </span><span class="token script language-javascript punctuation" style="display:inline-block">(</span><span class="token script language-javascript punctuation" style="display:inline-block">)</span><span class="token script language-javascript" style="display:inline-block"> </span><span class="token script language-javascript punctuation" style="display:inline-block">{</span><span class="token script language-javascript" style="display:inline-block"></span></div><div class="token-line"><span class="token script language-javascript" style="display:inline-block">        </span><span class="token script language-javascript keyword" style="display:inline-block">const</span><span class="token script language-javascript" style="display:inline-block"> body </span><span class="token script language-javascript operator" style="display:inline-block">=</span><span class="token script language-javascript" style="display:inline-block"> </span><span class="token script language-javascript dom variable" style="display:inline-block">document</span><span class="token script language-javascript punctuation" style="display:inline-block">.</span><span class="token script language-javascript method function property-access" style="display:inline-block">getElementById</span><span class="token script language-javascript punctuation" style="display:inline-block">(</span><span class="token script language-javascript string" style="display:inline-block">&quot;body&quot;</span><span class="token script language-javascript punctuation" style="display:inline-block">)</span><span class="token script language-javascript punctuation" style="display:inline-block">;</span><span class="token script language-javascript" style="display:inline-block"></span></div><div class="token-line"><span class="token script language-javascript" style="display:inline-block">        body</span><span class="token script language-javascript punctuation" style="display:inline-block">.</span><span class="token script language-javascript method function property-access" style="display:inline-block">addEventListener</span><span class="token script language-javascript punctuation" style="display:inline-block">(</span><span class="token script language-javascript string" style="display:inline-block">&quot;copy&quot;</span><span class="token script language-javascript punctuation" style="display:inline-block">,</span><span class="token script language-javascript" style="display:inline-block"> </span><span class="token script language-javascript parameter" style="display:inline-block">e</span><span class="token script language-javascript" style="display:inline-block"> </span><span class="token script language-javascript arrow operator" style="display:inline-block">=&gt;</span><span class="token script language-javascript" style="display:inline-block"> </span><span class="token script language-javascript punctuation" style="display:inline-block">{</span><span class="token script language-javascript" style="display:inline-block"></span></div><div class="token-line"><span class="token script language-javascript" style="display:inline-block">          </span><span class="token script language-javascript keyword" style="display:inline-block">let</span><span class="token script language-javascript" style="display:inline-block"> selectedText </span><span class="token script language-javascript operator" style="display:inline-block">=</span><span class="token script language-javascript" style="display:inline-block"> </span><span class="token script language-javascript dom variable" style="display:inline-block">window</span><span class="token script language-javascript punctuation" style="display:inline-block">.</span><span class="token script language-javascript method function property-access" style="display:inline-block">getSelection</span><span class="token script language-javascript punctuation" style="display:inline-block">(</span><span class="token script language-javascript punctuation" style="display:inline-block">)</span><span class="token script language-javascript punctuation" style="display:inline-block">.</span><span class="token script language-javascript method function property-access" style="display:inline-block">toString</span><span class="token script language-javascript punctuation" style="display:inline-block">(</span><span class="token script language-javascript punctuation" style="display:inline-block">)</span><span class="token script language-javascript punctuation" style="display:inline-block">;</span><span class="token script language-javascript" style="display:inline-block"></span></div><div class="token-line"><span class="token script language-javascript" style="display:inline-block">          selectedText </span><span class="token script language-javascript operator" style="display:inline-block">=</span><span class="token script language-javascript" style="display:inline-block"></span></div><div class="token-line"><span class="token script language-javascript" style="display:inline-block">            selectedText</span><span class="token script language-javascript punctuation" style="display:inline-block">.</span><span class="token script language-javascript method function property-access" style="display:inline-block">replace</span><span class="token script language-javascript punctuation" style="display:inline-block">(</span><span class="token script language-javascript regex" style="display:inline-block">/\u200B/g</span><span class="token script language-javascript punctuation" style="display:inline-block">,</span><span class="token script language-javascript" style="display:inline-block"> </span><span class="token script language-javascript string" style="display:inline-block">&quot;&quot;</span><span class="token script language-javascript punctuation" style="display:inline-block">)</span><span class="token script language-javascript" style="display:inline-block"> </span><span class="token script language-javascript operator" style="display:inline-block">+</span><span class="token script language-javascript" style="display:inline-block"></span></div><div class="token-line"><span class="token script language-javascript" style="display:inline-block">            </span><span class="token script language-javascript string" style="display:inline-block">&quot;\nhttps://freeshineit.github.io/&quot;</span><span class="token script language-javascript punctuation" style="display:inline-block">;</span><span class="token script language-javascript" style="display:inline-block"></span></div><div class="token-line"><span class="token script language-javascript" style="display:inline-block"></span></div><div class="token-line"><span class="token script language-javascript" style="display:inline-block">          </span><span class="token script language-javascript keyword" style="display:inline-block">if</span><span class="token script language-javascript" style="display:inline-block"> </span><span class="token script language-javascript punctuation" style="display:inline-block">(</span><span class="token script language-javascript dom variable" style="display:inline-block">navigator</span><span class="token script language-javascript punctuation" style="display:inline-block">.</span><span class="token script language-javascript property-access" style="display:inline-block">clipboard</span><span class="token script language-javascript punctuation" style="display:inline-block">)</span><span class="token script language-javascript" style="display:inline-block"> </span><span class="token script language-javascript punctuation" style="display:inline-block">{</span><span class="token script language-javascript" style="display:inline-block"></span></div><div class="token-line"><span class="token script language-javascript" style="display:inline-block">            </span><span class="token script language-javascript dom variable" style="display:inline-block">navigator</span><span class="token script language-javascript punctuation" style="display:inline-block">.</span><span class="token script language-javascript property-access" style="display:inline-block">clipboard</span><span class="token script language-javascript" style="display:inline-block"></span></div><div class="token-line"><span class="token script language-javascript" style="display:inline-block">              </span><span class="token script language-javascript punctuation" style="display:inline-block">.</span><span class="token script language-javascript method function property-access" style="display:inline-block">writeText</span><span class="token script language-javascript punctuation" style="display:inline-block">(</span><span class="token script language-javascript" style="display:inline-block">selectedText</span><span class="token script language-javascript punctuation" style="display:inline-block">)</span><span class="token script language-javascript" style="display:inline-block"></span></div><div class="token-line"><span class="token script language-javascript" style="display:inline-block">              </span><span class="token script language-javascript punctuation" style="display:inline-block">.</span><span class="token script language-javascript method function property-access" style="display:inline-block">then</span><span class="token script language-javascript punctuation" style="display:inline-block">(</span><span class="token script language-javascript punctuation" style="display:inline-block">(</span><span class="token script language-javascript punctuation" style="display:inline-block">)</span><span class="token script language-javascript" style="display:inline-block"> </span><span class="token script language-javascript arrow operator" style="display:inline-block">=&gt;</span><span class="token script language-javascript" style="display:inline-block"> </span><span class="token script language-javascript punctuation" style="display:inline-block">{</span><span class="token script language-javascript" style="display:inline-block"></span></div><div class="token-line"><span class="token script language-javascript" style="display:inline-block">                </span><span class="token script language-javascript console class-name" style="display:inline-block">console</span><span class="token script language-javascript punctuation" style="display:inline-block">.</span><span class="token script language-javascript method function property-access" style="display:inline-block">log</span><span class="token script language-javascript punctuation" style="display:inline-block">(</span><span class="token script language-javascript string" style="display:inline-block">&quot;Text copied to clipboard&quot;</span><span class="token script language-javascript punctuation" style="display:inline-block">)</span><span class="token script language-javascript punctuation" style="display:inline-block">;</span><span class="token script language-javascript" style="display:inline-block"></span></div><div class="token-line"><span class="token script language-javascript" style="display:inline-block">              </span><span class="token script language-javascript punctuation" style="display:inline-block">}</span><span class="token script language-javascript punctuation" style="display:inline-block">)</span><span class="token script language-javascript" style="display:inline-block"></span></div><div class="token-line"><span class="token script language-javascript" style="display:inline-block">              </span><span class="token script language-javascript punctuation" style="display:inline-block">.</span><span class="token script language-javascript method function property-access" style="display:inline-block">catch</span><span class="token script language-javascript punctuation" style="display:inline-block">(</span><span class="token script language-javascript parameter" style="display:inline-block">err</span><span class="token script language-javascript" style="display:inline-block"> </span><span class="token script language-javascript arrow operator" style="display:inline-block">=&gt;</span><span class="token script language-javascript" style="display:inline-block"> </span><span class="token script language-javascript punctuation" style="display:inline-block">{</span><span class="token script language-javascript" style="display:inline-block"></span></div><div class="token-line"><span class="token script language-javascript" style="display:inline-block">                </span><span class="token script language-javascript comment" style="display:inline-block">// This can happen if the user denies clipboard permissions:</span><span class="token script language-javascript" style="display:inline-block"></span></div><div class="token-line"><span class="token script language-javascript" style="display:inline-block">                </span><span class="token script language-javascript console class-name" style="display:inline-block">console</span><span class="token script language-javascript punctuation" style="display:inline-block">.</span><span class="token script language-javascript method function property-access" style="display:inline-block">error</span><span class="token script language-javascript punctuation" style="display:inline-block">(</span><span class="token script language-javascript string" style="display:inline-block">&quot;Could not copy text: &quot;</span><span class="token script language-javascript punctuation" style="display:inline-block">,</span><span class="token script language-javascript" style="display:inline-block"> err</span><span class="token script language-javascript punctuation" style="display:inline-block">)</span><span class="token script language-javascript punctuation" style="display:inline-block">;</span><span class="token script language-javascript" style="display:inline-block"></span></div><div class="token-line"><span class="token script language-javascript" style="display:inline-block">              </span><span class="token script language-javascript punctuation" style="display:inline-block">}</span><span class="token script language-javascript punctuation" style="display:inline-block">)</span><span class="token script language-javascript punctuation" style="display:inline-block">;</span><span class="token script language-javascript" style="display:inline-block"></span></div><div class="token-line"><span class="token script language-javascript" style="display:inline-block">          </span><span class="token script language-javascript punctuation" style="display:inline-block">}</span><span class="token script language-javascript" style="display:inline-block"> </span><span class="token script language-javascript keyword" style="display:inline-block">else</span><span class="token script language-javascript" style="display:inline-block"> </span><span class="token script language-javascript punctuation" style="display:inline-block">{</span><span class="token script language-javascript" style="display:inline-block"></span></div><div class="token-line"><span class="token script language-javascript" style="display:inline-block">            </span><span class="token script language-javascript comment" style="display:inline-block">// 兼容</span><span class="token script language-javascript" style="display:inline-block"></span></div><div class="token-line"><span class="token script language-javascript" style="display:inline-block">            clipboardData </span><span class="token script language-javascript operator" style="display:inline-block">=</span><span class="token script language-javascript" style="display:inline-block"></span></div><div class="token-line"><span class="token script language-javascript" style="display:inline-block">              event</span><span class="token script language-javascript punctuation" style="display:inline-block">.</span><span class="token script language-javascript property-access" style="display:inline-block">clipboardData</span><span class="token script language-javascript" style="display:inline-block"> </span><span class="token script language-javascript operator" style="display:inline-block">||</span><span class="token script language-javascript" style="display:inline-block"></span></div><div class="token-line"><span class="token script language-javascript" style="display:inline-block">              </span><span class="token script language-javascript dom variable" style="display:inline-block">window</span><span class="token script language-javascript punctuation" style="display:inline-block">.</span><span class="token script language-javascript property-access" style="display:inline-block">clipboardData</span><span class="token script language-javascript" style="display:inline-block"> </span><span class="token script language-javascript operator" style="display:inline-block">||</span><span class="token script language-javascript" style="display:inline-block"></span></div><div class="token-line"><span class="token script language-javascript" style="display:inline-block">              event</span><span class="token script language-javascript punctuation" style="display:inline-block">.</span><span class="token script language-javascript property-access" style="display:inline-block">originalEvent</span><span class="token script language-javascript punctuation" style="display:inline-block">.</span><span class="token script language-javascript property-access" style="display:inline-block">clipboardData</span><span class="token script language-javascript punctuation" style="display:inline-block">;</span><span class="token script language-javascript" style="display:inline-block"></span></div><div class="token-line"><span class="token script language-javascript" style="display:inline-block">            clipboardData</span><span class="token script language-javascript punctuation" style="display:inline-block">.</span><span class="token script language-javascript method function property-access" style="display:inline-block">setData</span><span class="token script language-javascript punctuation" style="display:inline-block">(</span><span class="token script language-javascript string" style="display:inline-block">&quot;text/html&quot;</span><span class="token script language-javascript punctuation" style="display:inline-block">,</span><span class="token script language-javascript" style="display:inline-block"> selectedText</span><span class="token script language-javascript punctuation" style="display:inline-block">)</span><span class="token script language-javascript punctuation" style="display:inline-block">;</span><span class="token script language-javascript" style="display:inline-block"></span></div><div class="token-line"><span class="token script language-javascript" style="display:inline-block">          </span><span class="token script language-javascript punctuation" style="display:inline-block">}</span><span class="token script language-javascript" style="display:inline-block"></span></div><div class="token-line"><span class="token script language-javascript" style="display:inline-block">          event</span><span class="token script language-javascript punctuation" style="display:inline-block">.</span><span class="token script language-javascript method function property-access" style="display:inline-block">preventDefault</span><span class="token script language-javascript punctuation" style="display:inline-block">(</span><span class="token script language-javascript punctuation" style="display:inline-block">)</span><span class="token script language-javascript punctuation" style="display:inline-block">;</span><span class="token script language-javascript" style="display:inline-block"> </span><span class="token script language-javascript comment" style="display:inline-block">// 阻止默认</span><span class="token script language-javascript" style="display:inline-block"></span></div><div class="token-line"><span class="token script language-javascript" style="display:inline-block">        </span><span class="token script language-javascript punctuation" style="display:inline-block">}</span><span class="token script language-javascript punctuation" style="display:inline-block">)</span><span class="token script language-javascript punctuation" style="display:inline-block">;</span><span class="token script language-javascript" style="display:inline-block"></span></div><div class="token-line"><span class="token script language-javascript" style="display:inline-block">      </span><span class="token script language-javascript punctuation" style="display:inline-block">}</span><span class="token script language-javascript punctuation" style="display:inline-block">)</span><span class="token script language-javascript punctuation" style="display:inline-block">(</span><span class="token script language-javascript punctuation" style="display:inline-block">)</span><span class="token script language-javascript punctuation" style="display:inline-block">;</span><span class="token script language-javascript" style="display:inline-block"></span></div><div class="token-line"><span class="token script language-javascript" style="display:inline-block">    </span><span class="token tag punctuation" style="display:inline-block">&lt;/</span><span class="token tag" style="display:inline-block">script</span><span class="token tag punctuation" style="display:inline-block">&gt;</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">  </span><span class="token tag punctuation" style="display:inline-block">&lt;/</span><span class="token tag" style="display:inline-block">body</span><span class="token tag punctuation" style="display:inline-block">&gt;</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token tag punctuation" style="display:inline-block">&lt;/</span><span class="token tag" style="display:inline-block">html</span><span class="token tag punctuation" style="display:inline-block">&gt;</span></div></pre></div></article></div></div><footer class="Layout_footer__1xrEh"><span style="margin-right:20px">I&#x27;m here </span><a href="https://github.com/freeshineit" target="_block">ShineShao</a></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/blog/clipboard","query":{},"buildId":"tjENhu0zjh9y9_r6jraCY","nextExport":true,"autoExport":true,"isFallback":false,"head":[["meta",{"charSet":"utf-8"}],["meta",{"name":"viewport","content":"width=device-width, initial-scale=1, user-scalable=no, minimal-ui"}],["meta",{"name":"apple-mobile-web-app-capable","content":"yes"}],["meta",{"name":"apple-mobile-web-app-status-bar-style","content":"black"}],["meta",{"name":"format-detection","content":"telephone=no, email=no"}],["title",{"children":"Clipboard 操作 (ShineShao)"}],["meta",{"name":"description","content":"Clipboard 操作复制粘贴 "}],["meta",{"name":"keywords","content":"ShineShao freeshineit Next.js Blog "}]]}</script><script nomodule="" src="/_next/static/chunks/polyfills-0a2dccd2aa0d7ea1a89f.js"></script><script src="/_next/static/chunks/main-52b6c265a16af4968ec4.js" async=""></script><script src="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" async=""></script><script src="/_next/static/chunks/framework.964e76377795026233d5.js" async=""></script><script src="/_next/static/chunks/5cd1e4e3c4a0b9a302ef5fe1d5b9ed8cf00e4289.d28f5a17b98837abb5c8.js" async=""></script><script src="/_next/static/chunks/99f422a92ff7083adb8a7d840734144fa7589f68.1b1d65909bec5ea62db3.js" async=""></script><script src="/_next/static/chunks/pages/_app-86e6ae0d3ecec668b1ba.js" async=""></script><script src="/_next/static/chunks/pages/blog/clipboard-5d144a6673b53cfc50d0.js" async=""></script><script src="/_next/static/tjENhu0zjh9y9_r6jraCY/_buildManifest.js" async=""></script><script src="/_next/static/tjENhu0zjh9y9_r6jraCY/_ssgManifest.js" async=""></script><script src="/static/js/heading.js"></script></body></html>