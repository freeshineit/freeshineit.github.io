<!DOCTYPE html><html><head><link rel="shortcut icon" href="https://www.nextjs.cn/static/favicon/favicon.ico"/><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, minimal-ui"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="format-detection" content="telephone=no, email=no"/><title>Next.js next.config.js  (ShineShao)</title><meta name="description" content="Next.js next.config.js"/><meta name="keywords" content="ShineShao freeshineit Next.js Blog "/><link rel="preload" href="/_next/static/css/4a5aad3af0d1b22c0225.css" as="style"/><link rel="stylesheet" href="/_next/static/css/4a5aad3af0d1b22c0225.css" data-n-g=""/><noscript data-n-css="true"></noscript><link rel="preload" href="/_next/static/chunks/main-52b6c265a16af4968ec4.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.964e76377795026233d5.js" as="script"/><link rel="preload" href="/_next/static/chunks/9305b49de26327e3f1ee837fed187f9ed10ce38c.d28f5a17b98837abb5c8.js" as="script"/><link rel="preload" href="/_next/static/chunks/99f422a92ff7083adb8a7d840734144fa7589f68.1b1d65909bec5ea62db3.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-d1670f3a44d680800f03.js" as="script"/><link rel="preload" href="/_next/static/chunks/ba35505a964aaf7d56d2c4b41dee6871329d04fb.56255659c0840c9f32a8.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/next.config-70bb452122279081a49f.js" as="script"/></head><body class="custom_class"><div id="__next"><div class="Layout_layout__3guix main-mdx" style="width:100%"><header class="Layout_header__1Ex29"><div class="Layout_container__2QLYW"><nav><ul><li><a href="/">Home</a> </li><li><a href="/blog">Blog</a> </li><li><a href="/readme">README</a> </li></ul></nav><div><a href="https://github.com/freeshineit" target="_block"><img src="/static/images/ShineShao.jpg" alt="ShineShao" class="ShineShao_ShineShao__3y7j0" style="width:34px;height:34px;border-radius:50%"/></a></div></div></header><div class="Layout_main__3m1yK" style="margin:0 auto"><div class="mdx-box"><article><h2 id="12341" class="H2_H2__eaTRw h2-tag"><a aria-hidden="true" tabindex="-1" href="#12341" class="A_A__LqrNw a-tag"><span class="icon icon-link"></span></a>12341</h2><h1 id="nextjs-10" class="H1_H1__3IzbG h1-tag"><a aria-hidden="true" tabindex="-1" href="#nextjs-10" class="A_A__LqrNw a-tag"><span class="icon icon-link"></span></a>Next.js @10</h1><h2 id="next-加载-nextconfigjs" class="H2_H2__eaTRw h2-tag"><a aria-hidden="true" tabindex="-1" href="#next-加载-nextconfigjs" class="A_A__LqrNw a-tag"><span class="icon icon-link"></span></a>next 加载 <code>next.config.js</code></h2><h2 id="nextconfigjs" class="H2_H2__eaTRw h2-tag"><a aria-hidden="true" tabindex="-1" href="#nextconfigjs" class="A_A__LqrNw a-tag"><span class="icon icon-link"></span></a>next.config.js</h2><div class="Pre_Pre__269fU pre-tag"><pre class="Code_pre__r85Dc pre-tag prism-code language-js " style="background-color:#2a2734;color:#9a86fd;overflow:scroll;margin-top:20px;margin-bottom:20px;padding:16px"><div class="token-line"><span class="token keyword module">import</span><span class="token plain"> chalk </span><span class="token keyword module">from</span><span class="token plain"> </span><span class="token string">&#x27;chalk&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module">import</span><span class="token plain"> findUp </span><span class="token keyword module">from</span><span class="token plain"> </span><span class="token string">&#x27;next/dist/compiled/find-up&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module">import</span><span class="token plain"> os </span><span class="token keyword module">from</span><span class="token plain"> </span><span class="token string">&#x27;os&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module">import</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> basename</span><span class="token punctuation">,</span><span class="token plain"> extname </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword module">from</span><span class="token plain"> </span><span class="token string">&#x27;path&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module">import</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token keyword module">as</span><span class="token plain"> </span><span class="token maybe-class-name">Log</span><span class="token plain"> </span><span class="token keyword module">from</span><span class="token plain"> </span><span class="token string">&#x27;../../build/output/log&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module">import</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token constant">CONFIG_FILE</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword module">from</span><span class="token plain"> </span><span class="token string">&#x27;../lib/constants&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module">import</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> execOnce </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword module">from</span><span class="token plain"> </span><span class="token string">&#x27;../lib/utils&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module">import</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token maybe-class-name">ImageConfig</span><span class="token punctuation">,</span><span class="token plain"> imageConfigDefault</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token constant">VALID_LOADERS</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword module">from</span><span class="token plain"> </span><span class="token string">&#x27;./image-config&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> targets </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token string">&#x27;server&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;serverless&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;experimental-serverless-trace&#x27;</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> reactModes </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token string">&#x27;legacy&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;blocking&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;concurrent&#x27;</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> defaultConfig</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">key</span><span class="token punctuation">:</span><span class="token plain"> string</span><span class="token punctuation">]</span><span class="token punctuation">:</span><span class="token plain"> any </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  env</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  webpack</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token keyword null nil">null</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  webpackDevMiddleware</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token keyword null nil">null</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  distDir</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;.next&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  assetPrefix</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  configOrigin</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;default&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  useFileSystemPublicRoutes</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function-variable function">generateBuildId</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token keyword null nil">null</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  generateEtags</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  pageExtensions</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token string">&#x27;tsx&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;ts&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;jsx&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;js&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  target</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;server&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  poweredByHeader</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  compress</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  analyticsId</span><span class="token punctuation">:</span><span class="token plain"> process</span><span class="token punctuation">.</span><span class="token property-access">env</span><span class="token punctuation">.</span><span class="token constant">VERCEL_ANALYTICS_ID</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> </span><span class="token string">&#x27;&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  images</span><span class="token punctuation">:</span><span class="token plain"> imageConfigDefault</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  devIndicators</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    buildActivity</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  onDemandEntries</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    maxInactiveAge</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">60</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token number">1000</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    pagesBufferLength</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  amp</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    canonicalBase</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  basePath</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  sassOptions</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  trailingSlash</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  i18n</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  experimental</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    cpus</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token method function property-access">max</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token number">1</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">(</span><span class="token known-class-name class-name">Number</span><span class="token punctuation">(</span><span class="token plain">process</span><span class="token punctuation">.</span><span class="token property-access">env</span><span class="token punctuation">.</span><span class="token constant">CIRCLE_NODE_TOTAL</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">(</span><span class="token plain">os</span><span class="token punctuation">.</span><span class="token method function property-access">cpus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> length</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">-</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    plugins</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    profiling</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    sprFlushToDisk</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    reactMode</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;legacy&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    workerThreads</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    pageEnv</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    productionBrowserSourceMaps</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    optimizeFonts</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    optimizeImages</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    scrollRestoration</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  future</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    excludeDefaultMomentLocales</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  serverRuntimeConfig</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  publicRuntimeConfig</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  reactStrictMode</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> experimentalWarning </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">execOnce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token maybe-class-name">Log</span><span class="token punctuation">.</span><span class="token method function property-access">warn</span><span class="token punctuation">(</span><span class="token plain">chalk</span><span class="token punctuation">.</span><span class="token method function property-access">bold</span><span class="token punctuation">(</span><span class="token string">&#x27;You have enabled experimental feature(s).&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token maybe-class-name">Log</span><span class="token punctuation">.</span><span class="token method function property-access">warn</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">Experimental features are not covered by semver, and may cause unexpected or broken application behavior. </span><span class="token template-string template-punctuation string">`</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">Use them at your own risk.</span><span class="token template-string template-punctuation string">`</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">warn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">assignDefaults</span><span class="token punctuation">(</span><span class="token parameter">userConfig</span><span class="token parameter punctuation">:</span><span class="token parameter"> </span><span class="token parameter punctuation">{</span><span class="token parameter"> </span><span class="token parameter punctuation">[</span><span class="token parameter">key</span><span class="token parameter punctuation">:</span><span class="token parameter"> string</span><span class="token parameter punctuation">]</span><span class="token parameter punctuation">:</span><span class="token parameter"> any </span><span class="token parameter punctuation">}</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token plain"> userConfig</span><span class="token punctuation">.</span><span class="token property-access">exportTrailingSlash</span><span class="token plain"> </span><span class="token operator">!==</span><span class="token plain"> </span><span class="token string">&#x27;undefined&#x27;</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">warn</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      chalk</span><span class="token punctuation">.</span><span class="token property-access">yellow</span><span class="token punctuation">.</span><span class="token method function property-access">bold</span><span class="token punctuation">(</span><span class="token string">&#x27;Warning: &#x27;</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token string">&#x27;The &quot;exportTrailingSlash&quot; option has been renamed to &quot;trailingSlash&quot;. Please update your next.config.js.&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token plain"> userConfig</span><span class="token punctuation">.</span><span class="token property-access">trailingSlash</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string">&#x27;undefined&#x27;</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      userConfig</span><span class="token punctuation">.</span><span class="token property-access">trailingSlash</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> userConfig</span><span class="token punctuation">.</span><span class="token property-access">exportTrailingSlash</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">delete</span><span class="token plain"> userConfig</span><span class="token punctuation">.</span><span class="token property-access">exportTrailingSlash</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> config </span><span class="token operator">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">keys</span><span class="token punctuation">(</span><span class="token plain">userConfig</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">reduce</span><span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">key</span><span class="token punctuation">:</span><span class="token plain"> string</span><span class="token punctuation">]</span><span class="token punctuation">:</span><span class="token plain"> any </span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">(</span><span class="token parameter">currentConfig</span><span class="token parameter punctuation">,</span><span class="token parameter"> key</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">const</span><span class="token plain"> value </span><span class="token operator">=</span><span class="token plain"> userConfig</span><span class="token punctuation">[</span><span class="token plain">key</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">value </span><span class="token operator">===</span><span class="token plain"> </span><span class="token keyword nil">undefined</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> value </span><span class="token operator">===</span><span class="token plain"> </span><span class="token keyword null nil">null</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token keyword">return</span><span class="token plain"> currentConfig</span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">key </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string">&#x27;experimental&#x27;</span><span class="token plain"> </span><span class="token operator">&amp;&amp;</span><span class="token plain"> value </span><span class="token operator">&amp;&amp;</span><span class="token plain"> value </span><span class="token operator">!==</span><span class="token plain"> defaultConfig</span><span class="token punctuation">[</span><span class="token plain">key</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token function">experimentalWarning</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">key </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string">&#x27;distDir&#x27;</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token plain"> value </span><span class="token operator">!==</span><span class="token plain"> </span><span class="token string">&#x27;string&#x27;</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token keyword">throw</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">Specified distDir is not a string, found type &quot;</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation keyword">typeof</span><span class="token template-string interpolation"> value</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">&quot;</span><span class="token template-string template-punctuation string">`</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token keyword">const</span><span class="token plain"> userDistDir </span><span class="token operator">=</span><span class="token plain"> value</span><span class="token punctuation">.</span><span class="token method function property-access">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token comment">// don&#x27;t allow public as the distDir as this is a reserved folder for</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token comment">// public files</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">userDistDir </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string">&#x27;public&#x27;</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token keyword">throw</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">The &#x27;public&#x27; directory is reserved in Next.js and can not be set as the &#x27;distDir&#x27;. https://err.sh/vercel/next.js/can-not-output-to-public</span><span class="token template-string template-punctuation string">`</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token comment">// make sure distDir isn&#x27;t an empty string as it can result in the provided</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token comment">// directory being deleted in development mode</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">userDistDir</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token keyword">throw</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">Invalid distDir provided, distDir can not be an empty string. Please remove this config or set it to undefined</span><span class="token template-string template-punctuation string">`</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">key </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string">&#x27;pageExtensions&#x27;</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token known-class-name class-name">Array</span><span class="token punctuation">.</span><span class="token method function property-access">isArray</span><span class="token punctuation">(</span><span class="token plain">value</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token keyword">throw</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">Specified pageExtensions is not an array of strings, found &quot;</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">value</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">&quot;. Please update this config or remove it.</span><span class="token template-string template-punctuation string">`</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token plain">value</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token keyword">throw</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">Specified pageExtensions is an empty array. Please update it with the relevant extensions or remove it.</span><span class="token template-string template-punctuation string">`</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">        value</span><span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">ext</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token plain"> ext </span><span class="token operator">!==</span><span class="token plain"> </span><span class="token string">&#x27;string&#x27;</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            </span><span class="token keyword">throw</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">              </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">Specified pageExtensions is not an array of strings, found &quot;</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">ext</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">&quot; of type &quot;</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation keyword">typeof</span><span class="token template-string interpolation"> ext</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">&quot;. Please update this config or remove it.</span><span class="token template-string template-punctuation string">`</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">!</span><span class="token plain">value </span><span class="token operator">&amp;&amp;</span><span class="token plain"> value</span><span class="token punctuation">.</span><span class="token property-access">constructor</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token known-class-name class-name">Object</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        currentConfig</span><span class="token punctuation">[</span><span class="token plain">key</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token spread operator">...</span><span class="token plain">defaultConfig</span><span class="token punctuation">[</span><span class="token plain">key</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token spread operator">...</span><span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">keys</span><span class="token punctuation">(</span><span class="token plain">value</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">reduce</span><span class="token operator">&lt;</span><span class="token plain">any</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">c</span><span class="token parameter punctuation">,</span><span class="token parameter"> k</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            </span><span class="token keyword">const</span><span class="token plain"> v </span><span class="token operator">=</span><span class="token plain"> value</span><span class="token punctuation">[</span><span class="token plain">k</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">v </span><span class="token operator">!==</span><span class="token plain"> </span><span class="token keyword nil">undefined</span><span class="token plain"> </span><span class="token operator">&amp;&amp;</span><span class="token plain"> v </span><span class="token operator">!==</span><span class="token plain"> </span><span class="token keyword null nil">null</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">              c</span><span class="token punctuation">[</span><span class="token plain">k</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> v</span></div><div class="token-line"><span class="token plain">            </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            </span><span class="token keyword">return</span><span class="token plain"> c</span></div><div class="token-line"><span class="token plain">          </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">else</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        currentConfig</span><span class="token punctuation">[</span><span class="token plain">key</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> value</span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">return</span><span class="token plain"> currentConfig</span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> result </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token spread operator">...</span><span class="token plain">defaultConfig</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token spread operator">...</span><span class="token plain">config </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token plain"> result</span><span class="token punctuation">.</span><span class="token property-access">assetPrefix</span><span class="token plain"> </span><span class="token operator">!==</span><span class="token plain"> </span><span class="token string">&#x27;string&#x27;</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">throw</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">Specified assetPrefix is not a string, found type &quot;</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation keyword">typeof</span><span class="token template-string interpolation"> result</span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation">assetPrefix</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">&quot; https://err.sh/vercel/next.js/invalid-assetprefix</span><span class="token template-string template-punctuation string">`</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token plain"> result</span><span class="token punctuation">.</span><span class="token property-access">basePath</span><span class="token plain"> </span><span class="token operator">!==</span><span class="token plain"> </span><span class="token string">&#x27;string&#x27;</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">throw</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">Specified basePath is not a string, found type &quot;</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation keyword">typeof</span><span class="token template-string interpolation"> result</span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation">basePath</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">&quot;</span><span class="token template-string template-punctuation string">`</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">result</span><span class="token punctuation">.</span><span class="token property-access">basePath</span><span class="token plain"> </span><span class="token operator">!==</span><span class="token plain"> </span><span class="token string">&#x27;&#x27;</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">result</span><span class="token punctuation">.</span><span class="token property-access">basePath</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string">&#x27;/&#x27;</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">throw</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">Specified basePath /. basePath has to be either an empty string or a path prefix&quot;</span><span class="token template-string template-punctuation string">`</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token plain">result</span><span class="token punctuation">.</span><span class="token property-access">basePath</span><span class="token punctuation">.</span><span class="token method function property-access">startsWith</span><span class="token punctuation">(</span><span class="token string">&#x27;/&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">throw</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">Specified basePath has to start with a /, found &quot;</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">result</span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation">basePath</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">&quot;</span><span class="token template-string template-punctuation string">`</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">result</span><span class="token punctuation">.</span><span class="token property-access">basePath</span><span class="token plain"> </span><span class="token operator">!==</span><span class="token plain"> </span><span class="token string">&#x27;/&#x27;</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">result</span><span class="token punctuation">.</span><span class="token property-access">basePath</span><span class="token punctuation">.</span><span class="token method function property-access">endsWith</span><span class="token punctuation">(</span><span class="token string">&#x27;/&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token keyword">throw</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">Specified basePath should not end with /, found &quot;</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">result</span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation">basePath</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">&quot;</span><span class="token template-string template-punctuation string">`</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">result</span><span class="token punctuation">.</span><span class="token property-access">assetPrefix</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string">&#x27;&#x27;</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        result</span><span class="token punctuation">.</span><span class="token property-access">assetPrefix</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> result</span><span class="token punctuation">.</span><span class="token property-access">basePath</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">result</span><span class="token punctuation">.</span><span class="token property-access">amp</span><span class="token punctuation">.</span><span class="token property-access">canonicalBase</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string">&#x27;&#x27;</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        result</span><span class="token punctuation">.</span><span class="token property-access">amp</span><span class="token punctuation">.</span><span class="token property-access">canonicalBase</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> result</span><span class="token punctuation">.</span><span class="token property-access">basePath</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">result</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token property-access">images</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">const</span><span class="token plain"> images</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token maybe-class-name">Partial</span><span class="token operator">&lt;</span><span class="token maybe-class-name">ImageConfig</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> result</span><span class="token punctuation">.</span><span class="token property-access">images</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token plain"> images </span><span class="token operator">!==</span><span class="token plain"> </span><span class="token string">&#x27;object&#x27;</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">throw</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">Specified images should be an object received </span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation keyword">typeof</span><span class="token template-string interpolation"> images</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">.\nSee more info here: https://err.sh/next.js/invalid-images-config</span><span class="token template-string template-punctuation string">`</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">images</span><span class="token punctuation">.</span><span class="token property-access">domains</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token known-class-name class-name">Array</span><span class="token punctuation">.</span><span class="token method function property-access">isArray</span><span class="token punctuation">(</span><span class="token plain">images</span><span class="token punctuation">.</span><span class="token property-access">domains</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token keyword">throw</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">Specified images.domains should be an Array received </span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation keyword">typeof</span><span class="token template-string interpolation"> images</span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation">domains</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">.\nSee more info here: https://err.sh/next.js/invalid-images-config</span><span class="token template-string template-punctuation string">`</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">images</span><span class="token punctuation">.</span><span class="token property-access">domains</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token number">50</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token keyword">throw</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">Specified images.domains exceeds length of 50, received length (</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">images</span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation">domains</span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation">length</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">), please reduce the length of the array to continue.\nSee more info here: https://err.sh/next.js/invalid-images-config</span><span class="token template-string template-punctuation string">`</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">const</span><span class="token plain"> invalid </span><span class="token operator">=</span><span class="token plain"> images</span><span class="token punctuation">.</span><span class="token property-access">domains</span><span class="token punctuation">.</span><span class="token method function property-access">filter</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token parameter punctuation">:</span><span class="token parameter"> unknown</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token keyword">typeof</span><span class="token plain"> d </span><span class="token operator">!==</span><span class="token plain"> </span><span class="token string">&#x27;string&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">invalid</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token keyword">throw</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">Specified images.domains should be an Array of strings received invalid values (</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">invalid</span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation function">join</span><span class="token template-string interpolation punctuation">(</span><span class="token template-string interpolation"></span></div><div class="token-line"><span class="token template-string interpolation">            </span><span class="token template-string interpolation string">&#x27;, &#x27;</span><span class="token template-string interpolation"></span></div><div class="token-line"><span class="token template-string interpolation">          </span><span class="token template-string interpolation punctuation">)</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">).\nSee more info here: https://err.sh/next.js/invalid-images-config</span><span class="token template-string template-punctuation string">`</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">images</span><span class="token punctuation">.</span><span class="token property-access">deviceSizes</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">const</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> deviceSizes </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> images</span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token known-class-name class-name">Array</span><span class="token punctuation">.</span><span class="token method function property-access">isArray</span><span class="token punctuation">(</span><span class="token plain">deviceSizes</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token keyword">throw</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">Specified images.deviceSizes should be an Array received </span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation keyword">typeof</span><span class="token template-string interpolation"> deviceSizes</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">.\nSee more info here: https://err.sh/next.js/invalid-images-config</span><span class="token template-string template-punctuation string">`</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">deviceSizes</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token number">25</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token keyword">throw</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">Specified images.deviceSizes exceeds length of 25, received length (</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">deviceSizes</span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation">length</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">), please reduce the length of the array to continue.\nSee more info here: https://err.sh/next.js/invalid-images-config</span><span class="token template-string template-punctuation string">`</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">const</span><span class="token plain"> invalid </span><span class="token operator">=</span><span class="token plain"> deviceSizes</span><span class="token punctuation">.</span><span class="token method function property-access">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token parameter punctuation">:</span><span class="token parameter"> unknown</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token keyword">typeof</span><span class="token plain"> d </span><span class="token operator">!==</span><span class="token plain"> </span><span class="token string">&#x27;number&#x27;</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> d </span><span class="token operator">&lt;</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> d </span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token number">10000</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">invalid</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token keyword">throw</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">Specified images.deviceSizes should be an Array of numbers that are between 1 and 10000, received invalid values (</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">invalid</span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation function">join</span><span class="token template-string interpolation punctuation">(</span><span class="token template-string interpolation"></span></div><div class="token-line"><span class="token template-string interpolation">            </span><span class="token template-string interpolation string">&#x27;, &#x27;</span><span class="token template-string interpolation"></span></div><div class="token-line"><span class="token template-string interpolation">          </span><span class="token template-string interpolation punctuation">)</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">).\nSee more info here: https://err.sh/next.js/invalid-images-config</span><span class="token template-string template-punctuation string">`</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">images</span><span class="token punctuation">.</span><span class="token property-access">imageSizes</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">const</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> imageSizes </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> images</span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token known-class-name class-name">Array</span><span class="token punctuation">.</span><span class="token method function property-access">isArray</span><span class="token punctuation">(</span><span class="token plain">imageSizes</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token keyword">throw</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">Specified images.imageSizes should be an Array received </span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation keyword">typeof</span><span class="token template-string interpolation"> imageSizes</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">.\nSee more info here: https://err.sh/next.js/invalid-images-config</span><span class="token template-string template-punctuation string">`</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">imageSizes</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token number">25</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token keyword">throw</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">Specified images.imageSizes exceeds length of 25, received length (</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">imageSizes</span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation">length</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">), please reduce the length of the array to continue.\nSee more info here: https://err.sh/next.js/invalid-images-config</span><span class="token template-string template-punctuation string">`</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">const</span><span class="token plain"> invalid </span><span class="token operator">=</span><span class="token plain"> imageSizes</span><span class="token punctuation">.</span><span class="token method function property-access">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token parameter punctuation">:</span><span class="token parameter"> unknown</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token keyword">typeof</span><span class="token plain"> d </span><span class="token operator">!==</span><span class="token plain"> </span><span class="token string">&#x27;number&#x27;</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> d </span><span class="token operator">&lt;</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> d </span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token number">10000</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">invalid</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token keyword">throw</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">Specified images.imageSizes should be an Array of numbers that are between 1 and 10000, received invalid values (</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">invalid</span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation function">join</span><span class="token template-string interpolation punctuation">(</span><span class="token template-string interpolation"></span></div><div class="token-line"><span class="token template-string interpolation">            </span><span class="token template-string interpolation string">&#x27;, &#x27;</span><span class="token template-string interpolation"></span></div><div class="token-line"><span class="token template-string interpolation">          </span><span class="token template-string interpolation punctuation">)</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">).\nSee more info here: https://err.sh/next.js/invalid-images-config</span><span class="token template-string template-punctuation string">`</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token plain">images</span><span class="token punctuation">.</span><span class="token property-access">loader</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      images</span><span class="token punctuation">.</span><span class="token property-access">loader</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&#x27;default&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token constant">VALID_LOADERS</span><span class="token punctuation">.</span><span class="token method function property-access">includes</span><span class="token punctuation">(</span><span class="token plain">images</span><span class="token punctuation">.</span><span class="token property-access">loader</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">throw</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">Specified images.loader should be one of (</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation constant">VALID_LOADERS</span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation function">join</span><span class="token template-string interpolation punctuation">(</span><span class="token template-string interpolation"></span></div><div class="token-line"><span class="token template-string interpolation">          </span><span class="token template-string interpolation string">&#x27;, &#x27;</span><span class="token template-string interpolation"></span></div><div class="token-line"><span class="token template-string interpolation">        </span><span class="token template-string interpolation punctuation">)</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">), received invalid value (</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation"></span></div><div class="token-line"><span class="token template-string interpolation">          images</span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation">loader</span></div><div class="token-line"><span class="token template-string interpolation">        </span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">).\nSee more info here: https://err.sh/next.js/invalid-images-config</span><span class="token template-string template-punctuation string">`</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// Append trailing slash for non-default loaders</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">images</span><span class="token punctuation">.</span><span class="token property-access">path</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        images</span><span class="token punctuation">.</span><span class="token property-access">loader</span><span class="token plain"> </span><span class="token operator">!==</span><span class="token plain"> </span><span class="token string">&#x27;default&#x27;</span><span class="token plain"> </span><span class="token operator">&amp;&amp;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        images</span><span class="token punctuation">.</span><span class="token property-access">path</span><span class="token punctuation">[</span><span class="token plain">images</span><span class="token punctuation">.</span><span class="token property-access">path</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator">-</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">!==</span><span class="token plain"> </span><span class="token string">&#x27;/&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        images</span><span class="token punctuation">.</span><span class="token property-access">path</span><span class="token plain"> </span><span class="token operator">+=</span><span class="token plain"> </span><span class="token string">&#x27;/&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">result</span><span class="token punctuation">.</span><span class="token property-access">i18n</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">const</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> i18n </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> result</span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">const</span><span class="token plain"> i18nType </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">typeof</span><span class="token plain"> i18n</span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">i18nType </span><span class="token operator">!==</span><span class="token plain"> </span><span class="token string">&#x27;object&#x27;</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">throw</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">Specified i18n should be an object received </span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">i18nType</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">.\nSee more info here: https://err.sh/next.js/invalid-i18n-config</span><span class="token template-string template-punctuation string">`</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token known-class-name class-name">Array</span><span class="token punctuation">.</span><span class="token method function property-access">isArray</span><span class="token punctuation">(</span><span class="token plain">i18n</span><span class="token punctuation">.</span><span class="token property-access">locales</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">throw</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">Specified i18n.locales should be an Array received </span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation keyword">typeof</span><span class="token template-string interpolation"> i18n</span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation">locales</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">.\nSee more info here: https://err.sh/next.js/invalid-i18n-config</span><span class="token template-string template-punctuation string">`</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">const</span><span class="token plain"> defaultLocaleType </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">typeof</span><span class="token plain"> i18n</span><span class="token punctuation">.</span><span class="token property-access">defaultLocale</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token plain">i18n</span><span class="token punctuation">.</span><span class="token property-access">defaultLocale</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> defaultLocaleType </span><span class="token operator">!==</span><span class="token plain"> </span><span class="token string">&#x27;string&#x27;</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">throw</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">Specified i18n.defaultLocale should be a string.\nSee more info here: https://err.sh/next.js/invalid-i18n-config</span><span class="token template-string template-punctuation string">`</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token plain"> i18n</span><span class="token punctuation">.</span><span class="token property-access">domains</span><span class="token plain"> </span><span class="token operator">!==</span><span class="token plain"> </span><span class="token string">&#x27;undefined&#x27;</span><span class="token plain"> </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token operator">!</span><span class="token known-class-name class-name">Array</span><span class="token punctuation">.</span><span class="token method function property-access">isArray</span><span class="token punctuation">(</span><span class="token plain">i18n</span><span class="token punctuation">.</span><span class="token property-access">domains</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">throw</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">Specified i18n.domains must be an array of domain objects e.g. [ { domain: &#x27;example.fr&#x27;, defaultLocale: &#x27;fr&#x27;, locales: [&#x27;fr&#x27;] } ] received </span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation keyword">typeof</span><span class="token template-string interpolation"> i18n</span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation">domains</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">.\nSee more info here: https://err.sh/next.js/invalid-i18n-config</span><span class="token template-string template-punctuation string">`</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">i18n</span><span class="token punctuation">.</span><span class="token property-access">domains</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">const</span><span class="token plain"> invalidDomainItems </span><span class="token operator">=</span><span class="token plain"> i18n</span><span class="token punctuation">.</span><span class="token property-access">domains</span><span class="token punctuation">.</span><span class="token method function property-access">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token parameter punctuation">:</span><span class="token parameter"> any</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token plain">item </span><span class="token operator">||</span><span class="token plain"> </span><span class="token keyword">typeof</span><span class="token plain"> item </span><span class="token operator">!==</span><span class="token plain"> </span><span class="token string">&#x27;object&#x27;</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token plain">item</span><span class="token punctuation">.</span><span class="token property-access">defaultLocale</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token plain">item</span><span class="token punctuation">.</span><span class="token property-access">domain</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> </span><span class="token keyword">typeof</span><span class="token plain"> item</span><span class="token punctuation">.</span><span class="token property-access">domain</span><span class="token plain"> </span><span class="token operator">!==</span><span class="token plain"> </span><span class="token string">&#x27;string&#x27;</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token keyword">let</span><span class="token plain"> hasInvalidLocale </span><span class="token operator">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token known-class-name class-name">Array</span><span class="token punctuation">.</span><span class="token method function property-access">isArray</span><span class="token punctuation">(</span><span class="token plain">item</span><span class="token punctuation">.</span><span class="token property-access">locales</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token keyword">for</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">const</span><span class="token plain"> locale </span><span class="token keyword">of</span><span class="token plain"> item</span><span class="token punctuation">.</span><span class="token property-access">locales</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token plain"> locale </span><span class="token operator">!==</span><span class="token plain"> </span><span class="token string">&#x27;string&#x27;</span><span class="token punctuation">)</span><span class="token plain"> hasInvalidLocale </span><span class="token operator">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">            </span><span class="token keyword">for</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">const</span><span class="token plain"> domainItem </span><span class="token keyword">of</span><span class="token plain"> i18n</span><span class="token punctuation">.</span><span class="token property-access">domains</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">              </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">domainItem </span><span class="token operator">===</span><span class="token plain"> item</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token keyword">continue</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">              </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">domainItem</span><span class="token punctuation">.</span><span class="token property-access">locales</span><span class="token plain"> </span><span class="token operator">&amp;&amp;</span><span class="token plain"> domainItem</span><span class="token punctuation">.</span><span class="token property-access">locales</span><span class="token punctuation">.</span><span class="token method function property-access">includes</span><span class="token punctuation">(</span><span class="token plain">locale</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">                </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">warn</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">                  </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">Both </span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">item</span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation">domain</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string"> and </span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">domainItem</span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation">domain</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string"> configured the locale (</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">locale</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">) but only one can. Remove it from one i18n.domains config to continue</span><span class="token template-string template-punctuation string">`</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">                </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">                hasInvalidLocale </span><span class="token operator">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">                </span><span class="token keyword">break</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">              </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token keyword">return</span><span class="token plain"> hasInvalidLocale</span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">invalidDomainItems</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token keyword">throw</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">Invalid i18n.domains values:\n</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">invalidDomainItems</span></div><div class="token-line"><span class="token template-string interpolation">            </span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation function">map</span><span class="token template-string interpolation punctuation">(</span><span class="token template-string interpolation punctuation">(</span><span class="token template-string interpolation parameter">item</span><span class="token template-string interpolation parameter punctuation">:</span><span class="token template-string interpolation parameter"> any</span><span class="token template-string interpolation punctuation">)</span><span class="token template-string interpolation"> </span><span class="token template-string interpolation operator">=&gt;</span><span class="token template-string interpolation"> </span><span class="token template-string interpolation constant">JSON</span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation function">stringify</span><span class="token template-string interpolation punctuation">(</span><span class="token template-string interpolation">item</span><span class="token template-string interpolation punctuation">)</span><span class="token template-string interpolation punctuation">)</span><span class="token template-string interpolation"></span></div><div class="token-line"><span class="token template-string interpolation">            </span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation function">join</span><span class="token template-string interpolation punctuation">(</span><span class="token template-string interpolation"></span></div><div class="token-line"><span class="token template-string interpolation">              </span><span class="token template-string interpolation string">&#x27;\n&#x27;</span><span class="token template-string interpolation"></span></div><div class="token-line"><span class="token template-string interpolation">            </span><span class="token template-string interpolation punctuation">)</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">\n\ndomains value must follow format { domain: &#x27;example.fr&#x27;, defaultLocale: &#x27;fr&#x27;, locales: [&#x27;fr&#x27;] }.\nSee more info here: https://err.sh/next.js/invalid-i18n-config</span><span class="token template-string template-punctuation string">`</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token known-class-name class-name">Array</span><span class="token punctuation">.</span><span class="token method function property-access">isArray</span><span class="token punctuation">(</span><span class="token plain">i18n</span><span class="token punctuation">.</span><span class="token property-access">locales</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">throw</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">Specified i18n.locales must be an array of locale strings e.g. [&quot;en-US&quot;, &quot;nl-NL&quot;] received </span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation keyword">typeof</span><span class="token template-string interpolation"> i18n</span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation">locales</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">.\nSee more info here: https://err.sh/next.js/invalid-i18n-config</span><span class="token template-string template-punctuation string">`</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">const</span><span class="token plain"> invalidLocales </span><span class="token operator">=</span><span class="token plain"> i18n</span><span class="token punctuation">.</span><span class="token property-access">locales</span><span class="token punctuation">.</span><span class="token method function property-access">filter</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">(</span><span class="token parameter">locale</span><span class="token parameter punctuation">:</span><span class="token parameter"> any</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token keyword">typeof</span><span class="token plain"> locale </span><span class="token operator">!==</span><span class="token plain"> </span><span class="token string">&#x27;string&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">invalidLocales</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">throw</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">Specified i18n.locales contains invalid values (</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">invalidLocales</span></div><div class="token-line"><span class="token template-string interpolation">          </span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation function">map</span><span class="token template-string interpolation punctuation">(</span><span class="token template-string interpolation">String</span><span class="token template-string interpolation punctuation">)</span><span class="token template-string interpolation"></span></div><div class="token-line"><span class="token template-string interpolation">          </span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation function">join</span><span class="token template-string interpolation punctuation">(</span><span class="token template-string interpolation"></span></div><div class="token-line"><span class="token template-string interpolation">            </span><span class="token template-string interpolation string">&#x27;, &#x27;</span><span class="token template-string interpolation"></span></div><div class="token-line"><span class="token template-string interpolation">          </span><span class="token template-string interpolation punctuation">)</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">), locales must be valid locale tags provided as strings e.g. &quot;en-US&quot;.\n</span><span class="token template-string template-punctuation string">`</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">See here for list of valid language sub-tags: http://www.iana.org/assignments/language-subtag-registry/language-subtag-registry</span><span class="token template-string template-punctuation string">`</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token plain">i18n</span><span class="token punctuation">.</span><span class="token property-access">locales</span><span class="token punctuation">.</span><span class="token method function property-access">includes</span><span class="token punctuation">(</span><span class="token plain">i18n</span><span class="token punctuation">.</span><span class="token property-access">defaultLocale</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">throw</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">Specified i18n.defaultLocale should be included in i18n.locales.\nSee more info here: https://err.sh/next.js/invalid-i18n-config</span><span class="token template-string template-punctuation string">`</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// make sure default Locale is at the front</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    i18n</span><span class="token punctuation">.</span><span class="token property-access">locales</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      i18n</span><span class="token punctuation">.</span><span class="token property-access">defaultLocale</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token spread operator">...</span><span class="token plain">i18n</span><span class="token punctuation">.</span><span class="token property-access">locales</span><span class="token punctuation">.</span><span class="token method function property-access">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">locale</span><span class="token parameter punctuation">:</span><span class="token parameter"> string</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> locale </span><span class="token operator">!==</span><span class="token plain"> i18n</span><span class="token punctuation">.</span><span class="token property-access">defaultLocale</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">const</span><span class="token plain"> localeDetectionType </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">typeof</span><span class="token plain"> i18n</span><span class="token punctuation">.</span><span class="token property-access">localeDetection</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      localeDetectionType </span><span class="token operator">!==</span><span class="token plain"> </span><span class="token string">&#x27;boolean&#x27;</span><span class="token plain"> </span><span class="token operator">&amp;&amp;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      localeDetectionType </span><span class="token operator">!==</span><span class="token plain"> </span><span class="token string">&#x27;undefined&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">throw</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">Specified i18n.localeDetection should be undefined or a boolean received </span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">localeDetectionType</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">.\nSee more info here: https://err.sh/next.js/invalid-i18n-config</span><span class="token template-string template-punctuation string">`</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> result</span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">normalizeConfig</span><span class="token punctuation">(</span><span class="token parameter">phase</span><span class="token parameter punctuation">:</span><span class="token parameter"> string</span><span class="token parameter punctuation">,</span><span class="token parameter"> config</span><span class="token parameter punctuation">:</span><span class="token parameter"> any</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token plain"> config </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string">&#x27;function&#x27;</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    config </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">config</span><span class="token punctuation">(</span><span class="token plain">phase</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> defaultConfig </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token plain"> config</span><span class="token punctuation">.</span><span class="token property-access">then</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string">&#x27;function&#x27;</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">throw</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token string">&#x27;&gt; Promise returned in next config. https://err.sh/vercel/next.js/promise-in-next-config&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> config</span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">loadConfig</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token parameter">phase</span><span class="token parameter punctuation">:</span><span class="token parameter"> string</span><span class="token parameter punctuation">,</span><span class="token parameter"></span></div><div class="token-line"><span class="token parameter">  dir</span><span class="token parameter punctuation">:</span><span class="token parameter"> string</span><span class="token parameter punctuation">,</span><span class="token parameter"></span></div><div class="token-line"><span class="token parameter">  customConfig</span><span class="token parameter operator">?</span><span class="token parameter punctuation">:</span><span class="token parameter"> object </span><span class="token parameter operator">|</span><span class="token parameter"> </span><span class="token parameter keyword null nil">null</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">customConfig</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token function">assignDefaults</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"> configOrigin</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;server&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token spread operator">...</span><span class="token plain">customConfig </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> path </span><span class="token operator">=</span><span class="token plain"> findUp</span><span class="token punctuation">.</span><span class="token method function property-access">sync</span><span class="token punctuation">(</span><span class="token constant">CONFIG_FILE</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    cwd</span><span class="token punctuation">:</span><span class="token plain"> dir</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">// If config file was found</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">path</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">const</span><span class="token plain"> userConfigModule </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">require</span><span class="token punctuation">(</span><span class="token plain">path</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">const</span><span class="token plain"> userConfig </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">normalizeConfig</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      phase</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      userConfigModule</span><span class="token punctuation">.</span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> userConfigModule</span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">keys</span><span class="token punctuation">(</span><span class="token plain">userConfig</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token maybe-class-name">Log</span><span class="token punctuation">.</span><span class="token method function property-access">warn</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token string">&#x27;Detected next.config.js, no exported configuration found. https://err.sh/vercel/next.js/empty-configuration&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">userConfig</span><span class="token punctuation">.</span><span class="token property-access">target</span><span class="token plain"> </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token operator">!</span><span class="token plain">targets</span><span class="token punctuation">.</span><span class="token method function property-access">includes</span><span class="token punctuation">(</span><span class="token plain">userConfig</span><span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">throw</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">Specified target is invalid. Provided: &quot;</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation"></span></div><div class="token-line"><span class="token template-string interpolation">          userConfig</span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation">target</span></div><div class="token-line"><span class="token template-string interpolation">        </span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">&quot; should be one of </span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">targets</span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation function">join</span><span class="token template-string interpolation punctuation">(</span><span class="token template-string interpolation string">&#x27;, &#x27;</span><span class="token template-string interpolation punctuation">)</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string template-punctuation string">`</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">userConfig</span><span class="token punctuation">.</span><span class="token property-access">amp</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token property-access">canonicalBase</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">const</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> canonicalBase </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> userConfig</span><span class="token punctuation">.</span><span class="token property-access">amp</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword module">as</span><span class="token plain"> any</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      userConfig</span><span class="token punctuation">.</span><span class="token property-access">amp</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> userConfig</span><span class="token punctuation">.</span><span class="token property-access">amp</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      userConfig</span><span class="token punctuation">.</span><span class="token property-access">amp</span><span class="token punctuation">.</span><span class="token property-access">canonicalBase</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">(</span><span class="token plain">canonicalBase</span><span class="token punctuation">.</span><span class="token method function property-access">endsWith</span><span class="token punctuation">(</span><span class="token string">&#x27;/&#x27;</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token operator">?</span><span class="token plain"> canonicalBase</span><span class="token punctuation">.</span><span class="token method function property-access">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token punctuation">:</span><span class="token plain"> canonicalBase</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> </span><span class="token string">&#x27;&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      userConfig</span><span class="token punctuation">.</span><span class="token property-access">experimental</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token property-access">reactMode</span><span class="token plain"> </span><span class="token operator">&amp;&amp;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token operator">!</span><span class="token plain">reactModes</span><span class="token punctuation">.</span><span class="token method function property-access">includes</span><span class="token punctuation">(</span><span class="token plain">userConfig</span><span class="token punctuation">.</span><span class="token property-access">experimental</span><span class="token punctuation">.</span><span class="token property-access">reactMode</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">throw</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">Specified React Mode is invalid. Provided: </span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation"></span></div><div class="token-line"><span class="token template-string interpolation">          userConfig</span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation">experimental</span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation">reactMode</span></div><div class="token-line"><span class="token template-string interpolation">        </span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string"> should be one of </span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">reactModes</span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation function">join</span><span class="token template-string interpolation punctuation">(</span><span class="token template-string interpolation string">&#x27;, &#x27;</span><span class="token template-string interpolation punctuation">)</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string template-punctuation string">`</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token function">assignDefaults</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      configOrigin</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token constant">CONFIG_FILE</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      configFile</span><span class="token punctuation">:</span><span class="token plain"> path</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token spread operator">...</span><span class="token plain">userConfig</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">else</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">const</span><span class="token plain"> configBaseName </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">basename</span><span class="token punctuation">(</span><span class="token constant">CONFIG_FILE</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token function">extname</span><span class="token punctuation">(</span><span class="token constant">CONFIG_FILE</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">const</span><span class="token plain"> nonJsPath </span><span class="token operator">=</span><span class="token plain"> findUp</span><span class="token punctuation">.</span><span class="token method function property-access">sync</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token template-string template-punctuation string">`</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">configBaseName</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">.jsx</span><span class="token template-string template-punctuation string">`</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token template-string template-punctuation string">`</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">configBaseName</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">.ts</span><span class="token template-string template-punctuation string">`</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token template-string template-punctuation string">`</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">configBaseName</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">.tsx</span><span class="token template-string template-punctuation string">`</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token template-string template-punctuation string">`</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">configBaseName</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">.json</span><span class="token template-string template-punctuation string">`</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">{</span><span class="token plain"> cwd</span><span class="token punctuation">:</span><span class="token plain"> dir </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">nonJsPath</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">throw</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">Configuring Next.js via &#x27;</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation function">basename</span><span class="token template-string interpolation punctuation">(</span><span class="token template-string interpolation"></span></div><div class="token-line"><span class="token template-string interpolation">          nonJsPath</span></div><div class="token-line"><span class="token template-string interpolation">        </span><span class="token template-string interpolation punctuation">)</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">&#x27; is not supported. Please replace the file with &#x27;next.config.js&#x27;.</span><span class="token template-string template-punctuation string">`</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> defaultConfig</span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">isTargetLikeServerless</span><span class="token punctuation">(</span><span class="token parameter">target</span><span class="token parameter punctuation">:</span><span class="token parameter"> string</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> isServerless </span><span class="token operator">=</span><span class="token plain"> target </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string">&#x27;serverless&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> isServerlessTrace </span><span class="token operator">=</span><span class="token plain"> target </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string">&#x27;experimental-serverless-trace&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> isServerless </span><span class="token operator">||</span><span class="token plain"> isServerlessTrace</span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div></article></div></div><footer class="Layout_footer__1xrEh"><span style="margin-right:20px">I&#x27;m here </span><a href="https://github.com/freeshineit" target="_block">ShineShao</a></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/blog/next.config","query":{},"buildId":"eONipdZ4nTWwup36pxAnE","nextExport":true,"autoExport":true,"isFallback":false,"head":[["meta",{"charSet":"utf-8"}],["meta",{"name":"viewport","content":"width=device-width, initial-scale=1, user-scalable=no, minimal-ui"}],["meta",{"name":"apple-mobile-web-app-capable","content":"yes"}],["meta",{"name":"apple-mobile-web-app-status-bar-style","content":"black"}],["meta",{"name":"format-detection","content":"telephone=no, email=no"}],["title",{"children":"Next.js next.config.js  (ShineShao)"}],["meta",{"name":"description","content":"Next.js next.config.js"}],["meta",{"name":"keywords","content":"ShineShao freeshineit Next.js Blog "}]]}</script><script nomodule="" src="/_next/static/chunks/polyfills-83732ebf2ed7f8a1b2c7.js"></script><script src="/_next/static/chunks/main-52b6c265a16af4968ec4.js" async=""></script><script src="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" async=""></script><script src="/_next/static/chunks/framework.964e76377795026233d5.js" async=""></script><script src="/_next/static/chunks/9305b49de26327e3f1ee837fed187f9ed10ce38c.d28f5a17b98837abb5c8.js" async=""></script><script src="/_next/static/chunks/99f422a92ff7083adb8a7d840734144fa7589f68.1b1d65909bec5ea62db3.js" async=""></script><script src="/_next/static/chunks/pages/_app-d1670f3a44d680800f03.js" async=""></script><script src="/_next/static/chunks/ba35505a964aaf7d56d2c4b41dee6871329d04fb.56255659c0840c9f32a8.js" async=""></script><script src="/_next/static/chunks/pages/blog/next.config-70bb452122279081a49f.js" async=""></script><script src="/_next/static/eONipdZ4nTWwup36pxAnE/_buildManifest.js" async=""></script><script src="/_next/static/eONipdZ4nTWwup36pxAnE/_ssgManifest.js" async=""></script><script src="/static/js/heading.js"></script></body></html>