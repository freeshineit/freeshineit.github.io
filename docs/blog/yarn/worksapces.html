<!DOCTYPE html><html><head><link rel="shortcut icon" href="https://www.nextjs.cn/static/favicon/favicon.ico"/><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, minimal-ui"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="format-detection" content="telephone=no, email=no"/><title>yarn workspaces (ShineShao)</title><meta name="description" content="前端 yarn workspaces 应用"/><meta name="keywords" content="ShineShao freeshineit Next.js Blog "/><link rel="preload" href="/_next/static/css/bbef8c32b2d61ebb9692.css" as="style"/><link rel="stylesheet" href="/_next/static/css/bbef8c32b2d61ebb9692.css" data-n-g=""/><noscript data-n-css="true"></noscript><link rel="preload" href="/_next/static/chunks/main-52b6c265a16af4968ec4.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.964e76377795026233d5.js" as="script"/><link rel="preload" href="/_next/static/chunks/5cd1e4e3c4a0b9a302ef5fe1d5b9ed8cf00e4289.d28f5a17b98837abb5c8.js" as="script"/><link rel="preload" href="/_next/static/chunks/99f422a92ff7083adb8a7d840734144fa7589f68.1b1d65909bec5ea62db3.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-86e6ae0d3ecec668b1ba.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/yarn/worksapces-7846d79af2370affa9e6.js" as="script"/></head><body class="custom_class"><div id="__next"><div class="Layout_layout__3guix main-mdx" style="width:100%"><header class="Layout_header__1Ex29"><div class="Layout_container__2QLYW"><nav><ul><li><a href="/">Home</a></li><li><a href="/blog">Blog</a></li><li><a href="/readme">README</a></li></ul></nav><div class="Layout_right__2NMHu"><div class="Layout_Theme__3HBe3">🌞</div><a href="https://github.com/freeshineit" target="_block"><img src="/static/images/ShineShao.jpg" alt="ShineShao" class="ShineShao_ShineShao__3y7j0" style="width:34px;height:34px;border-radius:50%"/></a></div></div></header><div class="Layout_main__3m1yK" style="margin:0 auto"><div class="mdx-box"><article><h1 id="yarn-workspaces" class="Heading_H1__CZimV h1-tag"><a aria-hidden="true" tabindex="-1" href="#yarn-workspaces" class="A_A__LqrNw a-tag"><span class="icon icon-link"></span></a>Yarn Workspaces</h1><p class="P_P__2prMq p-tag"><a href="https://yarnpkg.com/features/workspaces" class="A_A__LqrNw a-tag">yarn Workspaces</a> 旨在简化 monorepos 的使用，以更具声明性的方式解决 yarn 链接的主要用例之一。简言之，它们允许您的多个项目一起生活在同一个存储库中，并相互交叉引用——对一个项目的源代码的任何修改都会立即应用于其他项目。</p><p class="P_P__2prMq p-tag">首先，一些词汇：在工作区特性的上下文中，项目是组成工作区的整个目录树（通常是存储库本身）。工作区是由同一项目中您自己的源组成的本地包。最后，工作树是为列出自己的子工作空间的工作空间指定的名称。项目包含一个或多个工作树，这些工作树本身可能包含任意数量的工作空间。任何项目都至少包含一个工作区：根工作区。</p><p style="text-align:center;font-size:24px" class="P_P__2prMq p-tag">Yarn Workspaces</p><p class="P_P__2prMq p-tag"><img src="/static/images/yarn_workspaces.png" class="Img_Img__2B2Nm img-tag"/></p><p style="text-align:center;font-size:12px;color:" class="P_P__2prMq p-tag">https://engineering.brigad.co/react-native-monorepos-code-sharing-f6c08172b417</p><h2 id="创建" class="Heading_H2__2MwMw h2-tag"><a aria-hidden="true" tabindex="-1" href="#创建" class="A_A__LqrNw a-tag"><span class="icon icon-link"></span></a>创建</h2><ul class="List_Ul__1XwLU ul-tag"><li class="li-tag">初始化</li></ul><div class="Pre_Pre__269fU pre-tag"><pre class="Code_pre__r85Dc pre-tag prism-code language-bash " style="background-color:#2a2734;color:#9a86fd;overflow:scroll;margin-top:20px;margin-bottom:20px;padding:16px"><span class="Code_language__1zO4b">bash</span><div class="token-line"><span class="token function" style="display:inline-block">mkdir</span><span class="token plain" style="display:inline-block"> yarn_workspaces </span><span class="token operator" style="display:inline-block">&amp;&amp;</span><span class="token plain" style="display:inline-block"> </span><span class="token builtin class-name" style="display:inline-block">cd</span><span class="token plain" style="display:inline-block"> yarn_workspaces</span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block"># 初始化</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block"># 配置 package.json</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token function" style="display:inline-block">yarn</span><span class="token plain" style="display:inline-block"> init</span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token function" style="display:inline-block">mkdir</span><span class="token plain" style="display:inline-block"> packages</span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block"># 配置 workspaces</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block"># &quot;workspaces&quot;: [</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block">#  &quot;packages/*&quot;</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block"># ]</span></div></pre></div><ul class="List_Ul__1XwLU ul-tag"><li class="li-tag">配置根目录下<code>package.json</code></li></ul><div class="Pre_Pre__269fU pre-tag"><pre class="Code_pre__r85Dc pre-tag prism-code language-json " style="background-color:#2a2734;color:#9a86fd;overflow:scroll;margin-top:20px;margin-bottom:20px;padding:16px"><span class="Code_language__1zO4b">json</span><div class="token-line"><span class="token punctuation" style="display:inline-block">{</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">  </span><span class="token property" style="display:inline-block">&quot;private&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token boolean" style="display:inline-block">true</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">  </span><span class="token property" style="display:inline-block">&quot;workspaces&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token punctuation" style="display:inline-block">[</span><span class="token string" style="display:inline-block">&quot;packages/*&quot;</span><span class="token punctuation" style="display:inline-block">]</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token punctuation" style="display:inline-block">}</span></div></pre></div><ul class="List_Ul__1XwLU ul-tag"><li class="li-tag"><p class="P_P__2prMq p-tag">create common package (components、utils...)</p><ul class="List_Ul__1XwLU ul-tag"><li class="li-tag">初始化 <code>@mono/common</code> package</li></ul><div class="Pre_Pre__269fU pre-tag"><pre class="Code_pre__r85Dc pre-tag prism-code language-bash " style="background-color:#2a2734;color:#9a86fd;overflow:scroll;margin-top:20px;margin-bottom:20px;padding:16px"><span class="Code_language__1zO4b">bash</span><div class="token-line"><span class="token builtin class-name" style="display:inline-block">cd</span><span class="token plain" style="display:inline-block"> packages </span><span class="token operator" style="display:inline-block">&amp;&amp;</span><span class="token plain" style="display:inline-block"> </span><span class="token function" style="display:inline-block">mkdir</span><span class="token plain" style="display:inline-block"> common</span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token function" style="display:inline-block">yarn</span><span class="token plain" style="display:inline-block"> init -y</span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token function" style="display:inline-block">mkdir</span><span class="token plain" style="display:inline-block"> components </span><span class="token operator" style="display:inline-block">&amp;&amp;</span><span class="token plain" style="display:inline-block"> </span><span class="token function" style="display:inline-block">mkdir</span><span class="token plain" style="display:inline-block"> utils</span></div></pre></div><ul class="List_Ul__1XwLU ul-tag"><li class="li-tag">配置 <code>package.json</code></li></ul><div class="Pre_Pre__269fU pre-tag"><pre class="Code_pre__r85Dc pre-tag prism-code language-json " style="background-color:#2a2734;color:#9a86fd;overflow:scroll;margin-top:20px;margin-bottom:20px;padding:16px"><span class="Code_language__1zO4b">json</span><div class="token-line"><span class="token punctuation" style="display:inline-block">{</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">  </span><span class="token property" style="display:inline-block">&quot;name&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;@mono/common&quot;</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">  </span><span class="token property" style="display:inline-block">&quot;main&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;index.ts&quot;</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token punctuation" style="display:inline-block">}</span></div></pre></div><p class="P_P__2prMq p-tag">注：由于整个项目都是基于<code>typescript</code>的, 所以 <code>main</code> 就直接指定 <code>index.ts</code>。如果要发布到 npm 上最好还是使用<code>.js</code>。</p></li><li class="li-tag"><p class="P_P__2prMq p-tag">create mobile web app (html5)</p><ul class="List_Ul__1XwLU ul-tag"><li class="li-tag">初始化 app</li></ul><div class="Pre_Pre__269fU pre-tag"><pre class="Code_pre__r85Dc pre-tag prism-code language-bash " style="background-color:#2a2734;color:#9a86fd;overflow:scroll;margin-top:20px;margin-bottom:20px;padding:16px"><span class="Code_language__1zO4b">bash</span><div class="token-line"><span class="token builtin class-name" style="display:inline-block">cd</span><span class="token plain" style="display:inline-block"> packages </span><span class="token operator" style="display:inline-block">&amp;&amp;</span><span class="token plain" style="display:inline-block"> </span><span class="token function" style="display:inline-block">mkdir</span><span class="token plain" style="display:inline-block"> mobile</span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block"># 创建 index.html</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token function" style="display:inline-block">touch</span><span class="token plain" style="display:inline-block"> index.html</span></div></pre></div></li><li class="li-tag"><p class="P_P__2prMq p-tag">create web app (react spa)</p><ul class="List_Ul__1XwLU ul-tag"><li class="li-tag">初始化 app</li></ul><div class="Pre_Pre__269fU pre-tag"><pre class="Code_pre__r85Dc pre-tag prism-code language-bash " style="background-color:#2a2734;color:#9a86fd;overflow:scroll;margin-top:20px;margin-bottom:20px;padding:16px"><span class="Code_language__1zO4b">bash</span><div class="token-line"><span class="token builtin class-name" style="display:inline-block">cd</span><span class="token plain" style="display:inline-block"> packages</span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block"># 创建 react spa app</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token function" style="display:inline-block">yarn</span><span class="token plain" style="display:inline-block"> create react-app my-app --template typescript</span></div></pre></div><ul class="List_Ul__1XwLU ul-tag"><li class="li-tag">scripts</li></ul><p class="P_P__2prMq p-tag">在项目根目录下<code>package.json</code>中<code>scripts</code>添加下面脚本</p><div class="Pre_Pre__269fU pre-tag"><pre class="Code_pre__r85Dc pre-tag prism-code language-json " style="background-color:#2a2734;color:#9a86fd;overflow:scroll;margin-top:20px;margin-bottom:20px;padding:16px"><span class="Code_language__1zO4b">json</span><div class="token-line"><span class="token punctuation" style="display:inline-block">{</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">  </span><span class="token property" style="display:inline-block">&quot;react-sap-app&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;yarn workspace react-spa-app start&quot;</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token punctuation" style="display:inline-block">}</span></div></pre></div><ul class="List_Ul__1XwLU ul-tag"><li class="li-tag">配置使用本地 package</li></ul><div class="Pre_Pre__269fU pre-tag"><pre class="Code_pre__r85Dc pre-tag prism-code language-bash " style="background-color:#2a2734;color:#9a86fd;overflow:scroll;margin-top:20px;margin-bottom:20px;padding:16px"><span class="Code_language__1zO4b">bash</span><div class="token-line"><span class="token comment" style="display:inline-block"># 安装 @craco/craco</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block"># 在不执行`eject`的条件下注入webpacke等 配置</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token function" style="display:inline-block">yarn</span><span class="token plain" style="display:inline-block"> </span><span class="token function" style="display:inline-block">add</span><span class="token plain" style="display:inline-block"> @craco/craco -D</span></div></pre></div><p class="P_P__2prMq p-tag">在<code>react-spa-app</code>根目录下新建创建<code>craco.config.js</code>文件</p><div class="Pre_Pre__269fU pre-tag"><pre class="Code_pre__r85Dc pre-tag prism-code language-js " style="background-color:#2a2734;color:#9a86fd;overflow:scroll;margin-top:20px;margin-bottom:20px;padding:16px"><span class="Code_language__1zO4b">js</span><div class="token-line"><span class="token keyword" style="display:inline-block">const</span><span class="token plain" style="display:inline-block"> path </span><span class="token operator" style="display:inline-block">=</span><span class="token plain" style="display:inline-block"> </span><span class="token function" style="display:inline-block">require</span><span class="token punctuation" style="display:inline-block">(</span><span class="token string" style="display:inline-block">&quot;path&quot;</span><span class="token punctuation" style="display:inline-block">)</span><span class="token punctuation" style="display:inline-block">;</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token keyword" style="display:inline-block">const</span><span class="token plain" style="display:inline-block"> </span><span class="token punctuation" style="display:inline-block">{</span><span class="token plain" style="display:inline-block"> getLoader</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"> loaderByName </span><span class="token punctuation" style="display:inline-block">}</span><span class="token plain" style="display:inline-block"> </span><span class="token operator" style="display:inline-block">=</span><span class="token plain" style="display:inline-block"> </span><span class="token function" style="display:inline-block">require</span><span class="token punctuation" style="display:inline-block">(</span><span class="token string" style="display:inline-block">&quot;@craco/craco&quot;</span><span class="token punctuation" style="display:inline-block">)</span><span class="token punctuation" style="display:inline-block">;</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block">// 配置包括根目录以外文件路径</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block">// absolutePath 包名 `@mono/common`</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block">// 在`react-spa-app`项目中可以直接使用 import nameFn from &quot;@mono/common&quot;</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token keyword" style="display:inline-block">const</span><span class="token plain" style="display:inline-block"> absolutePath </span><span class="token operator" style="display:inline-block">=</span><span class="token plain" style="display:inline-block"> path</span><span class="token punctuation" style="display:inline-block">.</span><span class="token method function property-access" style="display:inline-block">join</span><span class="token punctuation" style="display:inline-block">(</span><span class="token plain" style="display:inline-block">__dirname</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;../common&quot;</span><span class="token punctuation" style="display:inline-block">)</span><span class="token punctuation" style="display:inline-block">;</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">module</span><span class="token punctuation" style="display:inline-block">.</span><span class="token property-access" style="display:inline-block">exports</span><span class="token plain" style="display:inline-block"> </span><span class="token operator" style="display:inline-block">=</span><span class="token plain" style="display:inline-block"> </span><span class="token punctuation" style="display:inline-block">{</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">  webpack</span><span class="token punctuation" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token punctuation" style="display:inline-block">{</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    alias</span><span class="token punctuation" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token punctuation" style="display:inline-block">{</span><span class="token punctuation" style="display:inline-block">}</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    plugins</span><span class="token punctuation" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token punctuation" style="display:inline-block">[</span><span class="token punctuation" style="display:inline-block">]</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    </span><span class="token function-variable function" style="display:inline-block">configure</span><span class="token punctuation" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token punctuation" style="display:inline-block">(</span><span class="token parameter" style="display:inline-block">webpackConfig</span><span class="token parameter punctuation" style="display:inline-block">,</span><span class="token parameter" style="display:inline-block"> </span><span class="token parameter punctuation" style="display:inline-block">{</span><span class="token parameter" style="display:inline-block"> env</span><span class="token parameter punctuation" style="display:inline-block">,</span><span class="token parameter" style="display:inline-block"> paths </span><span class="token parameter punctuation" style="display:inline-block">}</span><span class="token punctuation" style="display:inline-block">)</span><span class="token plain" style="display:inline-block"> </span><span class="token arrow operator" style="display:inline-block">=&gt;</span><span class="token plain" style="display:inline-block"> </span><span class="token punctuation" style="display:inline-block">{</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">      </span><span class="token keyword" style="display:inline-block">const</span><span class="token plain" style="display:inline-block"> </span><span class="token punctuation" style="display:inline-block">{</span><span class="token plain" style="display:inline-block"> isFound</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"> match </span><span class="token punctuation" style="display:inline-block">}</span><span class="token plain" style="display:inline-block"> </span><span class="token operator" style="display:inline-block">=</span><span class="token plain" style="display:inline-block"> </span><span class="token function" style="display:inline-block">getLoader</span><span class="token punctuation" style="display:inline-block">(</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">        webpackConfig</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">        </span><span class="token function" style="display:inline-block">loaderByName</span><span class="token punctuation" style="display:inline-block">(</span><span class="token string" style="display:inline-block">&quot;babel-loader&quot;</span><span class="token punctuation" style="display:inline-block">)</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">      </span><span class="token punctuation" style="display:inline-block">)</span><span class="token punctuation" style="display:inline-block">;</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">      </span><span class="token keyword" style="display:inline-block">if</span><span class="token plain" style="display:inline-block"> </span><span class="token punctuation" style="display:inline-block">(</span><span class="token plain" style="display:inline-block">isFound</span><span class="token punctuation" style="display:inline-block">)</span><span class="token plain" style="display:inline-block"> </span><span class="token punctuation" style="display:inline-block">{</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">        </span><span class="token keyword" style="display:inline-block">const</span><span class="token plain" style="display:inline-block"> include </span><span class="token operator" style="display:inline-block">=</span><span class="token plain" style="display:inline-block"> </span><span class="token known-class-name class-name" style="display:inline-block">Array</span><span class="token punctuation" style="display:inline-block">.</span><span class="token method function property-access" style="display:inline-block">isArray</span><span class="token punctuation" style="display:inline-block">(</span><span class="token plain" style="display:inline-block">match</span><span class="token punctuation" style="display:inline-block">.</span><span class="token property-access" style="display:inline-block">loader</span><span class="token punctuation" style="display:inline-block">.</span><span class="token property-access" style="display:inline-block">include</span><span class="token punctuation" style="display:inline-block">)</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">          </span><span class="token operator" style="display:inline-block">?</span><span class="token plain" style="display:inline-block"> match</span><span class="token punctuation" style="display:inline-block">.</span><span class="token property-access" style="display:inline-block">loader</span><span class="token punctuation" style="display:inline-block">.</span><span class="token property-access" style="display:inline-block">include</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">          </span><span class="token punctuation" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token punctuation" style="display:inline-block">[</span><span class="token plain" style="display:inline-block">match</span><span class="token punctuation" style="display:inline-block">.</span><span class="token property-access" style="display:inline-block">loader</span><span class="token punctuation" style="display:inline-block">.</span><span class="token property-access" style="display:inline-block">include</span><span class="token punctuation" style="display:inline-block">]</span><span class="token punctuation" style="display:inline-block">;</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">        match</span><span class="token punctuation" style="display:inline-block">.</span><span class="token property-access" style="display:inline-block">loader</span><span class="token punctuation" style="display:inline-block">.</span><span class="token property-access" style="display:inline-block">include</span><span class="token plain" style="display:inline-block"> </span><span class="token operator" style="display:inline-block">=</span><span class="token plain" style="display:inline-block"> include</span><span class="token punctuation" style="display:inline-block">.</span><span class="token property-access" style="display:inline-block">concat</span><span class="token punctuation" style="display:inline-block">[</span><span class="token plain" style="display:inline-block">absolutePath</span><span class="token punctuation" style="display:inline-block">]</span><span class="token punctuation" style="display:inline-block">;</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">      </span><span class="token punctuation" style="display:inline-block">}</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">      </span><span class="token keyword" style="display:inline-block">return</span><span class="token plain" style="display:inline-block"> webpackConfig</span><span class="token punctuation" style="display:inline-block">;</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    </span><span class="token punctuation" style="display:inline-block">}</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">  </span><span class="token punctuation" style="display:inline-block">}</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token punctuation" style="display:inline-block">}</span><span class="token punctuation" style="display:inline-block">;</span></div></pre></div></li><li class="li-tag"><p class="P_P__2prMq p-tag">create ssr web app (next.js)</p><ul class="List_Ul__1XwLU ul-tag"><li class="li-tag">初始化 ssr web app</li></ul><div class="Pre_Pre__269fU pre-tag"><pre class="Code_pre__r85Dc pre-tag prism-code language-bash " style="background-color:#2a2734;color:#9a86fd;overflow:scroll;margin-top:20px;margin-bottom:20px;padding:16px"><span class="Code_language__1zO4b">bash</span><div class="token-line"><span class="token builtin class-name" style="display:inline-block">cd</span><span class="token plain" style="display:inline-block"> packages</span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block"># 创建 react ssr app</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token function" style="display:inline-block">yarn</span><span class="token plain" style="display:inline-block"> create next-app --example with-typescript nextjs-app</span></div></pre></div><ul class="List_Ul__1XwLU ul-tag"><li class="li-tag">scripts</li></ul><p class="P_P__2prMq p-tag">在项目根目录下<code>package.json</code>中<code>scripts</code>添加下面脚本</p><div class="Pre_Pre__269fU pre-tag"><pre class="Code_pre__r85Dc pre-tag prism-code language-json " style="background-color:#2a2734;color:#9a86fd;overflow:scroll;margin-top:20px;margin-bottom:20px;padding:16px"><span class="Code_language__1zO4b">json</span><div class="token-line"><span class="token punctuation" style="display:inline-block">{</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">  </span><span class="token property" style="display:inline-block">&quot;react-sap-app&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;yarn workspace nextjs-app dev&quot;</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token punctuation" style="display:inline-block">}</span></div></pre></div><ul class="List_Ul__1XwLU ul-tag"><li class="li-tag">配置使用本地 package</li></ul><div class="Pre_Pre__269fU pre-tag"><pre class="Code_pre__r85Dc pre-tag prism-code language-bash " style="background-color:#2a2734;color:#9a86fd;overflow:scroll;margin-top:20px;margin-bottom:20px;padding:16px"><span class="Code_language__1zO4b">bash</span><div class="token-line"><span class="token comment" style="display:inline-block"># 注意⚠️ `next-transpile-modules`版本有很大区别</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block"># https://www.npmjs.com/package/next-transpile-modules#user-content-compatibility-table</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token function" style="display:inline-block">yarn</span><span class="token plain" style="display:inline-block"> </span><span class="token function" style="display:inline-block">add</span><span class="token plain" style="display:inline-block"> next-transpile-modules -D</span></div></pre></div><p class="P_P__2prMq p-tag">在<code>nextjs-app</code>根目录下新建创建<code>next.config.js</code>文件</p><div class="Pre_Pre__269fU pre-tag"><pre class="Code_pre__r85Dc pre-tag prism-code language-js " style="background-color:#2a2734;color:#9a86fd;overflow:scroll;margin-top:20px;margin-bottom:20px;padding:16px"><span class="Code_language__1zO4b">js</span><div class="token-line"><span class="token keyword" style="display:inline-block">const</span><span class="token plain" style="display:inline-block"> withTM </span><span class="token operator" style="display:inline-block">=</span><span class="token plain" style="display:inline-block"> </span><span class="token function" style="display:inline-block">require</span><span class="token punctuation" style="display:inline-block">(</span><span class="token string" style="display:inline-block">&quot;next-transpile-modules&quot;</span><span class="token punctuation" style="display:inline-block">)</span><span class="token punctuation" style="display:inline-block">(</span><span class="token punctuation" style="display:inline-block">[</span><span class="token string" style="display:inline-block">&quot;@mono/common&quot;</span><span class="token punctuation" style="display:inline-block">]</span><span class="token punctuation" style="display:inline-block">)</span><span class="token punctuation" style="display:inline-block">;</span><span class="token plain" style="display:inline-block"> </span><span class="token comment" style="display:inline-block">// pass the modules you would like to see transpiled</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">module</span><span class="token punctuation" style="display:inline-block">.</span><span class="token property-access" style="display:inline-block">exports</span><span class="token plain" style="display:inline-block"> </span><span class="token operator" style="display:inline-block">=</span><span class="token plain" style="display:inline-block"> </span><span class="token function" style="display:inline-block">withTM</span><span class="token punctuation" style="display:inline-block">(</span><span class="token punctuation" style="display:inline-block">)</span><span class="token punctuation" style="display:inline-block">;</span></div></pre></div></li><li class="li-tag"><p class="P_P__2prMq p-tag">配置</p></li><li class="li-tag"><p class="P_P__2prMq p-tag">create service app (koa service)</p><ul class="List_Ul__1XwLU ul-tag"><li class="li-tag">初始化 service app</li></ul><div class="Pre_Pre__269fU pre-tag"><pre class="Code_pre__r85Dc pre-tag prism-code language-bash " style="background-color:#2a2734;color:#9a86fd;overflow:scroll;margin-top:20px;margin-bottom:20px;padding:16px"><span class="Code_language__1zO4b">bash</span><div class="token-line"><span class="token builtin class-name" style="display:inline-block">cd</span><span class="token plain" style="display:inline-block"> packages </span><span class="token operator" style="display:inline-block">&amp;&amp;</span><span class="token plain" style="display:inline-block"> </span><span class="token function" style="display:inline-block">mkdir</span><span class="token plain" style="display:inline-block"> koa-service-app </span><span class="token operator" style="display:inline-block">&amp;&amp;</span><span class="token plain" style="display:inline-block"> </span><span class="token builtin class-name" style="display:inline-block">cd</span><span class="token plain" style="display:inline-block"> koa-service-app</span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token function" style="display:inline-block">yarn</span><span class="token plain" style="display:inline-block"> init -y</span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block"># 创建服务入口</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token function" style="display:inline-block">touch</span><span class="token plain" style="display:inline-block"> server.ts</span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token function" style="display:inline-block">yarn</span><span class="token plain" style="display:inline-block"> </span><span class="token function" style="display:inline-block">add</span><span class="token plain" style="display:inline-block"> typescript ts-node @types/node nodemon -D</span></div></pre></div><ul class="List_Ul__1XwLU ul-tag"><li class="li-tag">scripts</li></ul><p class="P_P__2prMq p-tag">在<code>koa-service-app</code>目录下<code>package.json</code>中<code>scripts</code>添加下面脚本</p><div class="Pre_Pre__269fU pre-tag"><pre class="Code_pre__r85Dc pre-tag prism-code language-json " style="background-color:#2a2734;color:#9a86fd;overflow:scroll;margin-top:20px;margin-bottom:20px;padding:16px"><span class="Code_language__1zO4b">json</span><div class="token-line"><span class="token punctuation" style="display:inline-block">{</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">  </span><span class="token property" style="display:inline-block">&quot;dev&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;nodemon --watch &#x27;./**/*.ts&#x27; --watch &#x27;../common/**/*.ts&#x27; --exec &#x27;ts-node&#x27; server.ts&quot;</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token punctuation" style="display:inline-block">}</span></div></pre></div><p class="P_P__2prMq p-tag">在项目根目录下<code>package.json</code>中<code>scripts</code>添加下面脚本</p><div class="Pre_Pre__269fU pre-tag"><pre class="Code_pre__r85Dc pre-tag prism-code language-json " style="background-color:#2a2734;color:#9a86fd;overflow:scroll;margin-top:20px;margin-bottom:20px;padding:16px"><span class="Code_language__1zO4b">json</span><div class="token-line"><span class="token punctuation" style="display:inline-block">{</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">  </span><span class="token property" style="display:inline-block">&quot;koa-service-app&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;yarn workspace koa-service-app dev&quot;</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token punctuation" style="display:inline-block">}</span></div></pre></div></li></ul><h2 id="scripts-说明" class="Heading_H2__2MwMw h2-tag"><a aria-hidden="true" tabindex="-1" href="#scripts-说明" class="A_A__LqrNw a-tag"><span class="icon icon-link"></span></a>scripts 说明</h2><div class="Pre_Pre__269fU pre-tag"><pre class="Code_pre__r85Dc pre-tag prism-code language-bash " style="background-color:#2a2734;color:#9a86fd;overflow:scroll;margin-top:20px;margin-bottom:20px;padding:16px"><span class="Code_language__1zO4b">bash</span><div class="token-line"><span class="token comment" style="display:inline-block"># 启动 mobile app</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block"># 首先已经安装 http-server</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">http-server -p ./package/mobile</span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block"># 启动 react spa app</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token function" style="display:inline-block">yarn</span><span class="token plain" style="display:inline-block"> workspace react-spa-app start</span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block"># 启动 next.js ssr app</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token function" style="display:inline-block">yarn</span><span class="token plain" style="display:inline-block"> workspace nextjs-app dev</span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block"># 启动 koa node server</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token function" style="display:inline-block">yarn</span><span class="token plain" style="display:inline-block"> workspace koa-service-app start</span></div></pre></div><h2 id="yarn-workspace-cli" class="Heading_H2__2MwMw h2-tag"><a aria-hidden="true" tabindex="-1" href="#yarn-workspace-cli" class="A_A__LqrNw a-tag"><span class="icon icon-link"></span></a>yarn workspace cli</h2><div class="Pre_Pre__269fU pre-tag"><pre class="Code_pre__r85Dc pre-tag prism-code language-bash " style="background-color:#2a2734;color:#9a86fd;overflow:scroll;margin-top:20px;margin-bottom:20px;padding:16px"><span class="Code_language__1zO4b">bash</span><div class="token-line"><span class="token comment" style="display:inline-block"># root install dependency xxxxx</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token function" style="display:inline-block">yarn</span><span class="token plain" style="display:inline-block"> </span><span class="token function" style="display:inline-block">add</span><span class="token plain" style="display:inline-block"> -W -D xxxxx</span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block"># root remove dependency xxxxx</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token function" style="display:inline-block">yarn</span><span class="token plain" style="display:inline-block"> remove -W xxxxx</span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block"># package app1 install dependency xxxx</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token function" style="display:inline-block">yarn</span><span class="token plain" style="display:inline-block"> workspace app1 </span><span class="token function" style="display:inline-block">add</span><span class="token plain" style="display:inline-block"> xxxx</span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block"># run app1 dev</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token function" style="display:inline-block">yarn</span><span class="token plain" style="display:inline-block"> workspace app1 dev</span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block"># build all package</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token function" style="display:inline-block">yarn</span><span class="token plain" style="display:inline-block"> workspaces run build</span></div></pre></div><h2 id="提取公共依赖包" class="Heading_H2__2MwMw h2-tag"><a aria-hidden="true" tabindex="-1" href="#提取公共依赖包" class="A_A__LqrNw a-tag"><span class="icon icon-link"></span></a>提取公共依赖包</h2><p class="P_P__2prMq p-tag">把各个项目中公共依赖提取到根目录<code>package.json</code>中方便统一管理</p><div class="Pre_Pre__269fU pre-tag"><pre class="Code_pre__r85Dc pre-tag prism-code language-json " style="background-color:#2a2734;color:#9a86fd;overflow:scroll;margin-top:20px;margin-bottom:20px;padding:16px"><span class="Code_language__1zO4b">json</span><div class="token-line"><span class="token punctuation" style="display:inline-block">{</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">  </span><span class="token property" style="display:inline-block">&quot;dependencies&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token punctuation" style="display:inline-block">{</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    </span><span class="token property" style="display:inline-block">&quot;react&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;^17.0.2&quot;</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    </span><span class="token property" style="display:inline-block">&quot;react-dom&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;^17.0.2&quot;</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">  </span><span class="token punctuation" style="display:inline-block">}</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">  </span><span class="token property" style="display:inline-block">&quot;devDependencies&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token punctuation" style="display:inline-block">{</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    </span><span class="token property" style="display:inline-block">&quot;@craco/craco&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;^6.1.2&quot;</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    </span><span class="token property" style="display:inline-block">&quot;@types/koa&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;^2.13.3&quot;</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    </span><span class="token property" style="display:inline-block">&quot;@types/node&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;^15.12.4&quot;</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    </span><span class="token property" style="display:inline-block">&quot;@types/react&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;^17.0.11&quot;</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    </span><span class="token property" style="display:inline-block">&quot;@types/react-dom&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;^17.0.8&quot;</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    </span><span class="token property" style="display:inline-block">&quot;koa&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;^2.13.1&quot;</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    </span><span class="token property" style="display:inline-block">&quot;next&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;^11.0.1&quot;</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    </span><span class="token property" style="display:inline-block">&quot;next-transpile-modules&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;^8.0.0&quot;</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    </span><span class="token property" style="display:inline-block">&quot;ts-node&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;^10.0.0&quot;</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    </span><span class="token property" style="display:inline-block">&quot;typescript&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;^4.3.4&quot;</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    </span><span class="token property" style="display:inline-block">&quot;@testing-library/jest-dom&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;^5.11.4&quot;</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    </span><span class="token property" style="display:inline-block">&quot;@testing-library/react&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;^11.1.0&quot;</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    </span><span class="token property" style="display:inline-block">&quot;@testing-library/user-event&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;^12.1.10&quot;</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    </span><span class="token property" style="display:inline-block">&quot;@types/jest&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;^26.0.15&quot;</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    </span><span class="token property" style="display:inline-block">&quot;react-scripts&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;4.0.3&quot;</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">  </span><span class="token punctuation" style="display:inline-block">}</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token punctuation" style="display:inline-block">}</span></div></pre></div><h2 id="docker" class="Heading_H2__2MwMw h2-tag"><a aria-hidden="true" tabindex="-1" href="#docker" class="A_A__LqrNw a-tag"><span class="icon icon-link"></span></a>docker</h2><h2 id="注意事项" class="Heading_H2__2MwMw h2-tag"><a aria-hidden="true" tabindex="-1" href="#注意事项" class="A_A__LqrNw a-tag"><span class="icon icon-link"></span></a>注意事项</h2><ul class="List_Ul__1XwLU ul-tag"><li class="li-tag">如果本地新增 package 记得执行 <code>yarn install</code></li></ul><h2 id="版本管理" class="Heading_H2__2MwMw h2-tag"><a aria-hidden="true" tabindex="-1" href="#版本管理" class="A_A__LqrNw a-tag"><span class="icon icon-link"></span></a>版本管理</h2><p class="P_P__2prMq p-tag">如果想对版本进行管理可以结合 <a href="https://lerna.js.org/" class="A_A__LqrNw a-tag">leran</a></p><h2 id="github-地址" class="Heading_H2__2MwMw h2-tag"><a aria-hidden="true" tabindex="-1" href="#github-地址" class="A_A__LqrNw a-tag"><span class="icon icon-link"></span></a>github 地址</h2><p class="P_P__2prMq p-tag"><a href="https://github.com/qqxs/monorepo" class="A_A__LqrNw a-tag">yarn workspaces monorepo</a></p><h2 id="参考" class="Heading_H2__2MwMw h2-tag"><a aria-hidden="true" tabindex="-1" href="#参考" class="A_A__LqrNw a-tag"><span class="icon icon-link"></span></a>参考</h2><ul class="List_Ul__1XwLU ul-tag"><li class="li-tag"><a href="https://yarnpkg.com/features/workspaces" class="A_A__LqrNw a-tag">yarn workspace</a></li><li class="li-tag"><a href="https://create-react-app.dev/docs/adding-typescript" class="A_A__LqrNw a-tag">create-react-app</a></li><li class="li-tag"><a href="https://nextjs.org/" class="A_A__LqrNw a-tag">next.js</a></li><li class="li-tag"><a href="https://koajs.com/" class="A_A__LqrNw a-tag">koa2</a></li><li class="li-tag"><a href="https://nodemon.io/" class="A_A__LqrNw a-tag">nodemon</a></li></ul><p class="P_P__2prMq p-tag"><a href="LICENSE" class="A_A__LqrNw a-tag">MIT</a> © <a href="https://wooorm.com" class="A_A__LqrNw a-tag">ShineShao</a></p></article></div></div><footer class="Layout_footer__1xrEh"><span style="margin-right:20px">I&#x27;m here </span><a href="https://github.com/freeshineit" target="_block">ShineShao</a></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/blog/yarn/worksapces","query":{},"buildId":"tjENhu0zjh9y9_r6jraCY","nextExport":true,"autoExport":true,"isFallback":false,"head":[["meta",{"charSet":"utf-8"}],["meta",{"name":"viewport","content":"width=device-width, initial-scale=1, user-scalable=no, minimal-ui"}],["meta",{"name":"apple-mobile-web-app-capable","content":"yes"}],["meta",{"name":"apple-mobile-web-app-status-bar-style","content":"black"}],["meta",{"name":"format-detection","content":"telephone=no, email=no"}],["title",{"children":"yarn workspaces (ShineShao)"}],["meta",{"name":"description","content":"前端 yarn workspaces 应用"}],["meta",{"name":"keywords","content":"ShineShao freeshineit Next.js Blog "}]]}</script><script nomodule="" src="/_next/static/chunks/polyfills-0a2dccd2aa0d7ea1a89f.js"></script><script src="/_next/static/chunks/main-52b6c265a16af4968ec4.js" async=""></script><script src="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" async=""></script><script src="/_next/static/chunks/framework.964e76377795026233d5.js" async=""></script><script src="/_next/static/chunks/5cd1e4e3c4a0b9a302ef5fe1d5b9ed8cf00e4289.d28f5a17b98837abb5c8.js" async=""></script><script src="/_next/static/chunks/99f422a92ff7083adb8a7d840734144fa7589f68.1b1d65909bec5ea62db3.js" async=""></script><script src="/_next/static/chunks/pages/_app-86e6ae0d3ecec668b1ba.js" async=""></script><script src="/_next/static/chunks/pages/blog/yarn/worksapces-7846d79af2370affa9e6.js" async=""></script><script src="/_next/static/tjENhu0zjh9y9_r6jraCY/_buildManifest.js" async=""></script><script src="/_next/static/tjENhu0zjh9y9_r6jraCY/_ssgManifest.js" async=""></script><script src="/static/js/heading.js"></script></body></html>