(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[498],{1331:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/blog/typescript/type_operation",function(){return t(57)}])},4065:function(e,n,t){"use strict";t.d(n,{Z:function(){return d}});var a=t(5893),r=t(7294),s=t(9008),l=t.n(s),p=function(e){var n=e.meta;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(l(),{children:[(0,a.jsx)("title",{children:"".concat(n.title," (ShineShao)")}),(0,a.jsx)("meta",{name:"description",content:"".concat(n.description," ShineShao \u535a\u5ba2")}),(0,a.jsx)("meta",{name:"keywords",content:"ShineShao freeshineit Next.js Blog "})]})})},i=t(9125),o=t(9954),c=t(9167),u=t.n(c);function m(e){var n=e.meta,t=n.date.split("-"),s=(0,r.useMemo)((function(){try{return i.vc[+t[1]-1]}catch(e){}}),[]);return(0,a.jsxs)("div",{className:u().top,children:[(0,a.jsxs)("div",{className:u().coverWrapper,children:[(0,a.jsx)("div",{className:u().cover,style:{backgroundImage:"url(".concat(n.cover,")")}}),(0,a.jsx)("div",{className:u().coverBg}),(0,a.jsxs)("div",{className:u().dateWrapper,children:[(0,a.jsxs)("span",{className:u().date,children:[(0,a.jsx)("span",{className:u().dateDay,children:t[2]||""}),(0,a.jsx)("span",{className:u().dateMonth,children:s}),(new Date).getFullYear()>+t[0]?(0,a.jsx)("span",{className:u().dateMonth,children:t[0]}):null]}),(0,a.jsx)("h1",{className:u().title,children:n.title})]})]}),(0,a.jsx)(o.Z,{cover:n.cover})]})}var g=t(7366),k=t.n(g);var d=function(e){var n=e.children,t=e.meta;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p,{meta:t}),(0,a.jsx)(m,{meta:t}),(0,a.jsx)("div",{className:k().content,children:(0,a.jsx)("article",{children:n})})]})}},9954:function(e,n,t){"use strict";t.d(n,{Z:function(){return p}});var a=t(5893),r=t(9125),s=t(7385),l=t.n(s);function p(e){var n=e.cover;return(0,a.jsx)(a.Fragment,{children:r.Pu.indexOf(n)>-1?(0,a.jsxs)("div",{className:l().photographer,children:[(0,a.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",width:"1em",height:"1em",fill:"currentColor",children:(0,a.jsx)("path",{d:"M860.414581 207.449017 509.333781 207.449017c0-52.808332-43.003528-95.81186-95.81186-95.81186l-63.817235 0c-52.808332 0-95.81186 43.003528-95.81186 95.81186L158.424996 207.449017c-52.808332 0-95.81186 43.003528-95.81186 95.81186l0 510.53788c0 52.808332 43.003528 95.81186 95.81186 95.81186l701.989585 0c52.808332 0 95.81186-43.003528 95.81186-95.81186L956.22644 303.260877C956.054426 250.452545 913.050899 207.449017 860.414581 207.449017zM509.333781 749.981522c-105.616664 0-191.451705-85.835041-191.451705-191.451705s85.835041-191.451705 191.451705-191.451705 191.451705 85.835041 191.451705 191.451705S614.950445 749.981522 509.333781 749.981522zM812.422644 430.895347c-26.490173 0-47.819923-21.501764-47.819923-47.819923s21.501764-47.819923 47.819923-47.819923c26.490173 0 47.819923 21.501764 47.819923 47.819923S838.912817 430.895347 812.422644 430.895347z"})}),"\xa0",r.ZP.author]}):null})}},57:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return o},meta:function(){return l}});var a=t(9534),r=(t(7294),t(3905)),s=t(4065),l={title:"Typescript \u7c7b\u578b\u64cd\u4f5c",description:"Typescript \u7c7b\u578b\u64cd\u4f5c Type Interface Generics ",date:"2020-11-21",cover:t(9125).Pu[1]},p={meta:l},i=function(e){var n=e.children;return(0,r.kt)(s.Z,{meta:l},n)};function o(e){var n=e.components,t=(0,a.Z)(e,["components"]);return(0,r.kt)(i,Object.assign({},p,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h2",Object.assign({},{id:"ts-\u7c7b\u578b\u64cd\u4f5c"}),"Ts \u7c7b\u578b\u64cd\u4f5c"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Partial (\u90e8\u5206, \u628a\u6240\u6709\u5b57\u6bb5\u8f6c\u4e3a\u53ef\u9009\u5b57\u6bb5)")),(0,r.kt)("pre",null,(0,r.kt)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"/**\n * Make all properties in T optional\n */\ntype Partial<T> = {\n  [P in keyof T]?: T[P];\n};\n")),(0,r.kt)("p",null,"example\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"type partial = {\n  name: string;\n  getName(): string;\n};\n\n/**\n * TPartial \u7ed3\u679c\n * {\n *   name?: string\n *   getName()?: string\n * }\n */\ntype TPartial = Partial<partial>;\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Required (\u9700\u8981, \u628a\u6240\u6709\u5b57\u6bb5\u8f6c\u4e3a\u5fc5\u9009\u5b57\u6bb5)")),(0,r.kt)("pre",null,(0,r.kt)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"/**\n * Make all properties in T required\n */\ntype Required<T> = {\n  [P in keyof T]-?: T[P];\n};\n")),(0,r.kt)("p",null,"example:"),(0,r.kt)("pre",null,(0,r.kt)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"type required = {\n  name?: string;\n  getName(): string;\n};\n\n/**\n * TRequired \u7ed3\u679c\n * {\n *   name: string\n *   getName(): string\n * }\n */\ntype TRequired = Required<required>;\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Readonly (\u53ea\u8bfb\uff0c\u628a\u6240\u6709\u5b57\u6bb5\u8f6c\u4e3a\u53ea\u8bfb\u5b57\u6bb5)")),(0,r.kt)("pre",null,(0,r.kt)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"/**\n * Make all properties in T readonly\n */\ntype Readonly<T> = {\n  readonly [P in keyof T]: T[P];\n};\n")),(0,r.kt)("p",null,"example:"),(0,r.kt)("pre",null,(0,r.kt)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"type Treadonly = {\n  name?: string;\n  getName(): string;\n};\n\n/**\n * TReadonly \u7ed3\u679c\n * {\n *   readonly name?: string\n *   readonly getName(): string\n * }\n */\ntype TReadonly = Readonly<Treadonly>;\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Pick (\u6311\u9009, \u6311\u9009\u6307\u5b9a\u7684\u5b57\u6bb5)")),(0,r.kt)("pre",null,(0,r.kt)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"/**\n * From T, pick a set of properties whose keys are in the union K\n */\ntype Pick<T, K extends keyof T> = {\n  [P in K]: T[P];\n};\n")),(0,r.kt)("p",null,"example:"),(0,r.kt)("pre",null,(0,r.kt)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),'type pick = {\n  name?: string;\n  age: number;\n  getName(): string;\n};\n\n/**\n * TPick \u7ed3\u679c\n * {\n *   name?: string\n *   age: number\n * }\n */\ntype TPick = Pick<pick, "name" | "age">;\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Record(\u8bb0\u5f55,\u5c06 K \u4e2d\u6240\u6709\u7684\u5c5e\u6027\u7684\u503c\u8f6c\u5316\u4e3a T \u7c7b\u578b)")),(0,r.kt)("pre",null,(0,r.kt)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"/**\n * Construct a type with a set of properties K of type T\n */\ntype Record<K extends keyof any, T> = {\n  [P in K]: T;\n};\n")),(0,r.kt)("p",null,"example:"),(0,r.kt)("pre",null,(0,r.kt)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),'type record = {\n  name?: string;\n  age: number;\n  getName(): string;\n};\n\n/**\n * TRecord \u7ed3\u679c\n * {\n *   name: string\n *   age: string\n *   getName: string\n * }\n */\ntype TRecord = Record<keyof record, string>;\n\n/**\n * Ta \u7ed3\u679c\n * {\n *   a: number\n *   b: number\n *   c: number\n *   1: number\n * }\n */\ntype Ta = Record<"a" | "b" | "c" | 1, number>;\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Exclude(\u6392\u9664,\u4ece T \u4e2d\u6392\u9664\u90a3\u4e9b\u53ef\u5206\u914d\u7ed9 U \u7684\u7c7b\u578b\uff0c)")),(0,r.kt)("pre",null,(0,r.kt)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"/**\n * Exclude from T those types that are assignable to U\n */\ntype Exclude<T, U> = T extends U ? never : T;\n")),(0,r.kt)("p",null,"example:"),(0,r.kt)("pre",null,(0,r.kt)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"type T = Exclude<1 | 2, 1 | 3>; // -> 2\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Extract(\u63d0\u53d6,\u4ece T \u4e2d\u63d0\u53d6\u53ef\u5206\u914d\u7ed9 U \u7684\u7c7b\u578b\uff0c \u4ea4\u96c6)")),(0,r.kt)("pre",null,(0,r.kt)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"/**\n * Extract from T those types that are assignable to U\n */\ntype Extract<T, U> = T extends U ? T : never;\n")),(0,r.kt)("p",null,"example:"),(0,r.kt)("pre",null,(0,r.kt)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"type T = Extract<1 | 2, 1 | 3>; // -> 1\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Omit (\u5220\u53bb, \u6784\u9020\u4e00\u4e2a\u9664 K \u7c7b\u578b\u5916\u5177\u6709 T \u5c5e\u6027\u7684\u7c7b\u578b\u3002)")),(0,r.kt)("pre",null,(0,r.kt)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"/**\n * Construct a type with the properties of T except for those in type K.\n */\ntype Omit<T, K extends keyof any> = Pick<T, Exclude<keyof T, K>>;\n")),(0,r.kt)("p",null,"example:"),(0,r.kt)("pre",null,(0,r.kt)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),'interface Person {\n  name: string;\n  age: number;\n  location: string;\n}\n\n/**\n * OmitPerson \u7ed3\u679c\n * {\n *   location: string\n * }\n */\ntype OmitPerson = Omit<Person, "name" | "age">;\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6570\u7ec4")),(0,r.kt)("pre",null,(0,r.kt)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),'/** arr1Example \u4e2d\u53ea\u53ef\u4ee5\u4f7f\u7528`string`\u7c7b\u578b\u586b\u5145 */\ntype arr1 = string[]; // \u5efa\u8bae\u4f7f\u7528[]\nconst arr1Example: arr1 = ["123", "23454"];\n\n/** arr2Example \u4e2d\u53ea\u53ef\u4ee5\u4f7f\u7528[`string`,`number`]\u7c7b\u578b\u586b\u5145\uff0c\u5fc5\u987b\u6309\u987a\u5e8f\u586b\u5145, \u4e2a\u6570\u4e5f\u6709\u9650\u5236 */\ntype arr2 = [string, number];\nconst arr2Example: arr2 = ["0", 1];\n\n/** arr3Example \u4e2d\u53ea\u53ef\u4ee5\u4f7f\u7528`string`\u6216`number`\u7c7b\u578b\u586b\u5145\uff0c\u6ca1\u6709\u987a\u5e8f\u8981\u6c42 */\ntype arr3 = (string | number)[];\nconst arr3Example: arr3 = [0, "1", "2", 3, 4];\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5bf9\u8c61")),(0,r.kt)("pre",null,(0,r.kt)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"interface Persion<T> {\n  [key: T]: T;\n}\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"extends")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"keyof (\u5bf9\u4e8e\u4efb\u4f55\u7c7b\u578b ",(0,r.kt)("inlineCode",{parentName:"p"},"T"),"\uff0c ",(0,r.kt)("inlineCode",{parentName:"p"},"keyof T"),"\u7684\u7ed3\u679c\u4e3a ",(0,r.kt)("inlineCode",{parentName:"p"},"T"),"\u4e0a\u5df2\u77e5\u7684\u516c\u5171\u5c5e\u6027\u540d\u7684\u8054\u5408)"))),(0,r.kt)("pre",null,(0,r.kt)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"interface Person {\n  name: string;\n  age: number;\n}\n\ntype p = keyof Person; // -> p = 'name' | 'age'\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"typeof")),(0,r.kt)("pre",null,(0,r.kt)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u4ea4\u53c9\u7c7b\u578b (\u4ea4\u53c9\u7c7b\u578b\u662f\u5c06\u591a\u4e2a\u7c7b\u578b\u5408\u5e76\u4e3a\u4e00\u4e2a\u7c7b\u578b)")),(0,r.kt)("pre",null,(0,r.kt)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"interface;\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u8054\u5408\u7c7b\u578b (\u8054\u5408\u7c7b\u578b\u8868\u793a\u4e00\u4e2a\u503c\u53ef\u4ee5\u662f\u51e0\u79cd\u7c7b\u578b\u4e4b\u4e00,\u7528\u7ad6\u7ebf",(0,r.kt)("inlineCode",{parentName:"li"},"\uff5c"),"\u5206\u9694\u6bcf\u4e2a\u7c7b\u578b)")),(0,r.kt)("pre",null,(0,r.kt)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"function getNum(num: number | string): number {\n  return +num;\n}\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u7d22\u5f15\u7c7b\u578b")),(0,r.kt)("pre",null,(0,r.kt)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6620\u5c04\u7c7b\u578b")),(0,r.kt)("pre",null,(0,r.kt)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"@4.1")),(0,r.kt)("pre",null,(0,r.kt)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"  // @4.1\ntype Getters<T> = {\n  //\n  [K in keyof T as `get${capitalize K}`]: () => T[K]\n}\n\ninterface Person {\n    name: string;\n    age: number;\n    location: string;\n}\n\n/**\n* LazyPerson \u7ed3\u679c\n* {\n*   name: string\n*   age: number\n*   location: string\n*   getName: () => string\n*   getAge: () => number\n*   getLocation: () => string\n* }\n*/\ntype LazyPerson = Getters<Person>;\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"React \u4e2d\u7684\u7c7b\u578b\u7ea6\u675f"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"FC (\u51fd\u6570\u7ec4\u4ef6\u7c7b\u578b)")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",Object.assign({parentName:"pre"},{className:"language-tsx"}),"interface FunctionComponent<P = {}> {\n  (props: PropsWithChildren<P>, context?: any): ReactElement<any, any> | null;\n  propTypes?: WeakValidationMap<P>;\n  contextTypes?: ValidationMap<any>;\n  defaultProps?: Partial<P>;\n  displayName?: string;\n}\n\ntype FC<P = {}> = FunctionComponent<P>;\n\n// \u5177\u4f53\u4f7f\u7528\ninterface IProps {}\nconst App: FC<IProps> = props => <div>{props.children}</div>;\n")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"useState"),(0,r.kt)("p",{parentName:"li"},"React \u4e2d\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"useState"),"\u65b9\u6cd5\u53bb\u8bbe\u7f6e state"))),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",Object.assign({parentName:"pre"},{className:"language-tsx"}),"function useState<S>(\n  initialState: S | (() => S)\n): [S, Dispatch<SetStateAction<S>>];\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Next.js \u4e2d\u7684\u7c7b\u578b\u7ea6\u675f"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"NextPage (page \u7ec4\u4ef6\u7684\u7c7b\u578b)")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",Object.assign({parentName:"pre"},{className:"language-tsx"}),"/**\n * `Page` type, use it as a guide to create `pages`.\n */\nexport type NextPage<P = {}, IP = P> = NextComponentType<\n  NextPageContext,\n  IP,\n  P\n>;\n\n// \u5177\u4f53\u4f7f\u7528\ninterface IHomePageProps {}\nconst homePage: NextPage<IHomePageProps> = () => <div>this is home page</div>;\n")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"GetServerSideProps \uff08getServerSideProps \u51fd\u6570\u7684\u7c7b\u578b\uff09")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"export type GetServerSideProps<\n  P extends { [key: string]: any } = { [key: string]: any },\n  Q extends ParsedUrlQuery = ParsedUrlQuery\n> = (\n  context: GetServerSidePropsContext<Q>\n) => Promise<GetServerSidePropsResult<P>>;\n")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"GetServerSidePropsContext \uff08getServerSideProps \u51fd\u6570\u7684\u53c2\u6570\u7c7b\u578b\uff09")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"export type GetServerSidePropsContext<\n  Q extends ParsedUrlQuery = ParsedUrlQuery\n> = {\n  req: IncomingMessage; // http.IncomingMessage\n  res: ServerResponse; // http.ServerResponse\n  params?: Q; // \u53c2\u6570\n  query: ParsedUrlQuery; // \u8bf7\u6c42search\u53c2\u6570\n  preview?: boolean;\n  previewData?: any;\n  resolvedUrl: string;\n  locale?: string;\n  locales?: string[];\n  defaultLocale?: string;\n};\n")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"GetStaticProps \uff08getStaticProps \u51fd\u6570\u7684\u7c7b\u578b\uff09")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"export type GetStaticProps<\n  P extends { [key: string]: any } = { [key: string]: any },\n  Q extends ParsedUrlQuery = ParsedUrlQuery\n> = (context: GetStaticPropsContext<Q>) => Promise<GetStaticPropsResult<P>>;\n")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"GetStaticPropsContext \uff08getStaticProps \u51fd\u6570\u7684\u53c2\u6570\u7c7b\u578b\uff09")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"export type GetStaticPropsContext<Q extends ParsedUrlQuery = ParsedUrlQuery> =\n  {\n    params?: Q;\n    preview?: boolean;\n    previewData?: any;\n    locale?: string;\n    locales?: string[];\n    defaultLocale?: string;\n  };\n")))))}o.isMDXComponent=!0},9167:function(e){e.exports={top:"Cover_top__ZrW3_",coverWrapper:"Cover_coverWrapper__ORBLm",cover:"Cover_cover__946TB",coverBg:"Cover_coverBg__kRvQ4",dateWrapper:"Cover_dateWrapper__LkZQ2",date:"Cover_date__EoZZG",dateDay:"Cover_dateDay__h46lo",dateMonth:"Cover_dateMonth__ygp2w"}},7366:function(e){e.exports={content:"Content_content__JCitR","toc-anchors":"Content_toc-anchors__u_NLx"}},7385:function(e){e.exports={photographer:"Photographer_photographer__AVcTl"}}},function(e){e.O(0,[774,888,179],(function(){return n=1331,e(e.s=n);var n}));var n=e.O();_N_E=n}]);