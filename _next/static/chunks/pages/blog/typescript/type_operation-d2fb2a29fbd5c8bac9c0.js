(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[498],{2643:function(e,n,t){"use strict";t.d(n,{Z:function(){return p}});t(7294);var a=t(9008),r=t(5893),l=function(e){var n=e.meta;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(a.default,{children:[(0,r.jsx)("title",{children:"".concat(n.title," (ShineShao)")}),(0,r.jsx)("meta",{name:"description",content:n.description||"ShineShao \u535a\u5ba2"}),(0,r.jsx)("meta",{name:"keywords",content:"ShineShao freeshineit Next.js Blog "})]})})};var p=function(e){var n=e.children,t=e.meta;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l,{meta:t}),(0,r.jsx)("article",{children:n})]})}},940:function(e,n,t){"use strict";t.r(n),t.d(n,{meta:function(){return i},default:function(){return m}});var a=t(7462),r=t(4925),l=(t(7294),t(3905)),p=t(2643),s=["components"],i={title:"Typescript \u7c7b\u578b\u64cd\u4f5c",description:"Typescript \u7c7b\u578b\u64cd\u4f5c Type Interface Generics ",date:"2020-11-21"},o={meta:i},u=function(e){var n=e.children;return(0,l.kt)(p.Z,{meta:i},n)};function m(e){var n=e.components,t=(0,r.Z)(e,s);return(0,l.kt)(u,(0,a.Z)({},o,t,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("h2",{id:"typescript-\u7c7b\u578b\u64cd\u4f5c"},(0,l.kt)("a",{parentName:"h2","aria-hidden":"true",tabIndex:-1,href:"#typescript-\u7c7b\u578b\u64cd\u4f5c"},(0,l.kt)("span",{parentName:"a",className:"icon icon-link"})),"Typescript \u7c7b\u578b\u64cd\u4f5c"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Partial (\u90e8\u5206, \u628a\u6240\u6709\u5b57\u6bb5\u8f6c\u4e3a\u53ef\u9009\u5b57\u6bb5)")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"/**\n * Make all properties in T optional\n */\ntype Partial<T> = {\n  [P in keyof T]?: T[P];\n};\n")),(0,l.kt)("p",null,"example\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"type partial = {\n  name: string;\n  getName(): string;\n};\n\n/**\n * TPartial \u7ed3\u679c\n * {\n *   name?: string\n *   getName()?: string\n * }\n */\ntype TPartial = Partial<partial>;\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Required (\u9700\u8981, \u628a\u6240\u6709\u5b57\u6bb5\u8f6c\u4e3a\u5fc5\u9009\u5b57\u6bb5)")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"/**\n * Make all properties in T required\n */\ntype Required<T> = {\n  [P in keyof T]-?: T[P];\n};\n")),(0,l.kt)("p",null,"example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"type required = {\n  name?: string;\n  getName(): string;\n};\n\n/**\n * TRequired \u7ed3\u679c\n * {\n *   name: string\n *   getName(): string\n * }\n */\ntype TRequired = Required<required>;\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Readonly (\u53ea\u8bfb\uff0c\u628a\u6240\u6709\u5b57\u6bb5\u8f6c\u4e3a\u53ea\u8bfb\u5b57\u6bb5)")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"/**\n * Make all properties in T readonly\n */\ntype Readonly<T> = {\n  readonly [P in keyof T]: T[P];\n};\n")),(0,l.kt)("p",null,"example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"type Treadonly = {\n  name?: string;\n  getName(): string;\n};\n\n/**\n * TReadonly \u7ed3\u679c\n * {\n *   readonly name?: string\n *   readonly getName(): string\n * }\n */\ntype TReadonly = Readonly<Treadonly>;\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Pick (\u6311\u9009, \u6311\u9009\u6307\u5b9a\u7684\u5b57\u6bb5)")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"/**\n * From T, pick a set of properties whose keys are in the union K\n */\ntype Pick<T, K extends keyof T> = {\n  [P in K]: T[P];\n};\n")),(0,l.kt)("p",null,"example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},'type pick = {\n  name?: string;\n  age: number;\n  getName(): string;\n};\n\n/**\n * TPick \u7ed3\u679c\n * {\n *   name?: string\n *   age: number\n * }\n */\ntype TPick = Pick<pick, "name" | "age">;\n')),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Record(\u8bb0\u5f55,\u5c06 K \u4e2d\u6240\u6709\u7684\u5c5e\u6027\u7684\u503c\u8f6c\u5316\u4e3a T \u7c7b\u578b)")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"/**\n * Construct a type with a set of properties K of type T\n */\ntype Record<K extends keyof any, T> = {\n  [P in K]: T;\n};\n")),(0,l.kt)("p",null,"example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},'type record = {\n  name?: string;\n  age: number;\n  getName(): string;\n};\n\n/**\n * TRecord \u7ed3\u679c\n * {\n *   name: string\n *   age: string\n *   getName: string\n * }\n */\ntype TRecord = Record<keyof record, string>;\n\n/**\n * Ta \u7ed3\u679c\n * {\n *   a: number\n *   b: number\n *   c: number\n *   1: number\n * }\n */\ntype Ta = Record<"a" | "b" | "c" | 1, number>;\n')),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Exclude(\u6392\u9664,\u4ece T \u4e2d\u6392\u9664\u90a3\u4e9b\u53ef\u5206\u914d\u7ed9 U \u7684\u7c7b\u578b\uff0c)")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"/**\n * Exclude from T those types that are assignable to U\n */\ntype Exclude<T, U> = T extends U ? never : T;\n")),(0,l.kt)("p",null,"example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"type T = Exclude<1 | 2, 1 | 3>; // -> 2\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Extract(\u63d0\u53d6,\u4ece T \u4e2d\u63d0\u53d6\u53ef\u5206\u914d\u7ed9 U \u7684\u7c7b\u578b\uff0c \u4ea4\u96c6)")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"/**\n * Extract from T those types that are assignable to U\n */\ntype Extract<T, U> = T extends U ? T : never;\n")),(0,l.kt)("p",null,"example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"type T = Extract<1 | 2, 1 | 3>; // -> 1\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Omit (\u5220\u53bb, \u6784\u9020\u4e00\u4e2a\u9664 K \u7c7b\u578b\u5916\u5177\u6709 T \u5c5e\u6027\u7684\u7c7b\u578b\u3002)")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"/**\n * Construct a type with the properties of T except for those in type K.\n */\ntype Omit<T, K extends keyof any> = Pick<T, Exclude<keyof T, K>>;\n")),(0,l.kt)("p",null,"example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},'interface Person {\n  name: string;\n  age: number;\n  location: string;\n}\n\n/**\n * OmitPerson \u7ed3\u679c\n * {\n *   location: string\n * }\n */\ntype OmitPerson = Omit<Person, "name" | "age">;\n')),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u6570\u7ec4")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},'/** arr1Example \u4e2d\u53ea\u53ef\u4ee5\u4f7f\u7528`string`\u7c7b\u578b\u586b\u5145 */\ntype arr1 = string[]; // \u5efa\u8bae\u4f7f\u7528[]\nconst arr1Example: arr1 = ["123", "23454"];\n\n/** arr2Example \u4e2d\u53ea\u53ef\u4ee5\u4f7f\u7528[`string`,`number`]\u7c7b\u578b\u586b\u5145\uff0c\u5fc5\u987b\u6309\u987a\u5e8f\u586b\u5145, \u4e2a\u6570\u4e5f\u6709\u9650\u5236 */\ntype arr2 = [string, number];\nconst arr2Example: arr2 = ["0", 1];\n\n/** arr3Example \u4e2d\u53ea\u53ef\u4ee5\u4f7f\u7528`string`\u6216`number`\u7c7b\u578b\u586b\u5145\uff0c\u6ca1\u6709\u987a\u5e8f\u8981\u6c42 */\ntype arr3 = (string | number)[];\nconst arr3Example: arr3 = [0, "1", "2", 3, 4];\n')),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5bf9\u8c61")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"interface Persion<T> {\n  [key: T]: T;\n}\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"extends")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"keyof (\u5bf9\u4e8e\u4efb\u4f55\u7c7b\u578b ",(0,l.kt)("inlineCode",{parentName:"p"},"T"),"\uff0c ",(0,l.kt)("inlineCode",{parentName:"p"},"keyof T"),"\u7684\u7ed3\u679c\u4e3a ",(0,l.kt)("inlineCode",{parentName:"p"},"T"),"\u4e0a\u5df2\u77e5\u7684\u516c\u5171\u5c5e\u6027\u540d\u7684\u8054\u5408)"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"interface Person {\n  name: string;\n  age: number;\n}\n\ntype p = keyof Person; // -> p = 'name' | 'age'\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"typeof")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u4ea4\u53c9\u7c7b\u578b (\u4ea4\u53c9\u7c7b\u578b\u662f\u5c06\u591a\u4e2a\u7c7b\u578b\u5408\u5e76\u4e3a\u4e00\u4e2a\u7c7b\u578b)")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"interface;\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u8054\u5408\u7c7b\u578b (\u8054\u5408\u7c7b\u578b\u8868\u793a\u4e00\u4e2a\u503c\u53ef\u4ee5\u662f\u51e0\u79cd\u7c7b\u578b\u4e4b\u4e00,\u7528\u7ad6\u7ebf",(0,l.kt)("inlineCode",{parentName:"li"},"\uff5c"),"\u5206\u9694\u6bcf\u4e2a\u7c7b\u578b)")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function getNum(num: number | string): number {\n  return +num;\n}\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u7d22\u5f15\u7c7b\u578b")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u6620\u5c04\u7c7b\u578b")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"@4.1")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"  // @4.1\ntype Getters<T> = {\n  //\n  [K in keyof T as `get${capitalize K}`]: () => T[K]\n}\n\ninterface Person {\n    name: string;\n    age: number;\n    location: string;\n}\n\n/**\n* LazyPerson \u7ed3\u679c\n* {\n*   name: string\n*   age: number\n*   location: string\n*   getName: () => string\n*   getAge: () => number\n*   getLocation: () => string\n* }\n*/\ntype LazyPerson = Getters<Person>;\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"React \u4e2d\u7684\u7c7b\u578b\u7ea6\u675f"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"FC (\u51fd\u6570\u7ec4\u4ef6\u7c7b\u578b)")),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-tsx"},"interface FunctionComponent<P = {}> {\n  (props: PropsWithChildren<P>, context?: any): ReactElement<any, any> | null;\n  propTypes?: WeakValidationMap<P>;\n  contextTypes?: ValidationMap<any>;\n  defaultProps?: Partial<P>;\n  displayName?: string;\n}\n\ntype FC<P = {}> = FunctionComponent<P>;\n\n// \u5177\u4f53\u4f7f\u7528\ninterface IProps {}\nconst App: FC<IProps> = props => <div>{props.children}</div>;\n")),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"useState"),(0,l.kt)("p",{parentName:"li"},"React \u4e2d\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"useState"),"\u65b9\u6cd5\u53bb\u8bbe\u7f6e state"))),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-tsx"},"function useState<S>(\n  initialState: S | (() => S)\n): [S, Dispatch<SetStateAction<S>>];\n"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Next.js \u4e2d\u7684\u7c7b\u578b\u7ea6\u675f"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"NextPage (page \u7ec4\u4ef6\u7684\u7c7b\u578b)")),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-tsx"},"/**\n * `Page` type, use it as a guide to create `pages`.\n */\nexport type NextPage<P = {}, IP = P> = NextComponentType<\n  NextPageContext,\n  IP,\n  P\n>;\n\n// \u5177\u4f53\u4f7f\u7528\ninterface IHomePageProps {}\nconst homePage: NextPage<IHomePageProps> = () => <div>this is home page</div>;\n")),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"GetServerSideProps \uff08getServerSideProps \u51fd\u6570\u7684\u7c7b\u578b\uff09")),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"export type GetServerSideProps<\n  P extends { [key: string]: any } = { [key: string]: any },\n  Q extends ParsedUrlQuery = ParsedUrlQuery\n> = (\n  context: GetServerSidePropsContext<Q>\n) => Promise<GetServerSidePropsResult<P>>;\n")),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"GetServerSidePropsContext \uff08getServerSideProps \u51fd\u6570\u7684\u53c2\u6570\u7c7b\u578b\uff09")),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"export type GetServerSidePropsContext<\n  Q extends ParsedUrlQuery = ParsedUrlQuery\n> = {\n  req: IncomingMessage; // http.IncomingMessage\n  res: ServerResponse; // http.ServerResponse\n  params?: Q; // \u53c2\u6570\n  query: ParsedUrlQuery; // \u8bf7\u6c42search\u53c2\u6570\n  preview?: boolean;\n  previewData?: any;\n  resolvedUrl: string;\n  locale?: string;\n  locales?: string[];\n  defaultLocale?: string;\n};\n")),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"GetStaticProps \uff08getStaticProps \u51fd\u6570\u7684\u7c7b\u578b\uff09")),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"export type GetStaticProps<\n  P extends { [key: string]: any } = { [key: string]: any },\n  Q extends ParsedUrlQuery = ParsedUrlQuery\n> = (context: GetStaticPropsContext<Q>) => Promise<GetStaticPropsResult<P>>;\n")),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"GetStaticPropsContext \uff08getStaticProps \u51fd\u6570\u7684\u53c2\u6570\u7c7b\u578b\uff09")),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"export type GetStaticPropsContext<\n  Q extends ParsedUrlQuery = ParsedUrlQuery\n> = {\n  params?: Q;\n  preview?: boolean;\n  previewData?: any;\n  locale?: string;\n  locales?: string[];\n  defaultLocale?: string;\n};\n")))))}m.isMDXComponent=!0},1509:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/blog/typescript/type_operation",function(){return t(940)}])},7462:function(e,n,t){"use strict";function a(){return(a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}t.d(n,{Z:function(){return a}})}},function(e){e.O(0,[774,888,179],(function(){return n=1509,e(e.s=n);var n}));var n=e.O();_N_E=n}]);