import MDXContentCom from "@shared/MDXContent";
import { RandomCover } from "@constant";

export const meta = {
  title: "javascript typeof åŸç†",
  description:
    "javascript typeof åŸç†, typeof è¿ç®—ç¬¦è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºæ“ä½œæ•°çš„ç±»å‹ã€‚",
  date: "2022-10-25",
  cover: RandomCover[1]
};

export default ({ children }) => (
  <MDXContentCom meta={meta}>{children}</MDXContentCom>
);

## typeof åŸç†

[typeof](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/typeof) è¿ç®—ç¬¦è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºæ“ä½œæ•°çš„ç±»å‹ã€‚

javascript åœ¨åº•å±‚å­˜å‚¨å˜é‡çš„æ—¶å€™,ä¼šåœ¨å˜é‡çš„æœºå™¨ç çš„ä½ä½(å‰ä¸‰ä½) 1-3 ä½å­˜å‚¨å…¶ç±»å‹ä¿¡æ¯: å¯¹è±¡:000 (null æ˜¯ 000ï¼Œ è¿™ä¹Ÿæ˜¯ null çš„ typeof å€¼ä¸ºä»€ä¹ˆæ˜¯ object çš„åŸå› ) æµ®ç‚¹æ•°:010 å­—ç¬¦ä¸²:100 å¸ƒå°”:110 â€ã€‚
`typeof`ç›´æ¥æ ¹æ®å˜é‡å€¼å¾—å†…å­˜æ ‡è¯†ç¬¦è¿›è¡Œåˆ¤æ–­å¹¶è¿”å›çš„æ˜¯å¯¹åº”å­—ç¬¦ä¸²å½¢å¼çš„å€¼ã€‚

## å®ç°

```ts
/**
 * æ¨¡æ‹Ÿ typeof
 *
 * typeofåŸç†ï¼š
 * js åœ¨åº•å±‚å­˜å‚¨å˜é‡çš„æ—¶å€™,ä¼šåœ¨å˜é‡çš„æœºå™¨ç çš„ä½ä½1-3ä½å­˜å‚¨å…¶ç±»å‹ä¿¡æ¯: å¯¹è±¡:000 (null æ˜¯ 000ï¼Œ è¿™ä¹Ÿæ˜¯ null çš„typeof å€¼ä¸ºä»€ä¹ˆæ˜¯objectçš„åŸå› ) æµ®ç‚¹æ•°:010 å­—ç¬¦ä¸²:100 å¸ƒå°”:110 â€ã€‚
 * typeofç›´æ¥æ ¹æ®å˜é‡å€¼å¾—å†…å­˜æ ‡è¯†ç¬¦è¿›è¡Œåˆ¤æ–­å¹¶è¿”å›çš„æ˜¯å¯¹åº”å­—ç¬¦ä¸²å½¢å¼çš„å€¼ã€‚
 *
 * å®ç°ï¼š
 * 1. åˆ›å»ºä¸€ä¸ªæšä¸¾å¯¹è±¡
 * 2. åˆ©ç”¨ Object.prototype.toString.call æ¥è·å–ç±»å‹
 * 3. å†å¯¹ Number, String, Boolean å¯¹è±¡è¿›è¡Œç‰¹æ®Šå¤„ç†
 *
 * @param target any
 * @returns string
 */
function _typeof(target: any) {
  const EnumMap = {
    ["[object Number]"]: "number",
    ["[object String]"]: "string",
    ["[object Object]"]: "object",
    ["[object Array]"]: "object",
    ["[object Null]"]: "object",
    ["[object Boolean]"]: "boolean",
    ["[object Function]"]: "function",
    ["[object Undefined]"]: "undefined",
    ["[object Symbol]"]: "symbol",
    ["[object BigInt]"]: "bigint",
    ["[object Set]"]: "object",
    ["[object Map]"]: "object"
  };

  const key: keyof typeof EnumMap = Object.prototype.toString.call(target);

  //  è¿™ä¸ªå‡ ä¸ªç‰¹æ®Šå¤„ç†ä¸€ä¸‹
  if (
    ["[object Number]", "[object String]", "[object Boolean]"].includes(key) &&
    target instanceof Object
  ) {
    return "object";
  }
  return EnumMap[key];
}

// npx ts-node app/typeof.ts
// å¦‚æœæœ‰é”™ ä¼šæœ‰æ‰“å°
const assert = require("assert");
// test
assert.equal(typeof 12312, _typeof(12312));
assert.equal(typeof new Number(12312), _typeof(new Number(12312)));
//
assert.equal(typeof true, _typeof(true));
assert.equal(typeof false, _typeof(false));
assert.equal(typeof new Boolean(true), _typeof(new Boolean(true)));
assert.equal(typeof new Boolean(false), _typeof(new Boolean(false)));
//
assert.equal(typeof "string", _typeof("string"));
assert.equal(typeof new String("string"), _typeof(new String("string")));

// object
assert.equal(typeof {}, _typeof({}));
assert.equal(typeof new Object({}), _typeof(new Object({})));
assert.equal(typeof Object.create({}), _typeof(Object.create({})));
//
assert.equal(typeof [], _typeof([]));
assert.equal(typeof new Array(), _typeof(new Array()));
//
assert.equal(typeof null, _typeof(null));
//
assert.equal(typeof undefined, _typeof(undefined));

//
assert.equal(
  typeof (() => {}),
  _typeof(() => {})
);
assert.equal(
  typeof function a() {},
  _typeof(function a() {})
);
assert.equal(typeof new Function(), _typeof(new Function()));

//
assert.equal(typeof Symbol, _typeof(Symbol));
assert.equal(typeof Symbol(), _typeof(Symbol()));

// // bigint
// assert.equal(typeof 123n, _typeof(123n));
// assert.equal(typeof new BigInt(123n), _typeof(new BigInt(123n)));

assert.equal(typeof new Set(), _typeof(new Set()));
assert.equal(typeof new Set([1, 2, 3, 4]), _typeof(new Set([1, 2, 3, 4])));

//
assert.equal(typeof new Map(), _typeof(new Map()));

//
class Point {}

let point = new Point();

assert.equal(typeof Point, _typeof(Point));
assert.equal(typeof point, _typeof(point));
```

ä¸€ä¸ªç®€å•çš„å®ç°ï¼Œ å¦‚æœ‰è€ƒè™‘ä¸å®Œå–„çš„åœ°æ–¹è¯·å¸®å¿™æŒ‡å‡ºè¿›è¡Œå®Œå–„[issues](https://github.com/freeshineit/freeshineit.github.io/issues)ï¼Œ è°¢è°¢ ğŸ™
