<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>å‰ç«¯é¢è¯•</title>
    <url>/2022/11/08/fe-interview/</url>
    <content><![CDATA[<h2 id="javascript"><a href="#javascript" class="headerlink" title="javascript"></a>javascript</h2><h3 id="this-çš„æŒ‡å‘ï¼ˆè°è°ƒç”¨æŒ‡å‘è°ï¼‰"><a href="#this-çš„æŒ‡å‘ï¼ˆè°è°ƒç”¨æŒ‡å‘è°ï¼‰" class="headerlink" title="this çš„æŒ‡å‘ï¼ˆè°è°ƒç”¨æŒ‡å‘è°ï¼‰"></a>this çš„æŒ‡å‘ï¼ˆè°è°ƒç”¨æŒ‡å‘è°ï¼‰</h3><h3 id="æ™®é€šå‡½æ•°å’Œç®­å¤´å‡½æ•°çš„åŒºåˆ«"><a href="#æ™®é€šå‡½æ•°å’Œç®­å¤´å‡½æ•°çš„åŒºåˆ«" class="headerlink" title="æ™®é€šå‡½æ•°å’Œç®­å¤´å‡½æ•°çš„åŒºåˆ«"></a>æ™®é€šå‡½æ•°å’Œç®­å¤´å‡½æ•°çš„åŒºåˆ«</h3><ul>
<li>è¯­æ³•æ›´åŠ ç®€æ´ã€æ¸…æ™°</li>
<li>ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„ <code>this</code></li>
<li>ç®­å¤´å‡½æ•°ç»§æ‰¿è€Œæ¥çš„ <code>this</code> æŒ‡å‘æ°¸è¿œä¸å˜</li>
<li><code>call</code>,<code>apply</code>,<code>bind</code>æ— æ³•æ”¹å˜ç®­å¤´å‡½æ•°ä¸­ <code>this</code> çš„æŒ‡å‘</li>
<li>ç®­å¤´å‡½æ•°ä¸èƒ½ä½œä¸ºæ„é€ å‡½æ•°ä½¿ç”¨ (ä¸ºä»€ä¹ˆ)</li>
<li>ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„ <code>arguments</code> (ä¸ºä»€ä¹ˆ)</li>
<li>ç®­å¤´å‡½æ•°æ²¡æœ‰åŸå‹ <code>prototype</code> (ä¸ºä»€ä¹ˆ)</li>
<li>ç®­å¤´å‡½æ•°ä¸èƒ½ç”¨ä½œ <code>Generator</code> å‡½æ•°ï¼Œä¸èƒ½ä½¿ç”¨ <code>yeild</code> å…³é”®å­— (ä¸ºä»€ä¹ˆ)</li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/Arrow_functions#%E8%A7%A3%E6%9E%90%E9%A1%BA%E5%BA%8F">è§£æé¡ºåº</a> è™½ç„¶ç®­å¤´å‡½æ•°ä¸­çš„ç®­å¤´ä¸æ˜¯è¿ç®—ç¬¦ï¼Œä½†ç®­å¤´å‡½æ•°å…·æœ‰ä¸å¸¸è§„å‡½æ•°ä¸åŒçš„ç‰¹æ®Šè¿ç®—ç¬¦ä¼˜å…ˆçº§è§£æè§„åˆ™ã€‚</li>
</ul>
<p><a href="https://juejin.cn/post/6844903805960585224">ES6 - ç®­å¤´å‡½æ•°ã€ç®­å¤´å‡½æ•°ä¸æ™®é€šå‡½æ•°çš„åŒºåˆ«</a><br><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/Arrow_functions">ç®­å¤´å‡½æ•°</a></p>
<h3 id="javascript-é—­åŒ…"><a href="#javascript-é—­åŒ…" class="headerlink" title="javascript é—­åŒ…"></a>javascript é—­åŒ…</h3><h3 id="javascript-çš„ä½œç”¨åŸŸ"><a href="#javascript-çš„ä½œç”¨åŸŸ" class="headerlink" title="javascript çš„ä½œç”¨åŸŸ"></a>javascript çš„ä½œç”¨åŸŸ</h3><h3 id="javascript-å˜é‡å‘ä¸Šæ‰¾å–çš„åŸç†-æ‰§è¡Œä¸Šä¸‹æ–‡"><a href="#javascript-å˜é‡å‘ä¸Šæ‰¾å–çš„åŸç†-æ‰§è¡Œä¸Šä¸‹æ–‡" class="headerlink" title="javascript å˜é‡å‘ä¸Šæ‰¾å–çš„åŸç†(æ‰§è¡Œä¸Šä¸‹æ–‡)"></a>javascript å˜é‡å‘ä¸Šæ‰¾å–çš„åŸç†(æ‰§è¡Œä¸Šä¸‹æ–‡)</h3><h3 id="javascript-çš„è¯­æ³•åˆ†æ"><a href="#javascript-çš„è¯­æ³•åˆ†æ" class="headerlink" title="javascript çš„è¯­æ³•åˆ†æ"></a>javascript çš„è¯­æ³•åˆ†æ</h3><h3 id="javascript-çš„è¯æ³•åˆ†æ"><a href="#javascript-çš„è¯æ³•åˆ†æ" class="headerlink" title="javascript çš„è¯æ³•åˆ†æ"></a>javascript çš„è¯æ³•åˆ†æ</h3><p><a href="https://juejin.cn/post/6943550570515038245">https://juejin.cn/post/6943550570515038245</a></p>
<h3 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h3><pre class="language-typescript" data-language="typescript"><code class="language-typescript">&#x2F;&#x2F; es5
function PersonFn () &#123;&#125;

function SupermanFn() &#123;&#125;

SupermanFn.prototype &#x3D; new PersonFn()


&#x2F;&#x2F; es6
class Person () &#123;&#125;

class Superman extends Person &#123;&#125;</code></pre>

<h3 id="æ´‹è‘±æ¨¡å‹"><a href="#æ´‹è‘±æ¨¡å‹" class="headerlink" title="æ´‹è‘±æ¨¡å‹"></a>æ´‹è‘±æ¨¡å‹</h3><pre class="language-typescript" data-language="typescript"><code class="language-typescript">&#x2F;&#x2F; ç±»ä¼¼é€’å½’
&#x2F;&#x2F; åœ¨ next ä¸­æ‰§è¡Œä¸‹ä¸€ä¸ªfunction, ä¾æ¬¡é€’å½’
&#x2F;&#x2F; å¦‚æœä¸å¥½ç†è§£å¯ä»¥å‚è€ƒ&#96;tapable&#96; ä¸­ä»£ç çš„å®ç°, &#96;tapable&#96;æ˜¯æŠŠæ‰€æœ‰å‡½æ•°é“ºå¹³ï¼Œä¾æ¬¡åµŒå¥—
&#x2F;&#x2F; è€Œä¸‹é¢çš„å®ç°æ˜¯å¯¹ä¾æ¬¡åµŒå¥—æ”¹æˆäº†é€’å½’åµŒå¥—
&#x2F;&#x2F; ä»¥ä¸Šæ˜¯ä¸ªäººç†è§£
function compose (middleware) &#123;
   return async function () &#123;
      let args &#x3D; arguments
      async function dispatch (i) &#123;
         const fn &#x3D; middleware[i]
         if (!fn) return null
         await fn(function next () &#123;
            dispatch(i + 1)
         &#125;, ...args)
      &#125;

      await dispatch(0)
   &#125;
&#125;

let middleware &#x3D; []
middleware.push((next) &#x3D;&gt; &#123;
	console.log(0)
	next()
	console.log(&quot;next:&quot;, 3.3)
&#125;)
middleware.push((next) &#x3D;&gt; &#123;
	console.log(1)
	next()
	console.log(&quot;next:&quot;, 1.1)
&#125;)
middleware.push(() &#x3D;&gt; &#123;
    console.log(2)
&#125;)

let fn &#x3D; compose(middleware)
fn() &#x2F;&#x2F; 0 1 2 next:1.1 next:3.3
</code></pre>

<h2 id="æµè§ˆå™¨"><a href="#æµè§ˆå™¨" class="headerlink" title="æµè§ˆå™¨"></a>æµè§ˆå™¨</h2><h3 id="æµè§ˆå™¨çš„è¿›ç¨‹ï¼ˆChromeï¼‰"><a href="#æµè§ˆå™¨çš„è¿›ç¨‹ï¼ˆChromeï¼‰" class="headerlink" title="æµè§ˆå™¨çš„è¿›ç¨‹ï¼ˆChromeï¼‰"></a>æµè§ˆå™¨çš„è¿›ç¨‹ï¼ˆChromeï¼‰</h3><ul>
<li>Browser Process æµè§ˆå™¨çš„ä¸»è¿›ç¨‹ï¼ˆè´Ÿè´£åè°ƒã€ä¸»æ§ï¼‰ ï¼ˆ1ï¼‰è´Ÿè´£åŒ…æ‹¬åœ°å€æ ï¼Œä¹¦ç­¾æ ï¼Œå‰è¿›åé€€æŒ‰é’®ç­‰éƒ¨åˆ†çš„å·¥ä½œ ï¼ˆ2ï¼‰è´Ÿè´£å¤„ç†æµè§ˆå™¨çš„ä¸€äº›ä¸å¯è§çš„åº•å±‚æ“ä½œï¼Œæ¯”å¦‚ç½‘ç»œè¯·æ±‚å’Œæ–‡ä»¶è®¿é—® ï¼ˆ3ï¼‰è´Ÿè´£å„ä¸ªé¡µé¢çš„ç®¡ç†ï¼Œåˆ›å»ºå’Œé”€æ¯å…¶ä»–è¿›ç¨‹</li>
<li>Utility Process</li>
<li>Render Process è´Ÿè´£ä¸€ä¸ª tab å†…å…³äºç½‘é¡µå‘ˆç°çš„æ‰€æœ‰äº‹æƒ…ï¼Œé¡µé¢æ¸²æŸ“ï¼Œè„šæœ¬æ‰§è¡Œï¼Œäº‹ä»¶å¤„ç†ç­‰</li>
<li>GPU Process è´Ÿè´£æ§åˆ¶ä¸€ä¸ªç½‘é¡µç”¨åˆ°çš„æ‰€æœ‰æ’ä»¶ï¼Œå¦‚ flash æ¯ç§ç±»å‹çš„æ’ä»¶å¯¹åº”ä¸€ä¸ªè¿›ç¨‹ï¼Œä»…å½“ä½¿ç”¨è¯¥æ’ä»¶æ—¶æ‰åˆ›å»º</li>
<li>Plugin Process è´Ÿè´£å¤„ç† GPU ç›¸å…³çš„ä»»åŠ¡</li>
</ul>
<p><a href="https://juejin.cn/post/6844903812642111501">æµè§ˆå™¨å¤šçº¿ç¨‹å’Œ js å•çº¿ç¨‹</a></p>
<h3 id="åœ¨æµè§ˆå™¨è¾“å…¥-URL-å›è½¦ä¹‹åå‘ç”Ÿäº†ä»€ä¹ˆ"><a href="#åœ¨æµè§ˆå™¨è¾“å…¥-URL-å›è½¦ä¹‹åå‘ç”Ÿäº†ä»€ä¹ˆ" class="headerlink" title="åœ¨æµè§ˆå™¨è¾“å…¥ URL å›è½¦ä¹‹åå‘ç”Ÿäº†ä»€ä¹ˆ"></a>åœ¨æµè§ˆå™¨è¾“å…¥ URL å›è½¦ä¹‹åå‘ç”Ÿäº†ä»€ä¹ˆ</h3><p><a href="https://zhuanlan.zhihu.com/p/80551769">åœ¨æµè§ˆå™¨è¾“å…¥ URL å›è½¦ä¹‹åå‘ç”Ÿäº†ä»€ä¹ˆ</a></p>
<h3 id="æµè§ˆå™¨-GC"><a href="#æµè§ˆå™¨-GC" class="headerlink" title="æµè§ˆå™¨ GC"></a>æµè§ˆå™¨ GC</h3><h2 id="node"><a href="#node" class="headerlink" title="node"></a>node</h2><h3 id="npm-æ‰§è¡Œå‘½ä»¤çš„æµç¨‹"><a href="#npm-æ‰§è¡Œå‘½ä»¤çš„æµç¨‹" class="headerlink" title="npm æ‰§è¡Œå‘½ä»¤çš„æµç¨‹"></a>npm æ‰§è¡Œå‘½ä»¤çš„æµç¨‹</h3><h3 id="eventloop"><a href="#eventloop" class="headerlink" title="eventloop"></a>eventloop</h3><h3 id="å‰ç«¯é¡µé¢ä¼˜åŒ–"><a href="#å‰ç«¯é¡µé¢ä¼˜åŒ–" class="headerlink" title="å‰ç«¯é¡µé¢ä¼˜åŒ–"></a>å‰ç«¯é¡µé¢ä¼˜åŒ–</h3><ul>
<li>å‹ç¼© js&#x2F;css&#x2F;html&#x2F;å›¾ç‰‡ï¼Œå‡å°‘è¯·æ±‚æµé‡</li>
<li>åˆå¹¶å°æ–‡ä»¶éƒ½ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œå‡å°‘è¯·æ±‚æ•°</li>
<li>é™æ€èµ„æºä½¿ç”¨ CDN</li>
<li>å›¾ç‰‡å°½é‡ä½¿ç”¨ webpç­‰å‹ç¼©æ•ˆæœæ¯”è¾ƒå¥½çš„å›¾ç‰‡æ ¼å¼ ï¼Œ å¯ä»¥ä½¿ç”¨pictureæ ‡ç­¾</li>
<li>æœåŠ¡ç«¯å¼€å¯ gzipç­‰å‹ç¼©</li>
<li>ä½¿ç”¨PWA</li>
<li>ä½¿ç”¨ç¼“å­˜</li>
<li>å›¾ç‰‡æ‡’åŠ è½½&#x2F;ä½¿ç”¨é›ªç¢§å›¾&#x2F;ä½¿ç”¨ svg</li>
<li>ä½¿ç”¨ js æ‡’åŠ è½½&#x2F;é¢„åŠ è½½</li>
<li>å‡å°‘ dom çš„å±‚çº§åµŒå¥—</li>
<li>é¿å… table å¸ƒå±€</li>
<li>css3 å¼€å¯ GPU åŠ é€Ÿ</li>
<li>é¿å…é‡å®šå‘</li>
<li>æ¥å£ä½¿ç”¨å¼‚æ­¥è¯·æ±‚</li>
<li>å°½é‡å‡å°‘è¯·æ±‚</li>
<li>å¦‚æœæœ‰å¿…è¦å¯ä»¥ä½¿ç”¨Workers</li>
<li>é¿å…&#x2F;å‡å°‘é‡æ’ä¸é‡ç»˜</li>
</ul>
<h2 id="ç½‘ç»œ"><a href="#ç½‘ç»œ" class="headerlink" title="ç½‘ç»œ"></a>ç½‘ç»œ</h2><h3 id="http1-å’Œ-http2-çš„åŒºåˆ«"><a href="#http1-å’Œ-http2-çš„åŒºåˆ«" class="headerlink" title="http1 å’Œ http2 çš„åŒºåˆ«"></a>http1 å’Œ http2 çš„åŒºåˆ«</h3><h3 id="ç½‘ç»œåˆ†å±‚"><a href="#ç½‘ç»œåˆ†å±‚" class="headerlink" title="ç½‘ç»œåˆ†å±‚"></a>ç½‘ç»œåˆ†å±‚</h3><h2 id="TypeScript"><a href="#TypeScript" class="headerlink" title="TypeScript"></a>TypeScript</h2><h3 id="TypeScript-çš„ç±»å‹"><a href="#TypeScript-çš„ç±»å‹" class="headerlink" title="TypeScript çš„ç±»å‹"></a>TypeScript çš„ç±»å‹</h3><p><code>any</code>,<code>string</code>,<code>number</code>,<code>boolean</code>,<code>Symbol</code>,<code>Array</code>,<code>null</code>,<code>unknow</code>,<code>never</code>,<code>void</code> â€¦</p>
<h3 id="TypeScript-ä¸­-anyã€neverã€unknownã€null-amp-undefined-å’Œ-void-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#TypeScript-ä¸­-anyã€neverã€unknownã€null-amp-undefined-å’Œ-void-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="TypeScript ä¸­ anyã€neverã€unknownã€null &amp; undefined å’Œ void æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>TypeScript ä¸­ anyã€neverã€unknownã€null &amp; undefined å’Œ void æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><pre class="language-none"><code class="language-none">any: åŠ¨æ€çš„å˜é‡ç±»å‹ï¼ˆå¤±å»äº†ç±»å‹æ£€æŸ¥çš„ä½œç”¨ï¼‰ã€‚
never: æ°¸ä¸å­˜åœ¨çš„å€¼çš„ç±»å‹ã€‚ä¾‹å¦‚ï¼šnever ç±»å‹æ˜¯é‚£äº›æ€»æ˜¯ä¼šæŠ›å‡ºå¼‚å¸¸æˆ–æ ¹æœ¬å°±ä¸ä¼šæœ‰è¿”å›å€¼çš„å‡½æ•°è¡¨è¾¾å¼æˆ–ç®­å¤´å‡½æ•°è¡¨è¾¾å¼çš„è¿”å›å€¼ç±»å‹ã€‚
unknown: ä»»ä½•ç±»å‹çš„å€¼éƒ½å¯ä»¥èµ‹ç»™ Â unknownÂ  ç±»å‹ï¼Œä½†æ˜¯ Â unknownÂ  ç±»å‹çš„å€¼åªèƒ½èµ‹ç»™ Â unknownÂ  æœ¬èº«å’Œ Â anyÂ  ç±»å‹ã€‚
null &amp; undefined: é»˜è®¤æƒ…å†µä¸‹ null å’Œ undefined æ˜¯æ‰€æœ‰ç±»å‹çš„å­ç±»å‹ã€‚ å°±æ˜¯è¯´ä½ å¯ä»¥æŠŠ Â null å’Œ undefined èµ‹å€¼ç»™ number ç±»å‹çš„å˜é‡ã€‚å½“ä½ æŒ‡å®šäº† --strictNullChecks æ ‡è®°ï¼Œnull å’Œ undefined åªèƒ½èµ‹å€¼ç»™ void å’Œå®ƒä»¬å„è‡ªã€‚
void: æ²¡æœ‰ä»»ä½•ç±»å‹ã€‚ä¾‹å¦‚ï¼šä¸€ä¸ªå‡½æ•°å¦‚æœæ²¡æœ‰è¿”å›å€¼ï¼Œé‚£ä¹ˆè¿”å›å€¼å¯ä»¥å®šä¹‰ä¸º voidã€‚

ä½œè€…ï¼šå‘¨å§æ—¥å¸¸äº‹
é“¾æ¥ï¼šhttps:&#x2F;&#x2F;juejin.cn&#x2F;post&#x2F;6999985372440559624
æ¥æºï¼šç¨€åœŸæ˜é‡‘</code></pre>

<h3 id="TypeScript-è”åˆç±»å‹"><a href="#TypeScript-è”åˆç±»å‹" class="headerlink" title="TypeScript è”åˆç±»å‹"></a>TypeScript è”åˆç±»å‹</h3><h3 id="TypeScript-ä¸­å¦‚ä½•è”åˆæšä¸¾ç±»å‹çš„-Key"><a href="#TypeScript-ä¸­å¦‚ä½•è”åˆæšä¸¾ç±»å‹çš„-Key" class="headerlink" title="TypeScript ä¸­å¦‚ä½•è”åˆæšä¸¾ç±»å‹çš„ Key?"></a>TypeScript ä¸­å¦‚ä½•è”åˆæšä¸¾ç±»å‹çš„ Key?</h3><pre class="language-typescript" data-language="typescript"><code class="language-typescript">enum str &#123;
  A,
  B,
  C
&#125;
type strUnion &#x3D; keyof typeof str; &#x2F;&#x2F; &#39;A&#39; | &#39;B&#39; | &#39;C&#39;</code></pre>

<h3 id="type-å’Œ-interface-çš„åŒºåˆ«"><a href="#type-å’Œ-interface-çš„åŒºåˆ«" class="headerlink" title="type å’Œ interface çš„åŒºåˆ«"></a>type å’Œ interface çš„åŒºåˆ«</h3><h3 id="åå˜ã€é€†å˜ã€åŒå˜å’ŒæŠ—å˜çš„ç†è§£ï¼Ÿ"><a href="#åå˜ã€é€†å˜ã€åŒå˜å’ŒæŠ—å˜çš„ç†è§£ï¼Ÿ" class="headerlink" title="åå˜ã€é€†å˜ã€åŒå˜å’ŒæŠ—å˜çš„ç†è§£ï¼Ÿ"></a>åå˜ã€é€†å˜ã€åŒå˜å’ŒæŠ—å˜çš„ç†è§£ï¼Ÿ</h3><pre class="language-typescript" data-language="typescript"><code class="language-typescript">åå˜ï¼šX &#x3D; Y Y ç±»å‹å¯ä»¥èµ‹å€¼ç»™ X ç±»å‹çš„æƒ…å†µå°±å«åšåå˜ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯ X ç±»å‹å…¼å®¹ Y ç±»å‹
interface X &#123; name: string; age: number; &#125;
interface Y &#123; name: string; age: number; hobbies: string[] &#125;
let x: X &#x3D; &#123; name: &#39;xiaoming&#39;, age: 16 &#125;
let y: Y &#x3D; &#123; name: &#39;xiaohong&#39;, age: 18, hobbies: [&#39;eat&#39;] &#125;
x &#x3D; y
å¤åˆ¶ä»£ç 
é€†å˜ï¼šprintY &#x3D; printX å‡½æ•°X ç±»å‹å¯ä»¥èµ‹å€¼ç»™å‡½æ•°Y ç±»å‹ï¼Œå› ä¸ºå‡½æ•°Y åœ¨è°ƒç”¨çš„æ—¶å€™å‚æ•°æ˜¯æŒ‰ç…§Yç±»å‹è¿›è¡Œçº¦æŸçš„ï¼Œä½†æ˜¯ç”¨åˆ°çš„æ˜¯å‡½æ•°Xçš„Xçš„å±æ€§å’Œæ–¹æ³•ï¼Œtsæ£€æŸ¥ç»“æœæ˜¯ç±»å‹å®‰å…¨çš„ã€‚è¿™ç§ç‰¹æ€§å°±å«åšé€†å˜ï¼Œå‡½æ•°çš„å‚æ•°æœ‰é€†å˜çš„æ€§è´¨ã€‚
let printY: (y: Y) &#x3D;&gt; void
printY &#x3D; (y) &#x3D;&gt; &#123; console.log(y.hobbies) &#125;
let printX: (x: X) &#x3D;&gt; void
printX &#x3D; (x) &#x3D;&gt; &#123; console.log(x.name) &#125;
printY &#x3D; printX
å¤åˆ¶ä»£ç 
åŒå˜ï¼ˆåŒå‘åå˜ï¼‰ï¼šX &#x3D; Yï¼›Y &#x3D; Xçˆ¶ç±»å‹å¯ä»¥èµ‹å€¼ç»™å­ç±»å‹ï¼Œå­ç±»å‹å¯ä»¥èµ‹å€¼ç»™çˆ¶ç±»å‹ï¼Œæ—¢é€†å˜åˆåå˜ï¼Œå«åšâ€œåŒå‘åå˜â€ï¼ˆts2.x ä¹‹å‰æ”¯æŒè¿™ç§èµ‹å€¼ï¼Œä¹‹å ts åŠ äº†ä¸€ä¸ªç¼–è¯‘é€‰é¡¹ strictFunctionTypesï¼Œè®¾ç½®ä¸º true å°±åªæ”¯æŒå‡½æ•°å‚æ•°çš„é€†å˜ï¼Œè®¾ç½®ä¸º false åˆ™æ”¯æŒåŒå‘åå˜ï¼‰
æŠ—å˜ï¼ˆä¸å˜ï¼‰ï¼šéçˆ¶å­ç±»å‹ä¹‹é—´ä¸ä¼šå‘ç”Ÿå‹å˜ï¼Œåªè¦ç±»å‹ä¸ä¸€æ ·å°±ä¼šæŠ¥é”™
</code></pre>

<h3 id="declareï¼Œdeclare-global-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#declareï¼Œdeclare-global-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="declareï¼Œdeclare global æ˜¯ä»€ä¹ˆï¼Ÿ"></a>declareï¼Œdeclare global æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>declare æ˜¯ç”¨æ¥å®šä¹‰å…¨å±€å˜é‡ã€å…¨å±€å‡½æ•°ã€å…¨å±€å‘½åç©ºé—´ã€js modulesã€class ç­‰<br>declare global ä¸ºå…¨å±€å¯¹è±¡ window å¢åŠ æ–°çš„å±æ€§</p>
<h3 id="TypeScript-ç±»ä¸­æˆå‘˜çš„-publicã€privateã€protectedã€readonly-ä¿®é¥°ç¬¦çš„ç†è§£"><a href="#TypeScript-ç±»ä¸­æˆå‘˜çš„-publicã€privateã€protectedã€readonly-ä¿®é¥°ç¬¦çš„ç†è§£" class="headerlink" title="TypeScript ç±»ä¸­æˆå‘˜çš„ publicã€privateã€protectedã€readonly ä¿®é¥°ç¬¦çš„ç†è§£"></a>TypeScript ç±»ä¸­æˆå‘˜çš„ publicã€privateã€protectedã€readonly ä¿®é¥°ç¬¦çš„ç†è§£</h3><p>public: æˆå‘˜éƒ½é»˜è®¤ä¸º publicï¼Œè¢«æ­¤é™å®šç¬¦ä¿®é¥°çš„æˆå‘˜æ˜¯å¯ä»¥è¢«å¤–éƒ¨è®¿é—®ï¼›<br>private: è¢«æ­¤é™å®šç¬¦ä¿®é¥°çš„æˆå‘˜æ˜¯åªå¯ä»¥è¢«ç±»çš„å†…éƒ¨è®¿é—®ï¼›<br>protected: è¢«æ­¤é™å®šç¬¦ä¿®é¥°çš„æˆå‘˜æ˜¯åªå¯ä»¥è¢«ç±»çš„å†…éƒ¨ä»¥åŠç±»çš„å­ç±»è®¿é—®;<br>readonly: å…³é”®å­—å°†å±æ€§è®¾ç½®ä¸ºåªè¯»çš„ã€‚ åªè¯»å±æ€§å¿…é¡»åœ¨å£°æ˜æ—¶æˆ–æ„é€ å‡½æ•°é‡Œè¢«åˆå§‹åŒ–ã€‚</p>
<h3 id="keyof-å’Œ-typeof-å…³é”®å­—çš„ä½œç”¨"><a href="#keyof-å’Œ-typeof-å…³é”®å­—çš„ä½œç”¨" class="headerlink" title="keyof å’Œ typeof å…³é”®å­—çš„ä½œç”¨"></a>keyof å’Œ typeof å…³é”®å­—çš„ä½œç”¨</h3><p>keyof ç´¢å¼•ç±»å‹æŸ¥è¯¢æ“ä½œç¬¦ è·å–ç´¢å¼•ç±»å‹çš„å±æ€§åï¼Œæ„æˆè”åˆç±»å‹ã€‚<br>typeof è·å–ä¸€ä¸ªå˜é‡æˆ–å¯¹è±¡çš„ç±»å‹ã€‚</p>
<h3 id="å·¥å…·ç±»å‹-Partialã€Requiredã€Readonlyã€Recordã€Extractã€ReturnTypeã€Excludeã€Omit-çš„ä½œç”¨"><a href="#å·¥å…·ç±»å‹-Partialã€Requiredã€Readonlyã€Recordã€Extractã€ReturnTypeã€Excludeã€Omit-çš„ä½œç”¨" class="headerlink" title="å·¥å…·ç±»å‹ Partialã€Requiredã€Readonlyã€Recordã€Extractã€ReturnTypeã€Excludeã€Omit çš„ä½œç”¨"></a>å·¥å…·ç±»å‹ Partialã€Requiredã€Readonlyã€Recordã€Extractã€ReturnTypeã€Excludeã€Omit çš„ä½œç”¨</h3><h3 id="å®ç°ä¸€ä¸ªé€’å½’çš„ç±»å‹"><a href="#å®ç°ä¸€ä¸ªé€’å½’çš„ç±»å‹" class="headerlink" title="å®ç°ä¸€ä¸ªé€’å½’çš„ç±»å‹"></a>å®ç°ä¸€ä¸ªé€’å½’çš„ç±»å‹</h3><h3 id="TypeScript-ä¸­-ã€-ã€-ã€-ã€-ã€-ç­‰ç¬¦å·çš„å«ä¹‰"><a href="#TypeScript-ä¸­-ã€-ã€-ã€-ã€-ã€-ç­‰ç¬¦å·çš„å«ä¹‰" class="headerlink" title="TypeScript ä¸­ ?.ã€??ã€!ã€!.ã€_ã€** ç­‰ç¬¦å·çš„å«ä¹‰"></a>TypeScript ä¸­ ?.ã€??ã€!ã€!.ã€_ã€** ç­‰ç¬¦å·çš„å«ä¹‰</h3><p>?. å¯é€‰é“¾ é‡åˆ° null å’Œ undefined å¯ä»¥ç«‹å³åœæ­¢è¡¨è¾¾å¼çš„è¿è¡Œã€‚<br>?? ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦ å½“å·¦ä¾§æ“ä½œæ•°ä¸º null æˆ– undefined æ—¶ï¼Œå…¶è¿”å›å³ä¾§çš„æ“ä½œæ•°ï¼Œå¦åˆ™è¿”å›å·¦ä¾§çš„æ“ä½œæ•°ã€‚<br>! éç©ºæ–­è¨€è¿ç®—ç¬¦ x! å°†ä» x å€¼åŸŸä¸­æ’é™¤ null å’Œ undefined<br>!. åœ¨å˜é‡ååæ·»åŠ ï¼Œå¯ä»¥æ–­è¨€æ’é™¤ undefined å’Œ null ç±»å‹<br>_ æ•°å­—åˆ†å‰²ç¬¦ åˆ†éš”ç¬¦ä¸ä¼šæ”¹å˜æ•°å€¼å­—é¢é‡çš„å€¼ï¼Œä½¿äººæ›´å®¹æ˜“è¯»æ‡‚æ•°å­— .e.g 1_101_324ã€‚<br>** æ±‚å¹‚</p>
<h2 id="React"><a href="#React" class="headerlink" title="React"></a>React</h2><h3 id="hooks"><a href="#hooks" class="headerlink" title="hooks"></a>hooks</h3><h3 id="react-diff"><a href="#react-diff" class="headerlink" title="react diff"></a>react diff</h3><h3 id="fiber"><a href="#fiber" class="headerlink" title="fiber"></a>fiber</h3><h2 id="ç®—æ³•æˆ–ä»£ç å®ç°"><a href="#ç®—æ³•æˆ–ä»£ç å®ç°" class="headerlink" title="ç®—æ³•æˆ–ä»£ç å®ç°"></a>ç®—æ³•æˆ–ä»£ç å®ç°</h2><h3 id="å¼‚æ­¥åŠ æ³•-å­—èŠ‚"><a href="#å¼‚æ­¥åŠ æ³•-å­—èŠ‚" class="headerlink" title="å¼‚æ­¥åŠ æ³•(å­—èŠ‚)"></a>å¼‚æ­¥åŠ æ³•(å­—èŠ‚)</h3><pre class="language-typescript" data-language="typescript"><code class="language-typescript">&#x2F;&#x2F; const addRemote &#x3D; async (a, b) &#x3D;&gt; new Promise(resolve &#x3D;&gt; &#123;
&#x2F;&#x2F;     setTimeout(() &#x3D;&gt; resolve(a + b), 1000)
&#x2F;&#x2F; &#125;)

&#x2F;&#x2F; const addRemote &#x3D; async (a, b) &#x3D;&gt; new Promise(resolve &#x3D;&gt;
&#x2F;&#x2F;     setTimeout ( () &#x3D;&gt; resolve(a + b), 1000)
&#x2F;&#x2F; 2):
&#x2F;&#x2F; async function add (...inputs) &#123;
&#x2F;&#x2F; &#125;
&#x2F;&#x2F; addmte
&#x2F;&#x2F; &#x2F;&#x2F; çš„åŠ æ³•ã€‚
&#x2F;&#x2F; async function add(..inputs) &#123;
&#x2F;&#x2F; 1ä½ çš„å®ç°
&#x2F;&#x2F; &#x2F;&#x2F; å·è¯·ç”¨ç¤ºä¾‹éªŒè¯è¿è¡Œç»“æœï¼š
&#x2F;&#x2F; add(1, 2). then(result &#x3D;&gt; &#123;
&#x2F;&#x2F; console.log(result): &#x2F;&#x2F; 3
&#x2F;&#x2F; add(1, 2, 3, 4) .then(result &#x3D;&gt; f
&#x2F;&#x2F; console.log(result): &#x2F;&#x2F; 10
&#x2F;&#x2F; add(1, 2, 1, 2, 1, 2. 3, 4). then(result &#x3D;&gt; f
&#x2F;&#x2F; console.log(result): &#x2F;&#x2F; 16
&#x2F;&#x2F; &#125;)</code></pre>

<h2 id="å®ç°-EventEmitter-æ¨¡å‹ï¼Œå®ç°-on-once-off-emit-æ–¹æ³•"><a href="#å®ç°-EventEmitter-æ¨¡å‹ï¼Œå®ç°-on-once-off-emit-æ–¹æ³•" class="headerlink" title="å®ç° EventEmitter æ¨¡å‹ï¼Œå®ç° on, once, off, emit æ–¹æ³•"></a>å®ç° EventEmitter æ¨¡å‹ï¼Œå®ç° <code>on</code>, <code>once</code>, <code>off</code>, <code>emit</code> æ–¹æ³•</h2><pre class="language-typescript" data-language="typescript"><code class="language-typescript">class EventEmitter &#123;
  _event: Record&lt;string, Array&lt;Function&gt;&gt;;
  constructor() &#123;
    this._event &#x3D; &#123;&#125;;
  &#125;

  on(type: string, callback: Function) &#123;
    if (this._event[type]) &#123;
      this._event[type].push(callback);
    &#125; else &#123;
      this._event[type] &#x3D; [callback];
    &#125;
    return this;
  &#125;

  once(type: string, callback: Function) &#123;
    let fn &#x3D; (...args: Array&lt;any&gt;) &#x3D;&gt; &#123;
      callback.apply(this, args);
      this.off(type, fn);
    &#125;;
    this.on(type, fn);
    return this;
  &#125;

  off(type: string, callback: Function) &#123;
    if (this._event[type]) &#123;
      this._event[type] &#x3D; this._event[type].filter(item &#x3D;&gt; item !&#x3D;&#x3D; callback);
    &#125;
    return this;
  &#125;

  emit(type: string) &#123;
    this._event[type].map(item &#x3D;&gt; item());
    return this;
  &#125;
&#125;

const eventEmitter &#x3D; new EventEmitter();

let handle1 &#x3D; () &#x3D;&gt; console.log(&quot;click1&quot;);
let handle2 &#x3D; () &#x3D;&gt; console.log(&quot;click2&quot;);
let handle3 &#x3D; () &#x3D;&gt; console.log(&quot;click3&quot;);
let handle4 &#x3D; () &#x3D;&gt; console.log(&quot;click4&quot;);

eventEmitter.on(&quot;click&quot;, handle1);
eventEmitter.on(&quot;click&quot;, handle2);
eventEmitter.once(&quot;click&quot;, handle3);
eventEmitter.emit(&quot;click&quot;);
eventEmitter.emit(&quot;click&quot;);</code></pre>

<h3 id="è§‚å¯Ÿè€…æ¨¡å¼ï¼Œè¯·å®ç°-observable-å’Œ-observe-ä¸¤ä¸ªå‡½æ•°"><a href="#è§‚å¯Ÿè€…æ¨¡å¼ï¼Œè¯·å®ç°-observable-å’Œ-observe-ä¸¤ä¸ªå‡½æ•°" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼ï¼Œè¯·å®ç° observable å’Œ observe ä¸¤ä¸ªå‡½æ•°"></a>è§‚å¯Ÿè€…æ¨¡å¼ï¼Œè¯·å®ç° observable å’Œ observe ä¸¤ä¸ªå‡½æ•°</h3><pre class="language-typescript" data-language="typescript"><code class="language-typescript"></code></pre>

<h3 id="å­—ç¬¦ä¸²éšè—éƒ¨åˆ†å†…å®¹-é˜¿é‡Œ"><a href="#å­—ç¬¦ä¸²éšè—éƒ¨åˆ†å†…å®¹-é˜¿é‡Œ" class="headerlink" title="å­—ç¬¦ä¸²éšè—éƒ¨åˆ†å†…å®¹ (é˜¿é‡Œ)"></a>å­—ç¬¦ä¸²éšè—éƒ¨åˆ†å†…å®¹ (é˜¿é‡Œ)</h3><p>å®ç°ä¸€ä¸ªæ–¹æ³•ï¼Œæ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²å’Œä¸€ä¸ªç¬¦å·ï¼Œå°†å­—ç¬¦ä¸²ä¸­é—´å››ä½æŒ‰æŒ‡å®šç¬¦å·éšè—</p>
<ol>
<li>ç¬¦å·æ— æŒ‡å®šæ—¶ä½¿ç”¨æ˜Ÿå·ï¼ˆ*ï¼‰</li>
<li>æ¥æ”¶çš„å­—ç¬¦ä¸²å°äºæˆ–ç­‰äºå››ä½æ—¶ï¼Œè¿”å›åŒæ ·é•¿åº¦çš„ç¬¦å·ä¸²ï¼Œç­‰åŒäºå…¨éšè—ï¼Œå¦‚ 123ï¼Œéšè—åæ˜¯***</li>
<li>å­—ç¬¦ä¸²é•¿åº¦æ˜¯å¤§äºå››ä½çš„å¥‡æ•°æ—¶ï¼Œå¦‚ 123456789ï¼Œéšè—åæ˜¯ 12789ï¼Œå¥‡æ•°å¤šå‡ºæ¥çš„ä¸€ä½åœ¨æœ«å°¾</li>
</ol>
<p>ç¤ºä¾‹ï¼š</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">mask(&quot;alibaba&quot;, &quot;#&quot;); &#x2F;&#x2F; a####ba
mask(&quot;85022088&quot;); &#x2F;&#x2F; 85****88
mask(&quot;hello&quot;); &#x2F;&#x2F; ****o
mask(&quot;abc&quot;, &quot;?&quot;); &#x2F;&#x2F; ???
mask(&quot;é˜¿é‡Œå·´å·´é›†å›¢&quot;, &quot;?&quot;); &#x2F;&#x2F; é˜¿????å›¢</code></pre>

<p>å®ç°</p>
<pre class="language-typescript" data-language="typescript"><code class="language-typescript">function mask(str, char &#x3D; &quot;*&quot;) &#123;
  if (str.length &lt;&#x3D; 4) return char.repeat(str.length);
  &#x2F;* ä»£ç å®ç° *&#x2F;
  let result &#x3D; &quot;&quot;;
  let i &#x3D; Math.floor(str.length &#x2F; 2) - 1;
  let j &#x3D; Math.floor(str.length &#x2F; 2);
  while (result.length !&#x3D;&#x3D; str.length) &#123;
    if (j - i &lt;&#x3D; 4) &#123;
      result &#x3D; char + result;
      result +&#x3D; char;
    &#125; else &#123;
      result &#x3D; (str[i] || &quot;&quot;) + result;
      result +&#x3D; str[j];
    &#125;
    i--;
    j++;
  &#125;
  return result;
&#125;</code></pre>

<p>å®ç°æ¥æºï¼š<a href="https://github.com/FrankKai/FrankKai.github.io/issues/245">https://github.com/FrankKai/FrankKai.github.io/issues/245</a></p>
<h3 id="HashMap"><a href="#HashMap" class="headerlink" title="HashMap"></a>HashMap</h3><pre class="language-typescript" data-language="typescript"><code class="language-typescript">function HashMap() &#123;
  this.map &#x3D; &#123;&#125;;
&#125;
HashMap.prototype &#x3D; &#123;
  get: function (key) &#123;
    console.log(this);
    if (this.map.hasOwnProperty(key)) &#123;
      return this.map[key];
    &#125;
    return null;
  &#125;,
  put: function (key, val) &#123;
    this.map[key] &#x3D; val;
  &#125;,
  remove: function (key) &#123;
    if (this.map.hasOwnProperty(key)) &#123;
      let tmp &#x3D; this.map[key];
      delete this.map[key];
      return tmp;
    &#125;
    return null;
  &#125;,
  clear: function () &#123;
    this.map &#x3D; &#123;&#125;;
  &#125;,
  keySet: function () &#123;
    let _keys &#x3D; [];
    for (const key in this.map) &#123;
      _keys.push(key);
    &#125;
    return _keys;
  &#125;
&#125;;
HashMap.prototype.constructor &#x3D; HashMap;
let hashMap &#x3D; new HashMap();</code></pre>

<h3 id="LRU"><a href="#LRU" class="headerlink" title="LRU"></a>LRU</h3><h3 id="DFS-æ·±åº¦ä¼˜å…ˆ"><a href="#DFS-æ·±åº¦ä¼˜å…ˆ" class="headerlink" title="DFS æ·±åº¦ä¼˜å…ˆ"></a>DFS æ·±åº¦ä¼˜å…ˆ</h3><h3 id="å¹¿åº¦ä¼˜å…ˆ"><a href="#å¹¿åº¦ä¼˜å…ˆ" class="headerlink" title="å¹¿åº¦ä¼˜å…ˆ"></a>å¹¿åº¦ä¼˜å…ˆ</h3>]]></content>
      <categories>
        <category>é¢è¯•</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>é¢è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title>Markdown</title>
    <url>/2023/02/27/markdown/</url>
    <content><![CDATA[<h2 id="æœ‰åºåˆ—è¡¨"><a href="#æœ‰åºåˆ—è¡¨" class="headerlink" title="æœ‰åºåˆ—è¡¨"></a>æœ‰åºåˆ—è¡¨</h2><p>ä½¿ç”¨æ•°å­—åŠ <code>.</code> åŠ ç©ºæ ¼å¼€å¤´</p>
<pre class="language-markdown" data-language="markdown"><code class="language-markdown">1. æœ‰åºåˆ—è¡¨ 1
2. æœ‰åºåˆ—è¡¨ 2
3. æœ‰åºåˆ—è¡¨ 3</code></pre>

<ol>
<li>æœ‰åºåˆ—è¡¨ 1</li>
<li>æœ‰åºåˆ—è¡¨ 2</li>
<li>æœ‰åºåˆ—è¡¨ 3</li>
</ol>
<h2 id="æ— åºåˆ—è¡¨"><a href="#æ— åºåˆ—è¡¨" class="headerlink" title="æ— åºåˆ—è¡¨"></a>æ— åºåˆ—è¡¨</h2><p>ä½¿ç”¨<code>-</code> åŠ ç©ºæ ¼å¼€å¤´</p>
<pre class="language-markdown" data-language="markdown"><code class="language-markdown">- æ— åºåˆ—è¡¨
- æ— åºåˆ—è¡¨
- æ— åºåˆ—è¡¨
  - æ— åºåˆ—è¡¨
  - æ— åºåˆ—è¡¨</code></pre>

<ul>
<li>æ— åºåˆ—è¡¨</li>
<li>æ— åºåˆ—è¡¨</li>
<li>æ— åºåˆ—è¡¨<ul>
<li>æ— åºåˆ—è¡¨</li>
<li>æ— åºåˆ—è¡¨</li>
</ul>
</li>
</ul>
<h2 id="æ ‡é¢˜"><a href="#æ ‡é¢˜" class="headerlink" title="æ ‡é¢˜"></a>æ ‡é¢˜</h2><p>ä½¿ç”¨<code>#</code>åŠ ç©ºæ ¼å¼€å¤´</p>
<h3 id="Heading-H3"><a href="#Heading-H3" class="headerlink" title="Heading H3"></a>Heading H3</h3><h4 id="Heading-H4"><a href="#Heading-H4" class="headerlink" title="Heading H4"></a>Heading H4</h4><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><p>ä½¿ç”¨<code>&gt;</code>å¼€å¤´</p>
<pre class="language-markdown" data-language="markdown"><code class="language-markdown">&gt; å¯¹äºç¾å¾·ï¼Œæˆ‘ä»¬ä»…æ­¢äºè®¤è¯†æ˜¯ä¸å¤Ÿçš„ï¼Œæˆ‘ä»¬è¿˜å¿…é¡»åŠªåŠ›åŸ¹å…»å®ƒï¼Œè¿ç”¨å®ƒï¼Œæˆ–æ˜¯é‡‡å–ç§ç§æ–¹æ³•ï¼Œä»¥ä½¿æˆ‘ä»¬æˆä¸ºè‰¯å–„ä¹‹äººã€‚ --èå£«æ¯”äºš

&gt; &gt; é»‘å¤œæ— è®ºæ€æ ·æ‚ é•¿ï¼Œç™½æ˜¼æ€»ä¼šåˆ°æ¥ã€‚

&gt; &gt; &gt; To be or not to be,that&#39;s a question. --èå£«æ¯”äºš</code></pre>

<blockquote>
<p>å¯¹äºç¾å¾·ï¼Œæˆ‘ä»¬ä»…æ­¢äºè®¤è¯†æ˜¯ä¸å¤Ÿçš„ï¼Œæˆ‘ä»¬è¿˜å¿…é¡»åŠªåŠ›åŸ¹å…»å®ƒï¼Œè¿ç”¨å®ƒï¼Œæˆ–æ˜¯é‡‡å–ç§ç§æ–¹æ³•ï¼Œä»¥ä½¿æˆ‘ä»¬æˆä¸ºè‰¯å–„ä¹‹äººã€‚ â€“èå£«æ¯”äºš</p>
</blockquote>
<blockquote>
<blockquote>
<p>é»‘å¤œæ— è®ºæ€æ ·æ‚ é•¿ï¼Œç™½æ˜¼æ€»ä¼šåˆ°æ¥ã€‚</p>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<blockquote>
<p>To be or not to be,thatâ€™s a question. â€“èå£«æ¯”äºš</p>
</blockquote>
</blockquote>
</blockquote>
<h2 id="ç²—ä½“"><a href="#ç²—ä½“" class="headerlink" title="ç²—ä½“"></a>ç²—ä½“</h2><p>ä½¿ç”¨<code>**</code>è¿›è¡ŒåŒ…æ‹¬</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">**ç²—ä½“**</code></pre>

<p><strong>ç²—ä½“</strong></p>
<h2 id="æ–œä½“"><a href="#æ–œä½“" class="headerlink" title="æ–œä½“"></a>æ–œä½“</h2><p>ä½¿ç”¨<code>*</code>æˆ–<code>_</code>è¿›è¡ŒåŒ…æ‹¬</p>
<pre class="language-markdown" data-language="markdown"><code class="language-markdown">_æ–œä½“_</code></pre>

<p><em>æ–œä½“</em></p>
<h2 id="æ–œä½“åŠ ç²—"><a href="#æ–œä½“åŠ ç²—" class="headerlink" title="æ–œä½“åŠ ç²—"></a>æ–œä½“åŠ ç²—</h2><p>ä½¿ç”¨<code>**</code>è¿›è¡ŒåŒ…æ‹¬</p>
<pre class="language-markdown" data-language="markdown"><code class="language-markdown">**_æ–œä½“_**</code></pre>

<p><strong><em>æ–œä½“</em></strong></p>
<h2 id="å›¾ç‰‡"><a href="#å›¾ç‰‡" class="headerlink" title="å›¾ç‰‡"></a>å›¾ç‰‡</h2><p><code>![img altçš„å€¼](å›¾ç‰‡åœ°å€)</code></p>
<pre class="language-markdown" data-language="markdown"><code class="language-markdown">![ShineShao](https:&#x2F;&#x2F;avatars2.githubusercontent.com&#x2F;u&#x2F;16034259?s&#x3D;460&amp;u&#x3D;7caff2589de5d263f44675662d8f1a5b91a1d706&amp;v&#x3D;4)</code></pre>

<p><img src="https://avatars2.githubusercontent.com/u/16034259?s=460&u=7caff2589de5d263f44675662d8f1a5b91a1d706&v=4" alt="ShineShao"></p>
<h2 id="é“¾æ¥"><a href="#é“¾æ¥" class="headerlink" title="é“¾æ¥"></a>é“¾æ¥</h2><p><code>[é“¾æ¥å](é“¾æ¥åœ°å€)</code></p>
<pre class="language-markdown" data-language="markdown"><code class="language-markdown">&#123;&#x2F;_ é“¾æ¥ _&#x2F;&#125;
[ShineShao](https:&#x2F;&#x2F;github.com&#x2F;freeshineit)

&#123;&#x2F;_ å›¾ç‰‡é“¾æ¥ _&#x2F;&#125;
[![ShineShao](https:&#x2F;&#x2F;avatars2.githubusercontent.com&#x2F;u&#x2F;16034259?s&#x3D;460&amp;u&#x3D;7caff2589de5d263f44675662d8f1a5b91a1d706&amp;v&#x3D;4)](https:&#x2F;&#x2F;github.com&#x2F;freeshineit)</code></pre>

<p><a href="https://github.com/freeshineit">ShineShao</a></p>
<p><a href="https://github.com/freeshineit"><img src="https://avatars2.githubusercontent.com/u/16034259?s=460&u=7caff2589de5d263f44675662d8f1a5b91a1d706&v=4" alt="ShineShao"></a></p>
<h2 id="åˆ†å‰²çº¿"><a href="#åˆ†å‰²çº¿" class="headerlink" title="åˆ†å‰²çº¿"></a>åˆ†å‰²çº¿</h2><p>ä½¿ç”¨è‡³å°‘è¿ç»­çš„ä¸‰ä¸ª<code>-</code></p>
<pre class="language-markdown" data-language="markdown"><code class="language-markdown">---</code></pre>

<hr>
<h2 id="åˆ é™¤çº¿"><a href="#åˆ é™¤çº¿" class="headerlink" title="åˆ é™¤çº¿"></a>åˆ é™¤çº¿</h2><p>ä½¿ç”¨<code>~~</code>è¿›è¡ŒåŒ…æ‹¬</p>
<pre class="language-markdown" data-language="markdown"><code class="language-markdown">~~åˆ†å‰²çº¿~~</code></pre>

<p><del>åˆ†å‰²çº¿</del></p>
<h2 id="è¡¨æ ¼"><a href="#è¡¨æ ¼" class="headerlink" title="è¡¨æ ¼"></a>è¡¨æ ¼</h2><pre class="language-markdown" data-language="markdown"><code class="language-markdown">| è¡¨å¤´     |   è¡¨å¤´   |     è¡¨å¤´ |
| :------- | :------: | -------: |
| å†…å®¹å±…å·¦ | å†…å®¹å±…ä¸­ | å†…å®¹å±…å³ |</code></pre>

<table>
<thead>
<tr>
<th align="left">è¡¨å¤´</th>
<th align="center">è¡¨å¤´</th>
<th align="right">è¡¨å¤´</th>
</tr>
</thead>
<tbody><tr>
<td align="left">å•å…ƒæ ¼</td>
<td align="center">å•å…ƒæ ¼</td>
<td align="right">å•å…ƒæ ¼å•å…ƒæ ¼å•å…ƒæ ¼å•å…ƒæ ¼</td>
</tr>
<tr>
<td align="left">å•å…ƒæ ¼</td>
<td align="center">å•å…ƒæ ¼å•å…ƒæ ¼å•å…ƒæ ¼å•å…ƒæ ¼</td>
<td align="right">å•å…ƒæ ¼</td>
</tr>
</tbody></table>
<h2 id="ä»£ç å—"><a href="#ä»£ç å—" class="headerlink" title="ä»£ç å—"></a>ä»£ç å—</h2><pre class="language-go" data-language="go"><code class="language-go">package main;

import &quot;fmt&quot;;

func main () &#123;
  fmt.Println(&quot;Hello World&quot;)
&#125;</code></pre>

<h2 id="diff"><a href="#diff" class="headerlink" title="diff"></a>diff</h2><pre class="language-diff" data-language="diff"><code class="language-diff">+ 123
- 123412</code></pre>

<h2 id="æ™®é€šæ–‡æœ¬"><a href="#æ™®é€šæ–‡æœ¬" class="headerlink" title="æ™®é€šæ–‡æœ¬"></a>æ™®é€šæ–‡æœ¬</h2><p>æ¯ä¸ªäººéƒ½ä¼šæœ‰ç¼ºé™·ï¼Œå°±åƒè¢«ä¸Šå¸å’¬è¿‡çš„è‹¹æœï¼Œæœ‰çš„äººç¼ºé™·æ¯”è¾ƒå¤§ï¼Œæ­£æ˜¯å› ä¸ºä¸Šå¸ç‰¹åˆ«å–œæ¬¢ä»–çš„èŠ¬èŠ³ã€‚</p>
<h2 id="checkbox"><a href="#checkbox" class="headerlink" title="checkbox"></a>checkbox</h2><pre class="language-markdown" data-language="markdown"><code class="language-markdown">- [ ] ä»»åŠ¡ä¸€ æœªåšä»»åŠ¡ &#96;- + ç©ºæ ¼ + [ ]&#96;
- [x] ä»»åŠ¡äºŒ å·²åšä»»åŠ¡ &#96;- + ç©ºæ ¼ + [x]&#96;</code></pre>

<ul>
<li><input disabled="" type="checkbox"> ä»»åŠ¡ä¸€ æœªåšä»»åŠ¡ <code>- + ç©ºæ ¼ + [ ]</code></li>
<li><input checked="" disabled="" type="checkbox"> ä»»åŠ¡äºŒ å·²åšä»»åŠ¡ <code>- + ç©ºæ ¼ + [x]</code></li>
</ul>
<h2 id="æ³¨é‡Š"><a href="#æ³¨é‡Š" class="headerlink" title="æ³¨é‡Š"></a>æ³¨é‡Š</h2><pre class="language-markdown" data-language="markdown"><code class="language-markdown">[&#x2F;&#x2F;]: # &quot;æ³¨é‡Š&quot;</code></pre>

<h2 id="ç‰¹æ®Šå­—ç¬¦"><a href="#ç‰¹æ®Šå­—ç¬¦" class="headerlink" title="ç‰¹æ®Šå­—ç¬¦"></a>ç‰¹æ®Šå­—ç¬¦</h2><pre class="language-markdown" data-language="markdown"><code class="language-markdown">&amp;nbsp; ç©ºæ ¼
&lt; &lt;
&gt; &gt;
&amp; &amp;
&amp;yen; Â¥
&amp;copy; Â©
&amp;reg; Â®
&amp;deg;C Â°C
&amp;plusmn; Â±
&amp;times; Ã—
&amp;divide; Ã·
m&amp;sup2; mÂ²
m&amp;sup3; mÂ³</code></pre>

<p>&amp;nbsp;<br>&lt;<br>&gt;<br>&amp;<br>&amp;yen;<br>&amp;copy;<br>&amp;reg;<br>&amp;deg;C<br>&amp;plusmn;<br>&amp;times;<br>&amp;divide;<br>m&amp;sup2;<br>m&amp;sup3;</p>
<h2 id="details"><a href="#details" class="headerlink" title="details"></a>details</h2><pre class="language-markdown" data-language="markdown"><code class="language-markdown">&lt;details&gt;
  &lt;summary&gt;å±•å¼€&lt;&#x2F;summary&gt;
  Something small enough to escape casual notice.
&lt;&#x2F;details&gt;</code></pre>

<details>
  <summary>å±•å¼€</summary>
  Something small enough to escape casual notice.
</details>

<h2 id="è¡¨æƒ…"><a href="#è¡¨æƒ…" class="headerlink" title="è¡¨æƒ…"></a>è¡¨æƒ…</h2><pre class="language-markdown" data-language="markdown"><code class="language-markdown">ğŸ¶ ğŸ‘
ğŸ˜ ğŸ”•</code></pre>

<p>ğŸ¶ ğŸ‘<br>ğŸ˜ ğŸ”•</p>
<h2 id="è„šæ³¨"><a href="#è„šæ³¨" class="headerlink" title="è„šæ³¨"></a>è„šæ³¨</h2><pre class="language-markdown" data-language="markdown"><code class="language-markdown">ä½¿ç”¨ &#96;Markdown&#96;[^1]å¯ä»¥æ•ˆç‡çš„ä¹¦å†™æ–‡æ¡£, ç›´æ¥è½¬æ¢æˆ &#96;HTML&#96;[^2], ä½ å¯ä»¥ä½¿ç”¨ &#96;Typora&#96;[^t] ç¼–è¾‘å™¨è¿›è¡Œä¹¦å†™ã€‚

[^1]: Markdown æ˜¯ä¸€ç§çº¯æ–‡æœ¬æ ‡è®°è¯­è¨€
[^2]: HyperText Markup Language è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€
[^t]: [NEW WAY TO READ &amp; WRITE MARKDOWN.](https:&#x2F;&#x2F;www.baidu.com)</code></pre>

<p>ä½¿ç”¨ <code>Markdown</code>[^1]å¯ä»¥æ•ˆç‡çš„ä¹¦å†™æ–‡æ¡£, ç›´æ¥è½¬æ¢æˆ <code>HTML</code>[^2], ä½ å¯ä»¥ä½¿ç”¨ <code>Typora</code>[^t] ç¼–è¾‘å™¨è¿›è¡Œä¹¦å†™ã€‚</p>
<p>[^1]: Markdown æ˜¯ä¸€ç§çº¯æ–‡æœ¬æ ‡è®°è¯­è¨€<br>[^2]: HyperText Markup Language è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€<br>[^t]: <a href="https://www.baidu.com/">NEW WAY TO READ &amp; WRITE MARKDOWN.</a></p>
<p><a href="LICENSE">MIT</a> Â© <a href="https://github.com/freeshineit">ShineShao</a></p>
]]></content>
      <categories>
        <category>Markdown</category>
      </categories>
      <tags>
        <tag>Markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>Sass è¯­æ³•</title>
    <url>/2022/10/08/css/scss/</url>
    <content><![CDATA[<h2 id="each-ä½¿ç”¨è¯´æ˜"><a href="#each-ä½¿ç”¨è¯´æ˜" class="headerlink" title="@each ä½¿ç”¨è¯´æ˜"></a><code>@each</code> ä½¿ç”¨è¯´æ˜</h2><p>The <a href="https://sass-lang.com/documentation/at-rules/control/each">@each</a> rule makes it easy to emit styles or evaluate code for each element of a list or each pair in a map. Itâ€™s great for repetitive styles that only have a few variations between them. Itâ€™s usually written</p>
<h2 id="code"><a href="#code" class="headerlink" title="code"></a>code</h2><pre class="language-scss" data-language="scss"><code class="language-scss">$sizes: 40px, 50px, 80px;
@each $size in $sizes &#123;
  .icon-#&#123;$size&#125; &#123;
    font-size: $size;
    height: $size;
    width: $size;
  &#125;
&#125;

# result .icon-40px &#123;
  font-size: 40px;
  height: 40px;
  width: 40px;
&#125;

.icon-50px &#123;
  font-size: 50px;
  height: 50px;
  width: 50px;
&#125;

.icon-80px &#123;
  font-size: 80px;
  height: 80px;
  width: 80px;
&#125;</code></pre>

<pre class="language-scss" data-language="scss"><code class="language-scss">&#x2F;&#x2F; æ•°ç»„
$countries: ((ad, 376), (ae, 971)), ((az, 994), (ba, 387));
$offset: -32px;

@each $arr in $countries &#123;
  &#x2F;&#x2F; get index (form 1)
  $i: index($countries, $arr); &#x2F;&#x2F; &#x3D;&gt; number | null

  @each $c in $arr &#123;
    $j: index($arr, $c);

    .flag.flag-#&#123;nth($c, 1)&#125; &#123;
      background-position: $offset * ($j - 1) $offset * ($i - 1);
    &#125;
  &#125;
&#125;

# result .flag.flag-ad &#123;
  background-position: 0px 0px;
&#125;
.flag.flag-ae &#123;
  background-position: -32px 0px;
&#125;
.flag.flag-az &#123;
  background-position: 0px -32px;
&#125;
.flag.flag-ba &#123;
  background-position: -32px -32px;
&#125;</code></pre>]]></content>
      <categories>
        <category>css</category>
      </categories>
      <tags>
        <tag>Sass</tag>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title>Git å¸¸ç”¨å‘½ä»¤</title>
    <url>/2023/02/18/git/antic/</url>
    <content><![CDATA[<h1 id="shell"><a href="#shell" class="headerlink" title="shell"></a>shell</h1><pre class="language-bash" data-language="bash"><code class="language-bash"># rebase
git rebase master

# è§£å†³å†²çªå
git add .

# continue
git rebase --continue</code></pre>

<pre class="language-bash" data-language="bash"><code class="language-bash"># discard ä¸¢å¼ƒç¼“å­˜
git reset HEAD

# ä¸¢å¼ƒæŒ‡å®šæ–‡ä»¶ç¼“å­˜
git reset HEAD &lt;file&gt;

# æ’¤é”€æœ€æ–°çš„commit
git reset HEAD^

# ä¿®æ”¹æœ€æ–°çš„ä¸€æ¬¡commit æ—¥å¿—
git commit --amend
## æˆ–è€…ä½¿ç”¨åˆ«å
git ca
</code></pre>

<h3 id="ä½¿ç”¨-æ‰§è¡Œå¤šæ¡å‘½ä»¤"><a href="#ä½¿ç”¨-æ‰§è¡Œå¤šæ¡å‘½ä»¤" class="headerlink" title="ä½¿ç”¨; æ‰§è¡Œå¤šæ¡å‘½ä»¤"></a>ä½¿ç”¨<code>;</code> æ‰§è¡Œå¤šæ¡å‘½ä»¤</h3><pre class="language-bash" data-language="bash"><code class="language-bash">git add .; git status</code></pre>

<h3 id="é…ç½®å‘½ä»¤åˆ«åï¼ˆAliasesï¼‰"><a href="#é…ç½®å‘½ä»¤åˆ«åï¼ˆAliasesï¼‰" class="headerlink" title="é…ç½®å‘½ä»¤åˆ«åï¼ˆAliasesï¼‰"></a>é…ç½®å‘½ä»¤åˆ«åï¼ˆ<a href="https://git-scm.com/book/zh-tw/v2/Git-%E5%9F%BA%E7%A4%8E-Git-Aliases">Aliases</a>ï¼‰</h3><p>git é»˜è®¤é…ç½®äº†éƒ¨åˆ†åˆ«åï¼Œå¯ä»¥ä½¿ç”¨<code>git config --list</code> æŸ¥çœ‹</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"># git commit -m
# git config --global alias.cm commit -m
git cm

# git log --stat --abbrev-commit
# git config --global alias.ll log --stat --abbrev-commit
git ll

# git diff
# git config --global alias.d diff
git d</code></pre>

<p>é…ç½®åˆ«åå‘½ä»¤</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"># é…ç½®åˆ«åå‘½ä»¤
git config --global alias.st status

# ä½¿ç”¨ git st ç›¸å½“äº git status
git st</code></pre>

<p>git log åˆ«åé…ç½®</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"># git l
git config --global alias.l &quot;log --graph --all --pretty&#x3D;format:&#39;%C(yellow)%h%C(cyan)%d%Creset %s %C(white)- %an, %ar%Creset&#39;&quot;

# git ll
git config --global alias.ll &quot;log --stat --abbrev-commit&quot;

# git lg
git config --global alias.lg &quot;log --color --graph --pretty&#x3D;format:&#39;%C(bold white)%h%Creset -%C(bold green)%d%Creset %s %C(bold green)(%cr)%Creset %C(bold blue)&lt;%an&gt;%Creset&#39; --abbrev-commit --date&#x3D;relative&quot;

# git llg
git config --global alias.llg &quot;log --color --graph --pretty&#x3D;format:&#39;%C(bold white)%H %d%Creset%n%s%n%+b%C(bold blue)%an &lt;%ae&gt;%Creset %C(bold green)%cr (%ci)&#39; --abbrev-commit&quot;</code></pre>
]]></content>
      <categories>
        <category>git</category>
      </categories>
      <tags>
        <tag>Git</tag>
        <tag>Tool</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸‹è½½githubä¸Šé¡¹ç›®æŒ‡å®šçš„æ–‡ä»¶å¤¹</title>
    <url>/2022/02/09/github/download/</url>
    <content><![CDATA[<h2 id="node-å®ç°ä¸‹è½½æŒ‡å®šæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹"><a href="#node-å®ç°ä¸‹è½½æŒ‡å®šæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹" class="headerlink" title="node å®ç°ä¸‹è½½æŒ‡å®šæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹"></a>node å®ç°ä¸‹è½½æŒ‡å®šæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹</h2><p><a href="https://github.com/qqxs/got-github-examples">got-github-examples</a></p>
<ol>
<li>åˆ›å»ºå­˜å‚¨çš„æ–‡ä»¶å¤¹</li>
</ol>
<pre class="language-typescript" data-language="typescript"><code class="language-typescript">import fs from &quot;fs&quot;;

export function makeDir(
  root: string,
  options &#x3D; &#123; recursive: true &#125;
): Promise&lt;string | undefined&gt; &#123;
  return fs.promises.mkdir(root, options);
&#125;</code></pre>

<ol start="2">
<li>ä¸‹è½½æŒ‡å®šçš„æ–‡ä»¶å¤¹æˆ–æ–‡ä»¶</li>
</ol>
<pre class="language-typescript" data-language="typescript"><code class="language-typescript">import got from &quot;got&quot;;
import tar from &quot;tar&quot;;
import path from &quot;path&quot;;
import &#123; Stream &#125; from &quot;stream&quot;;
import &#123; promisify &#125; from &quot;util&quot;;
import &#123; makeDir &#125; from &quot;.&#x2F;make-dir&quot;;

const pipeline &#x3D; promisify(Stream.pipeline);

&#x2F;&#x2F; tar extract å†…å®¹æ”¾ç½®çš„è·¯å¾„
const root &#x3D; path.resolve(&quot;data-fetch-app&quot;);

async function downloadExample() &#123;
  await makeDir(root);
  process.chdir(root);
  return pipeline(
    got.stream(
      &#x2F;&#x2F; &#96;https:&#x2F;&#x2F;codeload.github.com&#x2F;$&#123;user&#125;&#x2F;$&#123;repo&#125;&#x2F;tar.gz&#x2F;$&#123;branch&#125;&#96;
      &#x2F;&#x2F; example
      &#96;https:&#x2F;&#x2F;codeload.github.com&#x2F;qqxs&#x2F;got-github-examples&#x2F;tar.gz&#x2F;main&#96;
    ),
    tar.extract(
      &#123;
        cwd: root,
        strip: 3 &#x2F;&#x2F; å±‚çº§
      &#125;,
      &#x2F;&#x2F; [&#96;$&#123;repo&#125;-$&#123;branch&#125;&#x2F;$&#123;examplePath&#125;&#96;]
      &#x2F;&#x2F; example
      [&#96;got-github-examples-main&#x2F;examples&#x2F;example01&#96;]
    )
  );
&#125;

downloadExample();</code></pre>

<ol start="3">
<li>æ‰§è¡Œ</li>
</ol>
<pre class="language-bash" data-language="bash"><code class="language-bash">ts-node index.ts</code></pre>

<h2 id="curl-å®ç°ä¸‹è½½æŒ‡å®šæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹"><a href="#curl-å®ç°ä¸‹è½½æŒ‡å®šæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹" class="headerlink" title="curl å®ç°ä¸‹è½½æŒ‡å®šæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹"></a>curl å®ç°ä¸‹è½½æŒ‡å®šæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹</h2><pre class="language-bash" data-language="bash"><code class="language-bash"># mkdir my-app &amp;&amp; curl https:&#x2F;&#x2F;codeload.github.com&#x2F;[user]&#x2F;[repo]&#x2F;tar.gz&#x2F;[branch] | tar -xz -C my-app --strip&#x3D;2 [repo]-[branch]&#x2F;[examplePath]
# ä¸‹è½½githubä¸Š&#96;freeshineit&#x2F;next-examples&#96;çš„ mainåˆ†æ”¯ä¸‹ &#96;with-typescript-eslint-jest-app&#96; æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹
mkdir my-app &amp;&amp; curl https:&#x2F;&#x2F;codeload.github.com&#x2F;freeshineit&#x2F;next-examples&#x2F;tar.gz&#x2F;main | tar -xz -C my-app --strip&#x3D;2 next-examples-main&#x2F;with-typescript-eslint-jest-app</code></pre>
]]></content>
      <categories>
        <category>Github</category>
      </categories>
      <tags>
        <tag>Github</tag>
        <tag>got</tag>
      </tags>
  </entry>
  <entry>
    <title>Golang Sync</title>
    <url>/2023/02/18/golang/sync/</url>
    <content><![CDATA[<h2 id="golang-goroutine-åŒæ­¥æ“ä½œ"><a href="#golang-goroutine-åŒæ­¥æ“ä½œ" class="headerlink" title="golang goroutine åŒæ­¥æ“ä½œ"></a>golang goroutine åŒæ­¥æ“ä½œ</h2><h3 id="sync-WaitGroup"><a href="#sync-WaitGroup" class="headerlink" title="sync.WaitGroup"></a><a href="https://golang.org/pkg/sync/#WaitGroup">sync.WaitGroup</a></h3><pre class="language-go" data-language="go"><code class="language-go">package main

import (
	&quot;fmt&quot;
	&quot;sync&quot;
	&quot;time&quot;
)

func worker(i int, wg *sync.WaitGroup) &#123;
	fmt.Printf(&quot;sync worker %d starting\n&quot;, i)
	time.Sleep(time.Second)
	fmt.Printf(&quot;sync worker %d done\n&quot;, i)
	defer wg.Done()
&#125;

&#x2F;&#x2F; sync.WaitGroup
func SyncWaitGroup() &#123;
	var wg sync.WaitGroup
	fmt.Println(&quot;this is SyncWaitGroup func&quot;)
	for i :&#x3D; 1; i &lt;&#x3D; 10; i++ &#123;
		&#x2F;&#x2F; åˆ›å»º10ä¸ª goroutine
		wg.Add(1)
		go worker(i, &amp;wg)
	&#125;
	wg.Wait()
&#125;
</code></pre>

<h3 id="Channel"><a href="#Channel" class="headerlink" title="Channel"></a><a href="https://blog.golang.org/pipelines">Channel</a></h3><pre class="language-go" data-language="go"><code class="language-go">package main

import (
	&quot;fmt&quot;
	&quot;time&quot;
)

func chanWorker(i int, done chan int) &#123;
	fmt.Printf(&quot;chan worker %d starting\n&quot;, i)
	time.Sleep(time.Second)
	fmt.Printf(&quot;chan worker %d done\n&quot;, i)
	done &lt;- i
&#125;

&#x2F;&#x2F; chan
func Channel() &#123;
	c :&#x3D; make(chan int)
	fmt.Println(&quot;this is Channel func&quot;)
	for i :&#x3D; 1; i &lt;&#x3D; 10; i++ &#123;
		&#x2F;&#x2F; åˆ›å»º10ä¸ª goroutine
		go chanWorker(i, c)
	&#125;
	&lt;-c
&#125;
</code></pre>
]]></content>
      <categories>
        <category>Golang</category>
      </categories>
      <tags>
        <tag>Golang</tag>
        <tag>goroutine</tag>
        <tag>channel</tag>
      </tags>
  </entry>
  <entry>
    <title>Gulp æºç åˆ†æ</title>
    <url>/2022/11/28/gulp/source/</url>
    <content><![CDATA[<h2 id="Gulp"><a href="#Gulp" class="headerlink" title="Gulp"></a>Gulp</h2><pre class="language-javascript" data-language="javascript"><code class="language-javascript">&quot;use strict&quot;;

var util &#x3D; require(&quot;util&quot;);
&#x2F;&#x2F; https:&#x2F;&#x2F;www.npmjs.com&#x2F;package&#x2F;undertaker
&#x2F;&#x2F; undertakerç±»æä¾›äº†taskï¼Œseriesï¼Œparallelï¼Œgetï¼Œsetï¼Œtreeå’Œregistryæ–¹æ³•
&#x2F;&#x2F; undertakerç±»ç»§æ‰¿äºnodeæ ¸å¿ƒç±»eventemitter
var Undertaker &#x3D; require(&quot;undertaker&quot;);
&#x2F;&#x2F; https:&#x2F;&#x2F;www.npmjs.com&#x2F;package&#x2F;vinyl-fs
&#x2F;&#x2F; vinylæ˜¯vitual file formateè™šæ‹Ÿæ–‡ä»¶æ ¼å¼ï¼Œç”¨äºæè¿°ä¸€ä¸ªæ–‡ä»¶ã€‚
&#x2F;&#x2F; å®ƒæœ‰ä¸¤ä¸ªä¸»è¦çš„å±æ€§ï¼Œpathå±æ€§å’Œcontentså±æ€§ã€‚æ¯ä¸€ä¸ªVinylå®ä¾‹ä»£è¡¨ä¸€ä¸ªç‹¬ç«‹çš„æ–‡ä»¶ã€ç›®å½•æˆ–è€…symlinkç¬¦å·è¿æ¥ã€‚
var vfs &#x3D; require(&quot;vinyl-fs&quot;);
&#x2F;&#x2F; https:&#x2F;&#x2F;www.npmjs.com&#x2F;package&#x2F;glob-watcher
&#x2F;&#x2F; è§‚å¯Ÿglobså¹¶åœ¨æ›´æ”¹æ—¶æ‰§è¡Œä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä½¿ç”¨æ™ºèƒ½é»˜è®¤å€¼å–æ¶ˆç»‘å®šå’Œæ’é˜Ÿã€‚
var watch &#x3D; require(&quot;glob-watcher&quot;);

function Gulp() &#123;
  &#x2F;&#x2F; æ”¹å˜Undertakerçš„this æŒ‡å‘ï¼ŒæŒ‡å‘Gulp
  Undertaker.call(this);

  &#x2F;&#x2F; Bind the functions for destructuring
  this.watch &#x3D; this.watch.bind(this);
  &#x2F;&#x2F; ä»»åŠ¡ã€‚ ç”±undertakerç±»æä¾›
  this.task &#x3D; this.task.bind(this);
  &#x2F;&#x2F; ä»»åŠ¡é¡ºåºä¾æ¬¡æ‰§è¡Œã€‚ ç”±undertakerç±»æä¾›
  this.series &#x3D; this.series.bind(this);
  &#x2F;&#x2F; å°†ä»»åŠ¡åŠŸèƒ½æˆ–ç»„åˆæ“ä½œç»„åˆæˆå¹¶è¡Œæ‰§è¡Œçš„è¾ƒå¤§æ“ä½œã€‚ ç”±undertakerç±»æä¾›
  this.parallel &#x3D; this.parallel.bind(this);
  &#x2F;&#x2F; https:&#x2F;&#x2F;www.gulpjs.com.cn&#x2F;docs&#x2F;api&#x2F;registry&#x2F;
  &#x2F;&#x2F; å…è®¸å°†è‡ªå®šä¹‰çš„æ³¨å†Œè¡¨æ’å…¥åˆ°ä»»åŠ¡ç³»ç»Ÿä¸­ï¼Œä»¥æœŸæä¾›å…±äº«ä»»åŠ¡æˆ–å¢å¼ºåŠŸèƒ½ã€‚
  &#x2F;&#x2F; ç”±undertakerç±»æä¾›
  this.registry &#x3D; this.registry.bind(this);
  &#x2F;&#x2F; è·å–å½“å‰ä»»åŠ¡ä¾èµ–å…³ç³»æ ‘ã€‚ ç”±undertakerç±»æä¾›
  this.tree &#x3D; this.tree.bind(this);
  &#x2F;&#x2F; ç”±undertakerç±»æä¾›
  this.lastRun &#x3D; this.lastRun.bind(this);
  &#x2F;&#x2F; åˆ›å»ºä¸€ä¸ªæµï¼Œç”¨äºä»æ–‡ä»¶ç³»ç»Ÿè¯»å– Vinyl å¯¹è±¡ã€‚ç”± vinyl-fs æä¾›
  this.src &#x3D; this.src.bind(this);
  &#x2F;&#x2F; åˆ›å»ºä¸€ä¸ªç”¨äºå°† Vinyl å¯¹è±¡å†™å…¥åˆ°æ–‡ä»¶ç³»ç»Ÿçš„æµã€‚ç”± vinyl-fs æä¾›
  this.dest &#x3D; this.dest.bind(this);
  &#x2F;&#x2F; ç¬¦å·é“¾æ¥ã€‚ ç”± vinyl-fs æä¾›
  this.symlink &#x3D; this.symlink.bind(this);
&#125;

&#x2F;&#x2F; https:&#x2F;&#x2F;nodejs.org&#x2F;docs&#x2F;latest&#x2F;api&#x2F;util.html#utilinheritsconstructor-superconstructor
&#x2F;&#x2F; ç»§æ‰¿
&#x2F;&#x2F; å·²ç»ä¸å»ºè®®ä½¿ç”¨äº†ï¼Œ æœ€å¥½ä½¿ç”¨es6çš„ç»§æ‰¿æ–¹å¼  extends
util.inherits(Gulp, Undertaker);

&#x2F;&#x2F; https:&#x2F;&#x2F;www.npmjs.com&#x2F;package&#x2F;vinyl-fs#options
&#x2F;&#x2F; vfs.src(globs[, options])
Gulp.prototype.src &#x3D; vfs.src;
&#x2F;&#x2F; https:&#x2F;&#x2F;www.npmjs.com&#x2F;package&#x2F;vinyl-fs#destfolder-options
&#x2F;&#x2F; vfs.dest(folder[, options])
&#x2F;&#x2F; å°†æ–‡ä»¶å¤¹è·¯å¾„å­—ç¬¦ä¸²æˆ–å‡½æ•°ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå°†é€‰é¡¹å¯¹è±¡ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ã€‚
&#x2F;&#x2F; å¦‚æœç»™å®šä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå°†ä¸æ¯ä¸ªvinyl Fileå¯¹è±¡ä¸€èµ·è°ƒç”¨ï¼Œå¹¶ä¸”å¿…é¡»è¿”å›æ–‡ä»¶å¤¹è·¯å¾„ã€‚
&#x2F;&#x2F; è¿”å›ä¸€ä¸ªæµï¼Œè¯¥æµæ¥å—vinyl Fileå¯¹è±¡ï¼Œå°†å®ƒä»¬å†™å…¥æŒ‡å®šæ–‡ä»¶å¤¹&#x2F;cwdä¸­çš„ç£ç›˜ï¼Œå¹¶å°†å®ƒä»¬ä¼ é€’åˆ°ä¸‹æ¸¸ï¼Œè¿™æ ·æ‚¨å°±å¯ä»¥ç»§ç»­ä½¿ç”¨ç®¡é“ã€‚
&#x2F;&#x2F; ä¸€æ—¦æ–‡ä»¶å†™å…¥ç£ç›˜åï¼Œå°†å°è¯•ç¡®å®švinyl Fileå¯¹è±¡çš„&#96;stat.mode&#96;ã€&#96;stat.mtime&#96;å’Œ&#96;stat.atime&#96;æ˜¯å¦ä¸æ–‡ä»¶ç³»ç»Ÿä¸Šçš„æ–‡ä»¶ä¸åŒã€‚
&#x2F;&#x2F; å¦‚æœå®ƒä»¬ä¸åŒï¼Œå¹¶ä¸”æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹æ‹¥æœ‰è¯¥æ–‡ä»¶ï¼Œåˆ™ä¼šæ›´æ–°ç›¸åº”çš„æ–‡ä»¶ç³»ç»Ÿå…ƒæ•°æ®ã€‚
&#x2F;&#x2F; å¦‚æœå®ƒä»¬æ²¡æœ‰å·®å¼‚æˆ–è¿›ç¨‹ä¸æ‹¥æœ‰æ–‡ä»¶ï¼Œåˆ™ä¼šè‡ªåŠ¨è·³è¿‡å°è¯•ã€‚
&#x2F;&#x2F; å¦‚æœæ–‡ä»¶å…·æœ‰æŒ‡å®šç›®æ ‡è·¯å¾„çš„&#96;symlink&#96;å±æ€§ï¼Œåˆ™å°†åˆ›å»º&#96;symlink&#96;ã€‚
Gulp.prototype.dest &#x3D; vfs.dest;

&#x2F;&#x2F; https:&#x2F;&#x2F;www.npmjs.com&#x2F;package&#x2F;vinyl-fs#symlinkfolder-options
&#x2F;&#x2F; vfs.symlink(folder[, options])
&#x2F;&#x2F; å°†æ–‡ä»¶å¤¹è·¯å¾„å­—ç¬¦ä¸²æˆ–å‡½æ•°ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå°†é€‰é¡¹å¯¹è±¡ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ã€‚
&#x2F;&#x2F; å¦‚æœç»™å®šä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå°†ä¸æ¯ä¸ªvinyl Fileå¯¹è±¡ä¸€èµ·è°ƒç”¨ï¼Œå¹¶ä¸”å¿…é¡»è¿”å›æ–‡ä»¶å¤¹è·¯å¾„ã€‚
&#x2F;&#x2F; è¿”å›ä¸€ä¸ªæµï¼Œè¯¥æµæ¥å—vinyl Fileå¯¹è±¡ï¼Œåœ¨æŒ‡å®šçš„æ–‡ä»¶å¤¹&#x2F;cwdå¤„åˆ›å»ºä¸€ä¸ª&#96;symlink&#96;ï¼Œå¹¶å°†å…¶ä¼ é€’åˆ°ä¸‹æ¸¸ï¼Œè¿™æ ·æ‚¨å°±å¯ä»¥ç»§ç»­ä½¿ç”¨ç®¡é“ä¼ é€’è¿™äº›å¯¹è±¡ã€‚
Gulp.prototype.symlink &#x3D; vfs.symlink;
&#x2F;&#x2F; åœ¨ &#96;glob-watcher&#96; å‰åšæ ¡éªŒå’Œå…¼å®¹
&#x2F;&#x2F;
Gulp.prototype.watch &#x3D; function (glob, opt, task) &#123;
  if (
    typeof opt &#x3D;&#x3D;&#x3D; &quot;string&quot; ||
    typeof task &#x3D;&#x3D;&#x3D; &quot;string&quot; ||
    Array.isArray(opt) ||
    Array.isArray(task)
  ) &#123;
    throw new Error(
      &quot;watching &quot; +
        glob +
        &quot;: watch task has to be &quot; +
        &quot;a function (optionally generated by using gulp.parallel &quot; +
        &quot;or gulp.series)&quot;
    );
  &#125;

  if (typeof opt &#x3D;&#x3D;&#x3D; &quot;function&quot;) &#123;
    task &#x3D; opt;
    opt &#x3D; &#123;&#125;;
  &#125;

  opt &#x3D; opt || &#123;&#125;;

  var fn;
  if (typeof task &#x3D;&#x3D;&#x3D; &quot;function&quot;) &#123;
    fn &#x3D; this.parallel(task);
  &#125;

  &#x2F;&#x2F; watch() æ–¹æ³•æ—¶é€šè¿‡ &#96;events&#96; å‚æ•°è¿›è¡ŒæŒ‡å®šã€‚
  &#x2F;&#x2F; å¯ç”¨çš„äº‹ä»¶æœ‰ &#39;add&#39;ã€&#39;addDir&#39;ã€&#39;change&#39;ã€&#39;unlink&#39;ã€&#39;unlinkDir&#39;ã€&#39;ready&#39;ã€&#39;error&#39;ã€‚
  &#x2F;&#x2F; æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ª &#39;all&#39; äº‹ä»¶ï¼Œå®ƒè¡¨ç¤ºé™¤ &#39;ready&#39; å’Œ &#39;error&#39; ä¹‹å¤–çš„æ‰€æœ‰äº‹ä»¶ã€‚
  return watch(glob, opt, fn);
&#125;;

&#x2F;&#x2F; Let people use this class from our instance
Gulp.prototype.Gulp &#x3D; Gulp;
&#x2F;&#x2F; Gulp å®ä¾‹
var inst &#x3D; new Gulp();
module.exports &#x3D; inst;</code></pre>
]]></content>
      <categories>
        <category>Gulp</category>
      </categories>
      <tags>
        <tag>Tool</tag>
        <tag>Gulp</tag>
      </tags>
  </entry>
  <entry>
    <title>javascript apply,callå’Œbind</title>
    <url>/2022/10/26/js/apply_call_bind/</url>
    <content><![CDATA[<h2 id="apply-åŸç†"><a href="#apply-åŸç†" class="headerlink" title="apply åŸç†"></a>apply åŸç†</h2><p><a href="">apply</a> xxxx</p>
<h2 id="apply-å®ç°"><a href="#apply-å®ç°" class="headerlink" title="apply å®ç°"></a>apply å®ç°</h2><pre class="language-typescript" data-language="typescript"><code class="language-typescript">&#x2F;**
 *
 *&#x2F;
function _apply(_this: any, args: any[]) &#123;&#125;

(function () &#123;
  &#x2F;&#x2F; npx ts-node app&#x2F;typeof.ts
  &#x2F;&#x2F; å¦‚æœæœ‰é”™ ä¼šæœ‰æ‰“å°
  const assert &#x3D; require(&quot;assert&quot;);
&#125;)();</code></pre>

<h2 id="call-åŸç†"><a href="#call-åŸç†" class="headerlink" title="call åŸç†"></a>call åŸç†</h2><p><a href="">call</a> xxxx</p>
<h2 id="call-å®ç°"><a href="#call-å®ç°" class="headerlink" title="call å®ç°"></a>call å®ç°</h2><pre class="language-typescript" data-language="typescript"><code class="language-typescript">&#x2F;**
 *
 *&#x2F;
function _call(_this: any, ...args: any[]) &#123;&#125;

(function () &#123;
  &#x2F;&#x2F; npx ts-node app&#x2F;typeof.ts
  &#x2F;&#x2F; å¦‚æœæœ‰é”™ ä¼šæœ‰æ‰“å°
  const assert &#x3D; require(&quot;assert&quot;);
&#125;)();</code></pre>

<h2 id="bind-åŸç†"><a href="#bind-åŸç†" class="headerlink" title="bind åŸç†"></a>bind åŸç†</h2><p><a href="">bind</a> xxxx</p>
<h2 id="bind-å®ç°"><a href="#bind-å®ç°" class="headerlink" title="bind å®ç°"></a>bind å®ç°</h2><pre class="language-typescript" data-language="typescript"><code class="language-typescript">&#x2F;**
 *
 *&#x2F;
function _bind(_this: any, ...args: any[]) &#123;&#125;

(function () &#123;
  &#x2F;&#x2F; npx ts-node app&#x2F;typeof.ts
  &#x2F;&#x2F; å¦‚æœæœ‰é”™ ä¼šæœ‰æ‰“å°
  const assert &#x3D; require(&quot;assert&quot;);
&#125;)();</code></pre>

<h2 id="apply-call-å’Œ-bind-å…±åŒç‚¹"><a href="#apply-call-å’Œ-bind-å…±åŒç‚¹" class="headerlink" title="apply, call å’Œ bind å…±åŒç‚¹"></a>apply, call å’Œ bind å…±åŒç‚¹</h2><h2 id="apply-call-å’Œ-bind-ä¸åŒç‚¹"><a href="#apply-call-å’Œ-bind-ä¸åŒç‚¹" class="headerlink" title="apply, call å’Œ bind ä¸åŒç‚¹"></a>apply, call å’Œ bind ä¸åŒç‚¹</h2>]]></content>
      <categories>
        <category>Javascript</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
      </tags>
  </entry>
  <entry>
    <title>javascript instanceof åŸç†</title>
    <url>/2022/10/26/js/instanceof/</url>
    <content><![CDATA[<h2 id="instanceof-åŸç†"><a href="#instanceof-åŸç†" class="headerlink" title="instanceof åŸç†"></a>instanceof åŸç†</h2><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/instanceof">instanceof</a> è¿ç®—ç¬¦ç”¨äºæ£€æµ‹æ„é€ å‡½æ•°çš„ prototype å±æ€§æ˜¯å¦å‡ºç°åœ¨æŸä¸ªå®ä¾‹å¯¹è±¡çš„åŸå‹é“¾ä¸Šã€‚</p>
<h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><pre class="language-typescript" data-language="typescript"><code class="language-typescript">&#x2F;**
 *
 * ç®€å•æ¨¡æ‹Ÿ instanceofçš„å®ç°
 *
 * https:&#x2F;&#x2F;developer.mozilla.org&#x2F;zh-CN&#x2F;docs&#x2F;Web&#x2F;JavaScript&#x2F;Reference&#x2F;Operators&#x2F;instanceof
 *
 * instanceof è¿ç®—ç¬¦ç”¨äºæ£€æµ‹æ„é€ å‡½æ•°çš„ prototype å±æ€§æ˜¯å¦å‡ºç°åœ¨æŸä¸ªå®ä¾‹å¯¹è±¡çš„åŸå‹é“¾ä¸Šã€‚
 *
 * éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœè¡¨è¾¾å¼ obj instanceof Foo è¿”å› trueï¼Œåˆ™å¹¶ä¸æ„å‘³ç€è¯¥è¡¨è¾¾å¼ä¼šæ°¸è¿œè¿”å› trueï¼Œ
 * å› ä¸º Foo.prototype å±æ€§çš„å€¼æœ‰å¯èƒ½ä¼šæ”¹å˜ï¼Œæ”¹å˜ä¹‹åçš„å€¼å¾ˆæœ‰å¯èƒ½ä¸å­˜åœ¨äº obj çš„åŸå‹é“¾ä¸Šï¼Œ
 * è¿™æ—¶åŸè¡¨è¾¾å¼çš„å€¼å°±ä¼šæˆä¸º falseã€‚å¦å¤–ä¸€ç§æƒ…å†µä¸‹ï¼ŒåŸè¡¨è¾¾å¼çš„å€¼ä¹Ÿä¼šæ”¹å˜ï¼Œå°±æ˜¯æ”¹å˜å¯¹è±¡ obj çš„åŸå‹é“¾çš„æƒ…å†µï¼Œè™½ç„¶åœ¨ç›®å‰çš„ ES è§„èŒƒä¸­ï¼Œ
 * æˆ‘ä»¬åªèƒ½è¯»å–å¯¹è±¡çš„åŸå‹è€Œä¸èƒ½æ”¹å˜å®ƒï¼Œä½†å€ŸåŠ©äºéæ ‡å‡†çš„ __proto__ ä¼ªå±æ€§ï¼Œæ˜¯å¯ä»¥å®ç°çš„ã€‚
 * æ¯”å¦‚æ‰§è¡Œ obj.__proto__ &#x3D; &#123;&#125; ä¹‹åï¼Œobj instanceof Foo å°±ä¼šè¿”å› false äº†ã€‚
 *
 *
 * @param instance å®ä¾‹å¯¹è±¡
 * @param Func æ„é€ å‡½æ•°
 * @returns boolean
 *&#x2F;
function _instanceof(instance: any, Func: any) &#123;
  let instance_proto &#x3D; instance.__proto__;
  let FuncProto &#x3D; Func.prototype;

  while (true) &#123;
    if (instance_proto &#x3D;&#x3D;&#x3D; null) &#123;
      return false;
    &#125;
    if (instance_proto &#x3D;&#x3D;&#x3D; FuncProto) &#123;
      return true;
    &#125;

    instance_proto &#x3D; instance_proto.__proto__;
  &#125;
&#125;

(function () &#123;
  &#x2F;&#x2F; npx ts-node app&#x2F;typeof.ts
  &#x2F;&#x2F; å¦‚æœæœ‰é”™ ä¼šæœ‰æ‰“å°
  const assert &#x3D; require(&quot;assert&quot;);

  &#x2F;&#x2F; å®šä¹‰æ„é€ å‡½æ•°
  function C() &#123;&#125;
  function D() &#123;&#125;

  let o &#x3D; new (C as any)();

  assert.equal(o instanceof C, _instanceof(o, C));
  assert.equal(o instanceof Object, _instanceof(o, Object));
  assert.equal(C.prototype instanceof Object, _instanceof(C.prototype, Object));

  &#x2F;&#x2F;
  C.prototype &#x3D; &#123;&#125;;
  let o2 &#x3D; new (C as any)();
  assert.equal(o instanceof C, _instanceof(o2, C));

  &#x2F;&#x2F;  falseï¼ŒC.prototype æŒ‡å‘äº†ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œè¿™ä¸ªç©ºå¯¹è±¡ä¸åœ¨ o çš„åŸå‹é“¾ä¸Šã€‚
  assert.equal(false, _instanceof(o, C));

  D.prototype &#x3D; new (C as any)(); &#x2F;&#x2F; ç»§æ‰¿

  let o3 &#x3D; new (D as any)();

  assert.equal(o3 instanceof D, _instanceof(o3, D));

  &#x2F;&#x2F; true å› ä¸º C.prototype ç°åœ¨åœ¨ o3 çš„åŸå‹é“¾ä¸Š
  assert.equal(o3 instanceof C, _instanceof(o3, C));
&#125;)();</code></pre>]]></content>
      <categories>
        <category>Javascript</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
      </tags>
  </entry>
  <entry>
    <title>javascript typeof åŸç†</title>
    <url>/2022/10/25/js/typeof/</url>
    <content><![CDATA[<h2 id="typeof-åŸç†"><a href="#typeof-åŸç†" class="headerlink" title="typeof åŸç†"></a>typeof åŸç†</h2><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/typeof">typeof</a> è¿ç®—ç¬¦è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºæ“ä½œæ•°çš„ç±»å‹ã€‚</p>
<p>javascript åœ¨åº•å±‚å­˜å‚¨å˜é‡çš„æ—¶å€™,ä¼šåœ¨å˜é‡çš„æœºå™¨ç çš„ä½ä½(å‰ä¸‰ä½) 1-3 ä½å­˜å‚¨å…¶ç±»å‹ä¿¡æ¯: å¯¹è±¡:000 (null æ˜¯ 000ï¼Œ è¿™ä¹Ÿæ˜¯ null çš„ typeof å€¼ä¸ºä»€ä¹ˆæ˜¯ object çš„åŸå› ) æµ®ç‚¹æ•°:010 å­—ç¬¦ä¸²:100 å¸ƒå°”:110 â€ã€‚<br><code>typeof</code>ç›´æ¥æ ¹æ®å˜é‡å€¼å¾—å†…å­˜æ ‡è¯†ç¬¦è¿›è¡Œåˆ¤æ–­å¹¶è¿”å›çš„æ˜¯å¯¹åº”å­—ç¬¦ä¸²å½¢å¼çš„å€¼ã€‚</p>
<h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><pre class="language-typescript" data-language="typescript"><code class="language-typescript">&#x2F;**
 * æ¨¡æ‹Ÿ typeof
 *
 * typeofåŸç†ï¼š
 * js åœ¨åº•å±‚å­˜å‚¨å˜é‡çš„æ—¶å€™,ä¼šåœ¨å˜é‡çš„æœºå™¨ç çš„ä½ä½1-3ä½å­˜å‚¨å…¶ç±»å‹ä¿¡æ¯: å¯¹è±¡:000 (null æ˜¯ 000ï¼Œ è¿™ä¹Ÿæ˜¯ null çš„typeof å€¼ä¸ºä»€ä¹ˆæ˜¯objectçš„åŸå› ) æµ®ç‚¹æ•°:010 å­—ç¬¦ä¸²:100 å¸ƒå°”:110 â€ã€‚
 * typeofç›´æ¥æ ¹æ®å˜é‡å€¼å¾—å†…å­˜æ ‡è¯†ç¬¦è¿›è¡Œåˆ¤æ–­å¹¶è¿”å›çš„æ˜¯å¯¹åº”å­—ç¬¦ä¸²å½¢å¼çš„å€¼ã€‚
 *
 * å®ç°ï¼š
 * 1. åˆ›å»ºä¸€ä¸ªæšä¸¾å¯¹è±¡
 * 2. åˆ©ç”¨ Object.prototype.toString.call æ¥è·å–ç±»å‹
 * 3. å†å¯¹ Number, String, Boolean å¯¹è±¡è¿›è¡Œç‰¹æ®Šå¤„ç†
 *
 * @param target any
 * @returns string
 *&#x2F;
function _typeof(target: any) &#123;
  const EnumMap &#x3D; &#123;
    [&quot;[object Number]&quot;]: &quot;number&quot;,
    [&quot;[object String]&quot;]: &quot;string&quot;,
    [&quot;[object Object]&quot;]: &quot;object&quot;,
    [&quot;[object Array]&quot;]: &quot;object&quot;,
    [&quot;[object Null]&quot;]: &quot;object&quot;,
    [&quot;[object Boolean]&quot;]: &quot;boolean&quot;,
    [&quot;[object Function]&quot;]: &quot;function&quot;,
    [&quot;[object Undefined]&quot;]: &quot;undefined&quot;,
    [&quot;[object Symbol]&quot;]: &quot;symbol&quot;,
    [&quot;[object BigInt]&quot;]: &quot;bigint&quot;,
    [&quot;[object Set]&quot;]: &quot;object&quot;,
    [&quot;[object Map]&quot;]: &quot;object&quot;
  &#125;;

  const key: keyof typeof EnumMap &#x3D; Object.prototype.toString.call(target);

  &#x2F;&#x2F;  è¿™ä¸ªå‡ ä¸ªç‰¹æ®Šå¤„ç†ä¸€ä¸‹
  if (
    [&quot;[object Number]&quot;, &quot;[object String]&quot;, &quot;[object Boolean]&quot;].includes(key) &amp;&amp;
    target instanceof Object
  ) &#123;
    return &quot;object&quot;;
  &#125;
  return EnumMap[key];
&#125;

&#x2F;&#x2F; npx ts-node app&#x2F;typeof.ts
&#x2F;&#x2F; å¦‚æœæœ‰é”™ ä¼šæœ‰æ‰“å°
const assert &#x3D; require(&quot;assert&quot;);
&#x2F;&#x2F; test
assert.equal(typeof 12312, _typeof(12312));
assert.equal(typeof new Number(12312), _typeof(new Number(12312)));
&#x2F;&#x2F;
assert.equal(typeof true, _typeof(true));
assert.equal(typeof false, _typeof(false));
assert.equal(typeof new Boolean(true), _typeof(new Boolean(true)));
assert.equal(typeof new Boolean(false), _typeof(new Boolean(false)));
&#x2F;&#x2F;
assert.equal(typeof &quot;string&quot;, _typeof(&quot;string&quot;));
assert.equal(typeof new String(&quot;string&quot;), _typeof(new String(&quot;string&quot;)));

&#x2F;&#x2F; object
assert.equal(typeof &#123;&#125;, _typeof(&#123;&#125;));
assert.equal(typeof new Object(&#123;&#125;), _typeof(new Object(&#123;&#125;)));
assert.equal(typeof Object.create(&#123;&#125;), _typeof(Object.create(&#123;&#125;)));
&#x2F;&#x2F;
assert.equal(typeof [], _typeof([]));
assert.equal(typeof new Array(), _typeof(new Array()));
&#x2F;&#x2F;
assert.equal(typeof null, _typeof(null));
&#x2F;&#x2F;
assert.equal(typeof undefined, _typeof(undefined));

&#x2F;&#x2F;
assert.equal(
  typeof (() &#x3D;&gt; &#123;&#125;),
  _typeof(() &#x3D;&gt; &#123;&#125;)
);
assert.equal(
  typeof function a() &#123;&#125;,
  _typeof(function a() &#123;&#125;)
);
assert.equal(typeof new Function(), _typeof(new Function()));

&#x2F;&#x2F;
assert.equal(typeof Symbol, _typeof(Symbol));
assert.equal(typeof Symbol(), _typeof(Symbol()));

&#x2F;&#x2F; &#x2F;&#x2F; bigint
&#x2F;&#x2F; assert.equal(typeof 123n, _typeof(123n));
&#x2F;&#x2F; assert.equal(typeof new BigInt(123n), _typeof(new BigInt(123n)));

assert.equal(typeof new Set(), _typeof(new Set()));
assert.equal(typeof new Set([1, 2, 3, 4]), _typeof(new Set([1, 2, 3, 4])));

&#x2F;&#x2F;
assert.equal(typeof new Map(), _typeof(new Map()));

&#x2F;&#x2F;
class Point &#123;&#125;

let point &#x3D; new Point();

assert.equal(typeof Point, _typeof(Point));
assert.equal(typeof point, _typeof(point));</code></pre>]]></content>
      <categories>
        <category>Javascript</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
      </tags>
  </entry>
  <entry>
    <title>javascript ç‰ˆ React åˆ«åï¼ˆaliasï¼‰</title>
    <url>/2021/11/10/react/jsconfig/</url>
    <content><![CDATA[<h2 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h2><p>è™½ç„¶è¯´è¿‘å‡ å¹´å·²ç»ä¸åœ¨å†™ javascript ç‰ˆ React äº†ï¼Œä¸€ç›´åœ¨ç”¨ typescript ä½†æ˜¯æœ€è¿‘æ¥äº†ä¸ªå¤–åŒ…ï¼Œå…¶ä»–å°ä¼™ä¼´ä¸å¤ªç†Ÿ typescriptã€‚æ‰€ä»¥å°±æ‰“ç®—é…ç½®ä¸€ä¸‹ä½¿ç”¨ javascript ç¯å¢ƒé¡¹ç›®çš„åˆ«åã€‚</p>
<p>ä½¿ç”¨<a href="https://create-react-app.dev/">create-react-app</a> åˆ›å»º javascript ç‰ˆ React é¡¹ç›®ï¼Œå®‰è£… <a href="https://github.com/gsoft-inc/craco"><code>@craco/craco</code></a>ã€‚</p>
<p>å…·ä½“é…ç½®çœç•¥ï¼Œæ¥ä¸‹æ¥ä¸»è¦è¯´ç”¨åˆ«åçš„é…ç½®ã€‚ï¼ˆæƒ³è¦äº†è§£å…·ä½“é…ç½®è¯·å‚è€ƒ<a href="https://github.com/gsoft-inc/craco/blob/master/packages/craco/README.md#installation%EF%BC%89">https://github.com/gsoft-inc/craco/blob/master/packages/craco/README.md#installationï¼‰</a></p>
<h2 id="craco-ä¸­é…ç½®-webpack"><a href="#craco-ä¸­é…ç½®-webpack" class="headerlink" title="craco ä¸­é…ç½® webpack"></a>craco ä¸­é…ç½® webpack</h2><p>åœ¨æ ¹ç›®å½•<code>craco.config.js</code>æ–‡ä»¶ä¸­é…ç½®åˆ«å</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">module.exports &#x3D; &#123;
  webpack: &#123;
    &#x2F;&#x2F; .... å…¶ä»–é…ç½®
    alias: &#123;
      &#x2F;&#x2F; æ–‡ä»¶è·¯å¾„åˆ«å
      &quot;@&quot;: path.resolve(__dirname, &quot;src&quot;),
      &quot;@components&quot;: path.resolve(__dirname, &quot;src&#x2F;components&quot;),
      &quot;@utils&quot;: path.resolve(__dirname, &quot;src&#x2F;utils&quot;),
      &quot;@assets&quot;: path.resolve(__dirname, &quot;src&#x2F;assets&quot;),
      &quot;@containers&quot;: path.resolve(__dirname, &quot;src&#x2F;containers&quot;),
      &quot;@hooks&quot;: path.resolve(__dirname, &quot;src&#x2F;hooks&quot;),
      &quot;@store&quot;: path.resolve(__dirname, &quot;src&#x2F;store&quot;)
    &#125;
  &#125;
&#125;;</code></pre>

<h2 id="jsconfig-json"><a href="#jsconfig-json" class="headerlink" title="jsconfig.json"></a>jsconfig.json</h2><p>åœ¨æ ¹ç›®å½•ä¸‹æ–°å»º<code>jsconfig.json</code>, æ·»åŠ ä¸‹é¢å†…å®¹å³å¯ã€‚</p>
<pre class="language-json" data-language="json"><code class="language-json">&#123;
  &quot;compilerOptions&quot;: &#123;
    &quot;module&quot;: &quot;commonjs&quot;,
    &quot;jsx&quot;: &quot;preserve&quot;,
    &quot;baseUrl&quot;: &quot;.&quot;,
    &quot;paths&quot;: &#123;
      &quot;@components&#x2F;*&quot;: [&quot;.&#x2F;src&#x2F;components&#x2F;*&quot;],
      &quot;@assets&#x2F;*&quot;: [&quot;.&#x2F;src&#x2F;assets&#x2F;*&quot;],
      &quot;@containers&#x2F;*&quot;: [&quot;.&#x2F;src&#x2F;containers&#x2F;*&quot;],
      &quot;@hooks&#x2F;*&quot;: [&quot;.&#x2F;src&#x2F;hooks&#x2F;*&quot;],
      &quot;@store&#x2F;*&quot;: [&quot;.&#x2F;src&#x2F;store&#x2F;*&quot;],
      &quot;@utils&#x2F;*&quot;: [&quot;.&#x2F;src&#x2F;utils&#x2F;*&quot;]
    &#125;
  &#125;,
  &quot;include&quot;: [&quot;.&#x2F;src&#x2F;**&#x2F;*&quot;],
  &quot;exclude&quot;: [&quot;node_modules&quot;, &quot;build&quot;, &quot;coverage&quot;, &quot;dist&quot;, &quot;lib&quot;]
&#125;</code></pre>

<p>æ³¨æ„ âš ï¸ï¼š è¿™ä¸ªæ–‡ä»¶æœ‰ä¸¥æ ¼çš„ json æ ¼å¼è¦æ±‚ï¼Œ ä¾‹å¦‚æœ€åä¸€é¡¹ä¸èƒ½æœ‰<code>,</code> ç­‰</p>
<p>â¤ï¸ â¤ï¸ è¿˜æ˜¯ ts é¦™ â¤ï¸ â¤ï¸</p>
]]></content>
      <categories>
        <category>React</category>
      </categories>
      <tags>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title>docker nginx éƒ¨ç½²Reacté¡¹ç›®</title>
    <url>/2021/12/11/react/nginx_deploy/</url>
    <content><![CDATA[<h2 id="docker-nginx"><a href="#docker-nginx" class="headerlink" title="docker nginx"></a>docker nginx</h2><ol>
<li>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ–°å»º <code>docker-compose.yml</code>æ–‡ä»¶</li>
</ol>
<pre class="language-yaml" data-language="yaml"><code class="language-yaml">version: &quot;2&quot;
services:
  # æœåŠ¡åç§°
  nginx:
    # é•œåƒ:ç‰ˆæœ¬
    image: nginx:latest
    # æ˜ å°„å®¹å™¨80ç«¯å£åˆ°æœ¬åœ°80ç«¯å£
    ports:
      - &quot;80:80&quot;
    # æ•°æ®å· æ˜ å°„æœ¬åœ°æ–‡ä»¶åˆ°å®¹å™¨
    # è¿™ä¸ªæ›´æ–°èµ·æ¥ç‰¹åˆ«é¦™
    volumes:
      # æ˜ å°„nginx.confæ–‡ä»¶åˆ°å®¹å™¨çš„&#x2F;etc&#x2F;nginx&#x2F;conf.dç›®å½•å¹¶è¦†ç›–default.confæ–‡ä»¶
      - .&#x2F;nginx.conf:&#x2F;etc&#x2F;nginx&#x2F;conf.d&#x2F;default.conf
      # æ˜ å°„buildæ–‡ä»¶å¤¹åˆ°å®¹å™¨çš„&#x2F;usr&#x2F;share&#x2F;nginx&#x2F;htmlæ–‡ä»¶å¤¹
      - .&#x2F;build:&#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html
    # è¦†ç›–å®¹å™¨å¯åŠ¨åé»˜è®¤æ‰§è¡Œçš„å‘½ä»¤ã€‚
    command: &#x2F;bin&#x2F;bash -c &quot;nginx -g &#39;daemon off;&#39;&quot;</code></pre>

<p>æŒ‚è½½ nginx é…ç½®</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">location &#x2F; &#123;
    root   &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html;
    index  index.html index.htm;
    # å…¶ä½œç”¨æ˜¯æŒ‰é¡ºåºæ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œè¿”å›ç¬¬ä¸€ä¸ªæ‰¾åˆ°çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼ˆç»“å°¾åŠ æ–œçº¿è¡¨ç¤ºä¸ºæ–‡ä»¶å¤¹ï¼‰ï¼Œå¦‚æœæ‰€æœ‰çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹éƒ½æ‰¾ä¸åˆ°ï¼Œä¼šè¿›è¡Œä¸€ä¸ªå†…éƒ¨é‡å®šå‘åˆ°æœ€åä¸€ä¸ªå‚æ•°ã€‚
    try_files $uri &#x2F;index.html;
&#125;

# æ¥å£ä»£ç†
location ^~ &#x2F;api&#x2F; &#123;
    # proxy_set_header X-Forwarded-Host $host;
    # proxy_set_header X-Forwarded-Server $host;
    # proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_pass http:&#x2F;&#x2F;xxx.xxxxx.xxxx;
&#125;</code></pre>

<ol start="2">
<li>ç¼–è¯‘ react é¡¹ç›®</li>
</ol>
<pre class="language-bash" data-language="bash"><code class="language-bash">yarn run build</code></pre>

<ol start="3">
<li>ç”Ÿæˆå®¹å™¨å¹¶éƒ¨ç½²</li>
</ol>
<pre class="language-bash" data-language="bash"><code class="language-bash">docker-compose up -d</code></pre>

<ol start="4">
<li><p>æœ¬åœ°è®¿é—® <code>http://localhost/</code></p>
</li>
<li><p>åœæ­¢å¹¶åˆ é™¤å®¹å™¨ <code>docker-compose down</code></p>
</li>
</ol>
]]></content>
      <categories>
        <category>React</category>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>React</tag>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>svg è½¬å›¾ç‰‡</title>
    <url>/2023/02/24/svg/to_image/</url>
    <content><![CDATA[<h2 id="svg-è½¬å›¾ç‰‡"><a href="#svg-è½¬å›¾ç‰‡" class="headerlink" title="svg è½¬å›¾ç‰‡"></a>svg è½¬å›¾ç‰‡</h2><pre class="language-javascript" data-language="javascript"><code class="language-javascript">&#x2F;&#x2F; åºåˆ—åŒ– svg æ–‡ä»¶ï¼ˆxmlï¼‰ è½¬æˆå­—ç¬¦ä¸²
const svgString &#x3D; new XMLSerializer()
  .serializeToString(document.getElementById(&#39;svg&#39;));

const img &#x3D; new Image();
&#x2F;&#x2F; svgString svgçš„xmlæ–‡ä»¶å­—ç¬¦ä¸²
const svg &#x3D; new Blob([svgString], &#123;type: &quot;image&#x2F;svg+xml;charset&#x3D;utf-8&quot;&#125;);

const domURL &#x3D; self.URL || self.webkitURL || self;
const url &#x3D; domURL.createObjectURL(svg);

img.src &#x3D; url;

&#x2F;&#x2F; append img to body
&#x2F;&#x2F; ...</code></pre>

]]></content>
      <categories>
        <category>Svg</category>
      </categories>
      <tags>
        <tag>Svg</tag>
      </tags>
  </entry>
  <entry>
    <title>Mac å·¥å…·</title>
    <url>/2023/02/18/tools/mac/</url>
    <content><![CDATA[<h2 id="homebrew"><a href="#homebrew" class="headerlink" title="homebrew"></a><a href="https://brew.sh/">homebrew</a></h2><p><a href="https://brew.sh/">homebrew</a> å®‰è£… <code>/bin/bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)&quot;</code></p>
<ol>
<li><p>å®‰è£…æ’ä»¶</p>
<ul>
<li>å®‰è£… <a href="https://git-scm.com/">git</a></li>
</ul>
<p><code>brew install git</code></p>
<ul>
<li>å®‰è£… <a href="https://github.com/wting/autojump">autojump</a></li>
</ul>
<p><code>brew install autojump</code></p>
<p>åœ¨ ~&#x2F;.zshrc ä¸­æ‰¾åˆ°<code>plugins</code> æ·»åŠ  <code>autojump</code>, æ³¨æ„ âš ï¸ æ¯ä¸ªæ’ä»¶é—´ç”¨ç©ºæ ¼éš”å¼€</p>
</li>
</ol>
<h2 id="iTerm2"><a href="#iTerm2" class="headerlink" title="iTerm2"></a><a href="https://iterm2.com/">iTerm2</a></h2><ol>
<li><p>å®‰è£…æ’ä»¶</p>
<ul>
<li>å®‰è£… <a href="https://ohmyz.sh/">oh-my-zsh</a> ä¸»é¢˜</li>
</ul>
<pre class="language-bash" data-language="bash"><code class="language-bash">sh -c &quot;\$(curl -fsSL https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;robbyrussell&#x2F;oh-my-zsh&#x2F;master&#x2F;tools&#x2F;install.sh)&quot;</code></pre>

<ul>
<li>å®‰è£… <a href="https://github.com/zsh-users/zsh-autosuggestions">zsh-autosuggestions</a></li>
</ul>
<pre class="language-bash" data-language="bash"><code class="language-bash">git clone https:&#x2F;&#x2F;github.com&#x2F;zsh-users&#x2F;zsh-autosuggestions $&#123;ZSH_CUSTOM:-~&#x2F;.oh-my-zsh&#x2F;custom&#125;&#x2F;plugins&#x2F;zsh-autosuggestions</code></pre>

<p>åœ¨ ~&#x2F;.zshrc ä¸­æ‰¾åˆ°<code>plugins</code> æ·»åŠ  <code>zsh-autosuggestions</code>, æ³¨æ„ âš ï¸ æ¯ä¸ªæ’ä»¶é—´ç”¨ç©ºæ ¼éš”å¼€</p>
<ul>
<li>å®‰è£… <a href="https://github.com/zsh-users/zsh-syntax-highlighting">zsh-syntax-highlighting</a></li>
</ul>
<pre class="language-bash" data-language="bash"><code class="language-bash">git clone https:&#x2F;&#x2F;github.com&#x2F;zsh-users&#x2F;zsh-syntax-highlighting.git $&#123;ZSH_CUSTOM:-~&#x2F;.oh-my-zsh&#x2F;custom&#125;&#x2F;plugins&#x2F;zsh-syntax-highlighting</code></pre>

<p>åœ¨ ~&#x2F;.zshrc ä¸­æ‰¾åˆ°<code>plugins</code> æ·»åŠ  <code>zsh-syntax-highlighting</code>, æ³¨æ„ âš ï¸ æ¯ä¸ªæ’ä»¶é—´ç”¨ç©ºæ ¼éš”å¼€</p>
<p>æœ€ç»ˆç»“æœ</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">plugins&#x3D;(
 git
 zsh-syntax-highlighting
 zsh-autosuggestions
 autojump
)</code></pre></li>
</ol>
<h2 id="vim-é…ç½®"><a href="#vim-é…ç½®" class="headerlink" title="vim é…ç½®"></a>vim é…ç½®</h2><p>å¯ä»¥å‚è€ƒ é˜®ä¸€å³°è€å¸ˆçš„ <a href="https://www.ruanyifeng.com/blog/2018/09/vimrc.html">Vim é…ç½®å…¥é—¨</a></p>
<p>åœ¨ <code>~/.vimrc</code> é…ç½® (å¦‚æœæ²¡æœ‰è¯·è‡ªå»º<code>touch ~/.vimrc</code>)</p>
<p>æˆ‘çš„åŸºæœ¬è®¾ç½®</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">set number
syntax on
set mouse&#x3D;a
set encoding&#x3D;utf-8
set autoindent
set tabstop&#x3D;2
set cursorline
set ruler
set showmatch
set incsearch
set hlsearch</code></pre>
]]></content>
      <categories>
        <category>Tool</category>
      </categories>
      <tags>
        <tag>Tool</tag>
        <tag>Mac</tag>
      </tags>
  </entry>
  <entry>
    <title>Yarn workspace</title>
    <url>/2021/08/05/tools/yarn_workspace/</url>
    <content><![CDATA[<h2 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h2><p><a href="https://yarnpkg.com/features/workspaces">yarn Workspaces</a> æ—¨åœ¨ç®€åŒ– monorepos çš„ä½¿ç”¨ï¼Œä»¥æ›´å…·å£°æ˜æ€§çš„æ–¹å¼è§£å†³ yarn é“¾æ¥çš„ä¸»è¦ç”¨ä¾‹ä¹‹ä¸€ã€‚ç®€è¨€ä¹‹ï¼Œå®ƒä»¬å…è®¸æ‚¨çš„å¤šä¸ªé¡¹ç›®ä¸€èµ·ç”Ÿæ´»åœ¨åŒä¸€ä¸ªå­˜å‚¨åº“ä¸­ï¼Œå¹¶ç›¸äº’äº¤å‰å¼•ç”¨â€”â€”å¯¹ä¸€ä¸ªé¡¹ç›®çš„æºä»£ç çš„ä»»ä½•ä¿®æ”¹éƒ½ä¼šç«‹å³åº”ç”¨äºå…¶ä»–é¡¹ç›®ã€‚</p>
<p>é¦–å…ˆï¼Œä¸€äº›è¯æ±‡ï¼šåœ¨å·¥ä½œåŒºç‰¹æ€§çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œé¡¹ç›®æ˜¯ç»„æˆå·¥ä½œåŒºçš„æ•´ä¸ªç›®å½•æ ‘ï¼ˆé€šå¸¸æ˜¯å­˜å‚¨åº“æœ¬èº«ï¼‰ã€‚å·¥ä½œåŒºæ˜¯ç”±åŒä¸€é¡¹ç›®ä¸­æ‚¨è‡ªå·±çš„æºç»„æˆçš„æœ¬åœ°åŒ…ã€‚æœ€åï¼Œå·¥ä½œæ ‘æ˜¯ä¸ºåˆ—å‡ºè‡ªå·±çš„å­å·¥ä½œç©ºé—´çš„å·¥ä½œç©ºé—´æŒ‡å®šçš„åç§°ã€‚é¡¹ç›®åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªå·¥ä½œæ ‘ï¼Œè¿™äº›å·¥ä½œæ ‘æœ¬èº«å¯èƒ½åŒ…å«ä»»æ„æ•°é‡çš„å·¥ä½œç©ºé—´ã€‚ä»»ä½•é¡¹ç›®éƒ½è‡³å°‘åŒ…å«ä¸€ä¸ªå·¥ä½œåŒºï¼šæ ¹å·¥ä½œåŒºã€‚</p>
<h2 id="åˆ›å»º"><a href="#åˆ›å»º" class="headerlink" title="åˆ›å»º"></a>åˆ›å»º</h2><ul>
<li>åˆå§‹åŒ–</li>
</ul>
<pre class="language-bash" data-language="bash"><code class="language-bash">mkdir yarn_workspaces &amp;&amp; cd yarn_workspaces

# åˆå§‹åŒ–
# é…ç½® package.json
yarn init

mkdir packages

# é…ç½® workspaces
# &quot;workspaces&quot;: [
#  &quot;packages&#x2F;*&quot;
# ]</code></pre>

<ul>
<li>é…ç½®æ ¹ç›®å½•ä¸‹<code>package.json</code></li>
</ul>
<pre class="language-json" data-language="json"><code class="language-json">&#123;
  &quot;private&quot;: true,
  &quot;workspaces&quot;: [&quot;packages&#x2F;*&quot;]
&#125;</code></pre>

<ul>
<li><p>create common package (componentsã€utilsâ€¦)</p>
<ul>
<li>åˆå§‹åŒ– <code>@mono/common</code> package</li>
</ul>
<pre class="language-bash" data-language="bash"><code class="language-bash">cd packages &amp;&amp; mkdir common

yarn init -y

mkdir components &amp;&amp; mkdir utils</code></pre>

<ul>
<li>é…ç½® <code>package.json</code></li>
</ul>
<pre class="language-json" data-language="json"><code class="language-json">&#123;
  &quot;name&quot;: &quot;@mono&#x2F;common&quot;,
  &quot;main&quot;: &quot;index.ts&quot;
&#125;</code></pre>

<p>æ³¨ï¼šç”±äºæ•´ä¸ªé¡¹ç›®éƒ½æ˜¯åŸºäº<code>typescript</code>çš„, æ‰€ä»¥ <code>main</code> å°±ç›´æ¥æŒ‡å®š <code>index.ts</code>ã€‚å¦‚æœè¦å‘å¸ƒåˆ° npm ä¸Šæœ€å¥½è¿˜æ˜¯ä½¿ç”¨<code>.js</code>ã€‚</p>
</li>
<li><p>create mobile web app (html5)</p>
<ul>
<li>åˆå§‹åŒ– app</li>
</ul>
<pre class="language-bash" data-language="bash"><code class="language-bash">cd packages &amp;&amp; mkdir mobile

# åˆ›å»º index.html
touch index.html</code></pre>
</li>
<li><p>create web app (react spa)</p>
<ul>
<li>åˆå§‹åŒ– app</li>
</ul>
<pre class="language-bash" data-language="bash"><code class="language-bash">cd packages

# åˆ›å»º react spa app
yarn create react-app my-app --template typescript</code></pre>

<ul>
<li>scripts</li>
</ul>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹<code>package.json</code>ä¸­<code>scripts</code>æ·»åŠ ä¸‹é¢è„šæœ¬</p>
<pre class="language-json" data-language="json"><code class="language-json">&#123;
  &quot;react-sap-app&quot;: &quot;yarn workspace react-spa-app start&quot;
&#125;</code></pre>

<ul>
<li>é…ç½®ä½¿ç”¨æœ¬åœ° package</li>
</ul>
<pre class="language-bash" data-language="bash"><code class="language-bash"># å®‰è£… @craco&#x2F;craco
# åœ¨ä¸æ‰§è¡Œ&#96;eject&#96;çš„æ¡ä»¶ä¸‹æ³¨å…¥webpackeç­‰ é…ç½®
yarn add @craco&#x2F;craco -D</code></pre>

<p>åœ¨<code>react-spa-app</code>æ ¹ç›®å½•ä¸‹æ–°å»ºåˆ›å»º<code>craco.config.js</code>æ–‡ä»¶</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">const path &#x3D; require(&quot;path&quot;);
const &#123; getLoader, loaderByName &#125; &#x3D; require(&quot;@craco&#x2F;craco&quot;);

&#x2F;&#x2F; é…ç½®åŒ…æ‹¬æ ¹ç›®å½•ä»¥å¤–æ–‡ä»¶è·¯å¾„
&#x2F;&#x2F; absolutePath åŒ…å &#96;@mono&#x2F;common&#96;
&#x2F;&#x2F; åœ¨&#96;react-spa-app&#96;é¡¹ç›®ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨ import nameFn from &quot;@mono&#x2F;common&quot;
const absolutePath &#x3D; path.join(__dirname, &quot;..&#x2F;common&quot;);

module.exports &#x3D; &#123;
  webpack: &#123;
    alias: &#123;&#125;,
    plugins: [],
    configure: (webpackConfig, &#123; env, paths &#125;) &#x3D;&gt; &#123;
      const &#123; isFound, match &#125; &#x3D; getLoader(
        webpackConfig,
        loaderByName(&quot;babel-loader&quot;)
      );
      if (isFound) &#123;
        const include &#x3D; Array.isArray(match.loader.include)
          ? match.loader.include
          : [match.loader.include];
        match.loader.include &#x3D; include.concat[absolutePath];
      &#125;
      return webpackConfig;
    &#125;
  &#125;
&#125;;</code></pre>
</li>
<li><p>create ssr web app (next.js)</p>
<ul>
<li>åˆå§‹åŒ– ssr web app</li>
</ul>
<pre class="language-bash" data-language="bash"><code class="language-bash">cd packages

# åˆ›å»º react ssr app
yarn create next-app --example with-typescript nextjs-app</code></pre>

<ul>
<li>scripts</li>
</ul>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹<code>package.json</code>ä¸­<code>scripts</code>æ·»åŠ ä¸‹é¢è„šæœ¬</p>
<pre class="language-json" data-language="json"><code class="language-json">&#123;
  &quot;react-sap-app&quot;: &quot;yarn workspace nextjs-app dev&quot;
&#125;</code></pre>

<ul>
<li>é…ç½®ä½¿ç”¨æœ¬åœ° package</li>
</ul>
<pre class="language-bash" data-language="bash"><code class="language-bash"># æ³¨æ„âš ï¸ &#96;next-transpile-modules&#96;ç‰ˆæœ¬æœ‰å¾ˆå¤§åŒºåˆ«
# https:&#x2F;&#x2F;www.npmjs.com&#x2F;package&#x2F;next-transpile-modules#user-content-compatibility-table
yarn add next-transpile-modules -D</code></pre>

<p>åœ¨<code>nextjs-app</code>æ ¹ç›®å½•ä¸‹æ–°å»ºåˆ›å»º<code>next.config.js</code>æ–‡ä»¶</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">&#x2F;&#x2F; pass the modules you would like to see transpiled
const withTM &#x3D; require(&quot;next-transpile-modules&quot;)([&quot;@mono&#x2F;common&quot;]);
module.exports &#x3D; withTM();</code></pre>
</li>
<li><p>é…ç½®</p>
</li>
<li><p>create service app (koa service)</p>
<ul>
<li>åˆå§‹åŒ– service app</li>
</ul>
<pre class="language-bash" data-language="bash"><code class="language-bash">
cd packages &amp;&amp; mkdir koa-service-app &amp;&amp; cd koa-service-app

yarn init -y

# åˆ›å»ºæœåŠ¡å…¥å£
touch server.ts

yarn add typescript ts-node @types&#x2F;node nodemon -D</code></pre>

<ul>
<li>scripts</li>
</ul>
<p>åœ¨<code>koa-service-app</code>ç›®å½•ä¸‹<code>package.json</code>ä¸­<code>scripts</code>æ·»åŠ ä¸‹é¢è„šæœ¬</p>
<pre class="language-json" data-language="json"><code class="language-json">&#123;
  &quot;dev&quot;: &quot;nodemon --watch &#39;.&#x2F;**&#x2F;*.ts&#39; --watch &#39;..&#x2F;common&#x2F;**&#x2F;*.ts&#39; --exec &#39;ts-node&#39; server.ts&quot;
&#125;</code></pre>

<p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹<code>package.json</code>ä¸­<code>scripts</code>æ·»åŠ ä¸‹é¢è„šæœ¬</p>
<pre class="language-json" data-language="json"><code class="language-json">&#123;
  &quot;koa-service-app&quot;: &quot;yarn workspace koa-service-app dev&quot;
&#125;</code></pre></li>
</ul>
<h2 id="scripts-è¯´æ˜"><a href="#scripts-è¯´æ˜" class="headerlink" title="scripts è¯´æ˜"></a>scripts è¯´æ˜</h2><pre class="language-bash" data-language="bash"><code class="language-bash"># å¯åŠ¨ mobile app
# é¦–å…ˆå·²ç»å®‰è£… http-server
http-server -p .&#x2F;package&#x2F;mobile

# å¯åŠ¨ react spa app
yarn workspace react-spa-app start

# å¯åŠ¨ next.js ssr app
yarn workspace nextjs-app dev

# å¯åŠ¨ koa node server
yarn workspace koa-service-app start</code></pre>

<h2 id="yarn-workspace-cli"><a href="#yarn-workspace-cli" class="headerlink" title="yarn workspace cli"></a>yarn workspace cli</h2><pre class="language-bash" data-language="bash"><code class="language-bash"># root install dependency xxxxx
yarn add -W -D xxxxx

# root remove dependency xxxxx
yarn remove -W xxxxx

# package app1 install dependency xxxx
yarn workspace app1 add xxxx

# run app1 dev
yarn workspace app1 dev

# build all package
yarn workspaces run build</code></pre>

<h2 id="æå–å…¬å…±ä¾èµ–åŒ…"><a href="#æå–å…¬å…±ä¾èµ–åŒ…" class="headerlink" title="æå–å…¬å…±ä¾èµ–åŒ…"></a>æå–å…¬å…±ä¾èµ–åŒ…</h2><p>æŠŠå„ä¸ªé¡¹ç›®ä¸­å…¬å…±ä¾èµ–æå–åˆ°æ ¹ç›®å½•<code>package.json</code>ä¸­æ–¹ä¾¿ç»Ÿä¸€ç®¡ç†</p>
<pre class="language-json" data-language="json"><code class="language-json">&#123;
  &quot;dependencies&quot;: &#123;
    &quot;react&quot;: &quot;^17.0.2&quot;,
    &quot;react-dom&quot;: &quot;^17.0.2&quot;
  &#125;,
  &quot;devDependencies&quot;: &#123;
    &quot;@craco&#x2F;craco&quot;: &quot;^6.1.2&quot;,
    &quot;@types&#x2F;koa&quot;: &quot;^2.13.3&quot;,
    &quot;@types&#x2F;node&quot;: &quot;^15.12.4&quot;,
    &quot;@types&#x2F;react&quot;: &quot;^17.0.11&quot;,
    &quot;@types&#x2F;react-dom&quot;: &quot;^17.0.8&quot;,
    &quot;koa&quot;: &quot;^2.13.1&quot;,
    &quot;next&quot;: &quot;^11.0.1&quot;,
    &quot;next-transpile-modules&quot;: &quot;^8.0.0&quot;,
    &quot;ts-node&quot;: &quot;^10.0.0&quot;,
    &quot;typescript&quot;: &quot;^4.3.4&quot;,
    &quot;@testing-library&#x2F;jest-dom&quot;: &quot;^5.11.4&quot;,
    &quot;@testing-library&#x2F;react&quot;: &quot;^11.1.0&quot;,
    &quot;@testing-library&#x2F;user-event&quot;: &quot;^12.1.10&quot;,
    &quot;@types&#x2F;jest&quot;: &quot;^26.0.15&quot;,
    &quot;react-scripts&quot;: &quot;4.0.3&quot;
  &#125;
&#125;</code></pre>


<h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><ul>
<li>å¦‚æœæœ¬åœ°æ–°å¢ package è®°å¾—æ‰§è¡Œ <code>yarn install</code></li>
</ul>
<h2 id="ç‰ˆæœ¬ç®¡ç†"><a href="#ç‰ˆæœ¬ç®¡ç†" class="headerlink" title="ç‰ˆæœ¬ç®¡ç†"></a>ç‰ˆæœ¬ç®¡ç†</h2><p>å¦‚æœæƒ³å¯¹ç‰ˆæœ¬è¿›è¡Œç®¡ç†å¯ä»¥ç»“åˆ <a href="https://lerna.js.org/">leran</a></p>
<h2 id="github-åœ°å€"><a href="#github-åœ°å€" class="headerlink" title="github åœ°å€"></a>github åœ°å€</h2><p><a href="https://github.com/qqxs/monorepo">yarn workspaces monorepo</a></p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul>
<li><a href="https://yarnpkg.com/features/workspaces">yarn workspace</a></li>
<li><a href="https://create-react-app.dev/docs/adding-typescript">create-react-app</a></li>
<li><a href="https://nextjs.org/">next.js</a></li>
<li><a href="https://koajs.com/">koa2</a></li>
<li><a href="https://nodemon.io/">nodemon</a></li>
</ul>
]]></content>
      <categories>
        <category>Yarn</category>
      </categories>
      <tags>
        <tag>Tool</tag>
        <tag>Yarn</tag>
      </tags>
  </entry>
  <entry>
    <title>Typescript ç±»å‹æ“ä½œ</title>
    <url>/2020/11/21/typescript/type/</url>
    <content><![CDATA[<h2 id="Ts-ç±»å‹æ“ä½œ"><a href="#Ts-ç±»å‹æ“ä½œ" class="headerlink" title="Ts ç±»å‹æ“ä½œ"></a>Ts ç±»å‹æ“ä½œ</h2><ul>
<li>Partial (éƒ¨åˆ†, æŠŠæ‰€æœ‰å­—æ®µè½¬ä¸ºå¯é€‰å­—æ®µ)</li>
</ul>
<pre class="language-typescript" data-language="typescript"><code class="language-typescript">&#x2F;**
 * Make all properties in T optional
 *&#x2F;
type Partial&lt;T&gt; &#x3D; &#123;
  [P in keyof T]?: T[P];
&#125;;</code></pre>

<p>exampleï¼š</p>
<pre class="language-typescript" data-language="typescript"><code class="language-typescript">type partial &#x3D; &#123;
  name: string;
  getName(): string;
&#125;;

&#x2F;**
 * TPartial ç»“æœ
 * &#123;
 *   name?: string
 *   getName()?: string
 * &#125;
 *&#x2F;
type TPartial &#x3D; Partial&lt;partial&gt;;</code></pre>

<ul>
<li>Required (éœ€è¦, æŠŠæ‰€æœ‰å­—æ®µè½¬ä¸ºå¿…é€‰å­—æ®µ)</li>
</ul>
<pre class="language-typescript" data-language="typescript"><code class="language-typescript">&#x2F;**
 * Make all properties in T required
 *&#x2F;
type Required&lt;T&gt; &#x3D; &#123;
  [P in keyof T]-?: T[P];
&#125;;</code></pre>

<p>example:</p>
<pre class="language-typescript" data-language="typescript"><code class="language-typescript">type required &#x3D; &#123;
  name?: string;
  getName(): string;
&#125;;

&#x2F;**
 * TRequired ç»“æœ
 * &#123;
 *   name: string
 *   getName(): string
 * &#125;
 *&#x2F;
type TRequired &#x3D; Required&lt;required&gt;;</code></pre>

<ul>
<li>Readonly (åªè¯»ï¼ŒæŠŠæ‰€æœ‰å­—æ®µè½¬ä¸ºåªè¯»å­—æ®µ)</li>
</ul>
<pre class="language-typescript" data-language="typescript"><code class="language-typescript">&#x2F;**
 * Make all properties in T readonly
 *&#x2F;
type Readonly&lt;T&gt; &#x3D; &#123;
  readonly [P in keyof T]: T[P];
&#125;;</code></pre>

<p>example:</p>
<pre class="language-typescript" data-language="typescript"><code class="language-typescript">type Treadonly &#x3D; &#123;
  name?: string;
  getName(): string;
&#125;;

&#x2F;**
 * TReadonly ç»“æœ
 * &#123;
 *   readonly name?: string
 *   readonly getName(): string
 * &#125;
 *&#x2F;
type TReadonly &#x3D; Readonly&lt;Treadonly&gt;;</code></pre>

<ul>
<li>Pick (æŒ‘é€‰, æŒ‘é€‰æŒ‡å®šçš„å­—æ®µ)</li>
</ul>
<pre class="language-typescript" data-language="typescript"><code class="language-typescript">&#x2F;**
 * From T, pick a set of properties whose keys are in the union K
 *&#x2F;
type Pick&lt;T, K extends keyof T&gt; &#x3D; &#123;
  [P in K]: T[P];
&#125;;</code></pre>

<p>example:</p>
<pre class="language-typescript" data-language="typescript"><code class="language-typescript">type pick &#x3D; &#123;
  name?: string;
  age: number;
  getName(): string;
&#125;;

&#x2F;**
 * TPick ç»“æœ
 * &#123;
 *   name?: string
 *   age: number
 * &#125;
 *&#x2F;
type TPick &#x3D; Pick&lt;pick, &quot;name&quot; | &quot;age&quot;&gt;;</code></pre>

<ul>
<li>Record(è®°å½•,å°† K ä¸­æ‰€æœ‰çš„å±æ€§çš„å€¼è½¬åŒ–ä¸º T ç±»å‹)</li>
</ul>
<pre class="language-typescript" data-language="typescript"><code class="language-typescript">&#x2F;**
 * Construct a type with a set of properties K of type T
 *&#x2F;
type Record&lt;K extends keyof any, T&gt; &#x3D; &#123;
  [P in K]: T;
&#125;;</code></pre>

<p>example:</p>
<pre class="language-typescript" data-language="typescript"><code class="language-typescript">type record &#x3D; &#123;
  name?: string;
  age: number;
  getName(): string;
&#125;;

&#x2F;**
 * TRecord ç»“æœ
 * &#123;
 *   name: string
 *   age: string
 *   getName: string
 * &#125;
 *&#x2F;
type TRecord &#x3D; Record&lt;keyof record, string&gt;;

&#x2F;**
 * Ta ç»“æœ
 * &#123;
 *   a: number
 *   b: number
 *   c: number
 *   1: number
 * &#125;
 *&#x2F;
type Ta &#x3D; Record&lt;&quot;a&quot; | &quot;b&quot; | &quot;c&quot; | 1, number&gt;;</code></pre>

<ul>
<li>Exclude(æ’é™¤,ä» T ä¸­æ’é™¤é‚£äº›å¯åˆ†é…ç»™ U çš„ç±»å‹ï¼Œ)</li>
</ul>
<pre class="language-typescript" data-language="typescript"><code class="language-typescript">&#x2F;**
 * Exclude from T those types that are assignable to U
 *&#x2F;
type Exclude&lt;T, U&gt; &#x3D; T extends U ? never : T;</code></pre>

<p>example:</p>
<pre class="language-typescript" data-language="typescript"><code class="language-typescript">type T &#x3D; Exclude&lt;1 | 2, 1 | 3&gt;; &#x2F;&#x2F; -&gt; 2</code></pre>

<ul>
<li>Extract(æå–,ä» T ä¸­æå–å¯åˆ†é…ç»™ U çš„ç±»å‹ï¼Œ äº¤é›†)</li>
</ul>
<pre class="language-typescript" data-language="typescript"><code class="language-typescript">&#x2F;**
 * Extract from T those types that are assignable to U
 *&#x2F;
type Extract&lt;T, U&gt; &#x3D; T extends U ? T : never;</code></pre>

<p>example:</p>
<pre class="language-typescript" data-language="typescript"><code class="language-typescript">type T &#x3D; Extract&lt;1 | 2, 1 | 3&gt;; &#x2F;&#x2F; -&gt; 1</code></pre>

<ul>
<li>Omit (åˆ å», æ„é€ ä¸€ä¸ªé™¤ K ç±»å‹å¤–å…·æœ‰ T å±æ€§çš„ç±»å‹ã€‚)</li>
</ul>
<pre class="language-typescript" data-language="typescript"><code class="language-typescript">&#x2F;**
 * Construct a type with the properties of T except for those in type K.
 *&#x2F;
type Omit&lt;T, K extends keyof any&gt; &#x3D; Pick&lt;T, Exclude&lt;keyof T, K&gt;&gt;;</code></pre>

<p>example:</p>
<pre class="language-typescript" data-language="typescript"><code class="language-typescript">interface Person &#123;
  name: string;
  age: number;
  location: string;
&#125;

&#x2F;**
 * OmitPerson ç»“æœ
 * &#123;
 *   location: string
 * &#125;
 *&#x2F;
type OmitPerson &#x3D; Omit&lt;Person, &quot;name&quot; | &quot;age&quot;&gt;;</code></pre>

<ul>
<li>æ•°ç»„</li>
</ul>
<pre class="language-typescript" data-language="typescript"><code class="language-typescript">&#x2F;** arr1Example ä¸­åªå¯ä»¥ä½¿ç”¨&#96;string&#96;ç±»å‹å¡«å…… *&#x2F;
type arr1 &#x3D; string[]; &#x2F;&#x2F; å»ºè®®ä½¿ç”¨[]
const arr1Example: arr1 &#x3D; [&quot;123&quot;, &quot;23454&quot;];

&#x2F;** arr2Example ä¸­åªå¯ä»¥ä½¿ç”¨[&#96;string&#96;,&#96;number&#96;]ç±»å‹å¡«å……ï¼Œå¿…é¡»æŒ‰é¡ºåºå¡«å……, ä¸ªæ•°ä¹Ÿæœ‰é™åˆ¶ *&#x2F;
type arr2 &#x3D; [string, number];
const arr2Example: arr2 &#x3D; [&quot;0&quot;, 1];

&#x2F;** arr3Example ä¸­åªå¯ä»¥ä½¿ç”¨&#96;string&#96;æˆ–&#96;number&#96;ç±»å‹å¡«å……ï¼Œæ²¡æœ‰é¡ºåºè¦æ±‚ *&#x2F;
type arr3 &#x3D; (string | number)[];
const arr3Example: arr3 &#x3D; [0, &quot;1&quot;, &quot;2&quot;, 3, 4];</code></pre>

<ul>
<li>å¯¹è±¡</li>
</ul>
<pre class="language-typescript" data-language="typescript"><code class="language-typescript">interface Persion&lt;T&gt; &#123;
  [key: T]: T;
&#125;</code></pre>

<ul>
<li><p>extends</p>
</li>
<li><p>keyof (å¯¹äºä»»ä½•ç±»å‹ <code>T</code>ï¼Œ <code>keyof T</code>çš„ç»“æœä¸º <code>T</code>ä¸Šå·²çŸ¥çš„å…¬å…±å±æ€§åçš„è”åˆ)</p>
</li>
</ul>
<pre class="language-typescript" data-language="typescript"><code class="language-typescript">interface Person &#123;
  name: string;
  age: number;
&#125;

type p &#x3D; keyof Person; &#x2F;&#x2F; -&gt; p &#x3D; &#39;name&#39; | &#39;age&#39;</code></pre>

<ul>
<li>typeof</li>
</ul>
<pre class="language-typescript" data-language="typescript"><code class="language-typescript"></code></pre>

<ul>
<li>äº¤å‰ç±»å‹ (äº¤å‰ç±»å‹æ˜¯å°†å¤šä¸ªç±»å‹åˆå¹¶ä¸ºä¸€ä¸ªç±»å‹)</li>
</ul>
<pre class="language-typescript" data-language="typescript"><code class="language-typescript">interface;</code></pre>

<ul>
<li>è”åˆç±»å‹ (è”åˆç±»å‹è¡¨ç¤ºä¸€ä¸ªå€¼å¯ä»¥æ˜¯å‡ ç§ç±»å‹ä¹‹ä¸€,ç”¨ç«–çº¿<code>ï½œ</code>åˆ†éš”æ¯ä¸ªç±»å‹)</li>
</ul>
<pre class="language-typescript" data-language="typescript"><code class="language-typescript">function getNum(num: number | string): number &#123;
  return +num;
&#125;</code></pre>

<ul>
<li>ç´¢å¼•ç±»å‹</li>
</ul>
<pre class="language-typescript" data-language="typescript"><code class="language-typescript"></code></pre>

<ul>
<li>æ˜ å°„ç±»å‹</li>
</ul>
<pre class="language-typescript" data-language="typescript"><code class="language-typescript"></code></pre>

<ul>
<li>@4.1</li>
</ul>
<pre class="language-typescript" data-language="typescript"><code class="language-typescript">  &#x2F;&#x2F; @4.1
type Getters&lt;T&gt; &#x3D; &#123;
  &#x2F;&#x2F;
  [K in keyof T as &#96;get$&#123;capitalize K&#125;&#96;]: () &#x3D;&gt; T[K]
&#125;

interface Person &#123;
	name: string;
	age: number;
	location: string;
&#125;

&#x2F;**
* LazyPerson ç»“æœ
* &#123;
*   name: string
*   age: number
*   location: string
*   getName: () &#x3D;&gt; string
*   getAge: () &#x3D;&gt; number
*   getLocation: () &#x3D;&gt; string
* &#125;
*&#x2F;
type LazyPerson &#x3D; Getters&lt;Person&gt;;</code></pre>

<ul>
<li><p>React ä¸­çš„ç±»å‹çº¦æŸ</p>
<ul>
<li>FC (å‡½æ•°ç»„ä»¶ç±»å‹)</li>
</ul>
<pre class="language-tsx" data-language="tsx"><code class="language-tsx">interface FunctionComponent&lt;P &#x3D; &#123;&#125;&gt; &#123;
  (props: PropsWithChildren&lt;P&gt;, context?: any): ReactElement&lt;any, any&gt; | null;
  propTypes?: WeakValidationMap&lt;P&gt;;
  contextTypes?: ValidationMap&lt;any&gt;;
  defaultProps?: Partial&lt;P&gt;;
  displayName?: string;
&#125;

type FC&lt;P &#x3D; &#123;&#125;&gt; &#x3D; FunctionComponent&lt;P&gt;;

&#x2F;&#x2F; å…·ä½“ä½¿ç”¨
interface IProps &#123;&#125;
const App: FC&lt;IProps&gt; &#x3D; props &#x3D;&gt; &lt;div&gt;&#123;props.children&#125;&lt;&#x2F;div&gt;;</code></pre>

<ul>
<li><p>useState</p>
<p>React ä¸­ä½¿ç”¨<code>useState</code>æ–¹æ³•å»è®¾ç½® state</p>
</li>
</ul>
<pre class="language-tsx" data-language="tsx"><code class="language-tsx">function useState&lt;S&gt;(
  initialState: S | (() &#x3D;&gt; S)
): [S, Dispatch&lt;SetStateAction&lt;S&gt;&gt;];</code></pre></li>
</ul>
]]></content>
      <categories>
        <category>Typescript</category>
      </categories>
      <tags>
        <tag>Typescript</tag>
      </tags>
  </entry>
  <entry>
    <title>webpack5 é…ç½®é¡¹</title>
    <url>/2022/11/13/webpack/config/</url>
    <content><![CDATA[<h2 id="webpack5-é…ç½®é¡¹"><a href="#webpack5-é…ç½®é¡¹" class="headerlink" title="webpack5 é…ç½®é¡¹"></a>webpack5 é…ç½®é¡¹</h2><p>webpack <a href="https://sourcegraph.com/github.com/webpack/webpack@main/-/blob/declarations/WebpackOptions.d.ts">WebpackOptions</a></p>
<p><a href="https://webpack.docschina.org/configuration/other-options">https://webpack.docschina.org/configuration/other-options</a></p>
<pre class="language-typescript" data-language="typescript"><code class="language-typescript">export interface WebpackOptions &#123;
  &#x2F;**
   * è®¾ç½®&#96;require.amd&#96;å’Œ&#96;define.amd&#96;çš„å€¼ã€‚æˆ–è€…ç¦ç”¨AMDæ”¯æŒã€‚
   *&#x2F;
  amd?: false | &#123; [k: string]: any &#125;;
  &#x2F;**
   * åœ¨ç¬¬ä¸€ä¸ªé”™è¯¯å‡ºç°æ—¶æŠ›å‡ºå¤±è´¥ç»“æœï¼Œè€Œä¸æ˜¯å®¹å¿å®ƒ;  true: å°†ä¼šè‡´ä½¿ webpack åœ¨å‘ç°é”™è¯¯æ—¶å°½å¿«é€€å‡ºã€‚
   *&#x2F;
  bail?: boolean;
  &#x2F;**
   * ç¼“å­˜ç”Ÿæˆçš„ modules å’Œ chunksï¼Œä»¥æé«˜å¤šä¸ªå¢é‡æ„å»ºçš„æ€§èƒ½ã€‚
   *&#x2F;
  cache?: boolean | MemoryCacheOptions | FileCacheOptions;
  &#x2F;**
   * åŸºæœ¬ç›®å½•ï¼ˆç»å¯¹è·¯å¾„ï¼ï¼‰ç”¨äºè§£æ&#96;entry&#96;é€‰é¡¹ã€‚å¦‚æœè®¾ç½®äº†&#96;output.pathinfo&#96;ï¼Œåˆ™åŒ…å«çš„pathinfoå°†ç¼©çŸ­åˆ°æ­¤ç›®å½•ã€‚
   *&#x2F;
  context?: string; &#x2F;&#x2F; Context;
  &#x2F;**
   * å¯¹è¦ä¾èµ–çš„å…¶ä»–é…ç½®çš„å¼•ç”¨ã€‚
   *&#x2F;
  dependencies?: string[]; &#x2F;&#x2F; Dependencies;
  &#x2F;**
   * https:&#x2F;&#x2F;webpack.js.org&#x2F;configuration&#x2F;dev-server&#x2F;
   * webpack-dev-serverçš„é€‰é¡¹
   *&#x2F;
  devServer?: DevServer;
  &#x2F;**
   * ç”¨äºå¢å¼ºè°ƒè¯•çš„å¼€å‘å·¥å…· (false | eval | [inline-|hidden-|eval-][nosources-][cheap-[module-]]source-map).
   *&#x2F;
  devtool?: DevTool;
  &#x2F;**
   * ç¼–è¯‘çš„å…¥å£ç‚¹
   *&#x2F;
  entry?: Entry;
  &#x2F;**
   * å¯ç”¨&#x2F;ç¦ç”¨å®éªŒï¼ˆå…·æœ‰relax-SemVerå…¼å®¹æ€§çš„å®éªŒåŠŸèƒ½ï¼‰
   *&#x2F;
  experiments?: Experiments;
  &#x2F;**
   * æŒ‡å®šä¸åº”è¯¥ç”±webpackè§£æï¼Œä½†åº”è¯¥æˆä¸ºç»“æœåŒ…çš„ä¾èµ–é¡¹çš„ä¾èµ–é¡¹ã€‚ä¾èµ–å…³ç³»çš„ç±»å‹å–å†³äº&#96;output.libraryTarget&#96;ã€‚
   *&#x2F;
  externals?: Externals;
  &#x2F;**
   * ä¸ºç‰¹å®šç›®æ ‡å¯ç”¨å¤–éƒ¨é¢„è®¾
   *&#x2F;
  externalsPresets?: ExternalsPresets;
  &#x2F;**
   * æŒ‡å®šå¤–éƒ¨çš„é»˜è®¤ç±»å‹ï¼ˆ&#39;amd*&#39;ã€&#39;umd*&#39;ï¼Œ&#39;system&#39;å’Œ&#39;jsonp&#39;å–å†³äºè®¾ç½®ä¸ºç›¸åŒå€¼çš„output.libraryTargetï¼‰ã€‚
   *&#x2F;
  externalsType?: ExternalsType;
  &#x2F;**
   * https:&#x2F;&#x2F;webpack.docschina.org&#x2F;configuration&#x2F;other-options&#x2F;#ignorewarnings
   * å¿½ç•¥ç‰¹å®šè­¦å‘Š
   *&#x2F;
  ignoreWarnings?: IgnoreWarnings;
  &#x2F;**
   * https:&#x2F;&#x2F;webpack.docschina.org&#x2F;configuration&#x2F;other-options&#x2F;#infrastructurelogging
   * ç”¨äºåŸºç¡€è®¾æ–½æ°´å¹³çš„æ—¥å¿—é€‰é¡¹
   *&#x2F;
  infrastructureLogging?: InfrastructureLogging;
  &#x2F;**
   * https:&#x2F;&#x2F;webpack.docschina.org&#x2F;configuration&#x2F;other-options&#x2F;#loader
   * loaderä¸Šä¸‹æ–‡ä¸­å¯ç”¨çš„è‡ªå®šä¹‰å€¼
   *&#x2F;
  loader?: Loader;
  &#x2F;**
   * å¯ç”¨ç”Ÿäº§ä¼˜åŒ–æˆ–å¼€å‘æç¤º
   *&#x2F;
  mode?: &quot;development&quot; | &quot;production&quot; | &quot;none&quot;;
  &#x2F;**
   * å½±å“æ­£å¸¸æ¨¡å—çš„é€‰é¡¹ï¼ˆ&#96;NormalModuleFactory&#96;ï¼‰
   *&#x2F;
  module?: ModuleOptions;
  &#x2F;**
   * https:&#x2F;&#x2F;webpack.docschina.org&#x2F;configuration&#x2F;other-options&#x2F;#name
   * é…ç½®çš„åç§°ã€‚åŠ è½½å¤šä¸ªé…ç½®æ—¶ä½¿ç”¨ã€‚
   *&#x2F;
  name?: string; &#x2F;&#x2F;Name;
  &#x2F;**
   * åŒ…æ‹¬å„ç§èŠ‚ç‚¹å¡«å……çš„polyfillæˆ–mock
   *&#x2F;
  node?: Node;
  &#x2F;**
   * https:&#x2F;&#x2F;webpack.docschina.org&#x2F;configuration&#x2F;optimization&#x2F;#root
   * å¯ç”¨&#x2F;ç¦ç”¨é›†æˆä¼˜åŒ–
   *&#x2F;
  optimization?: Optimization;
  &#x2F;**
   * Options affecting the output of the compilation. &#96;output&#96; options tell webpack how to write the compiled files to disk.
   * å½±å“ç¼–è¯‘è¾“å‡ºçš„é€‰é¡¹. &#96;output&#96;é€‰é¡¹å‘Šè¯‰&#96;webpack&#96;å¦‚ä½•å°†ç¼–è¯‘åçš„æ–‡ä»¶å†™å…¥ç£ç›˜ã€‚
   *&#x2F;
  output?: Output;
  &#x2F;**
   * https:&#x2F;&#x2F;webpack.docschina.org&#x2F;configuration&#x2F;other-options&#x2F;#parallelism
   * ç¼–è¯‘ä¸­å¹¶è¡Œå¤„ç†çš„æ¨¡å—æ•°
   * é»˜è®¤ 100
   *&#x2F;
  parallelism?: number; &#x2F;&#x2F;Parallelism;
  &#x2F;**
   * https:&#x2F;&#x2F;webpack.docschina.org&#x2F;configuration&#x2F;performance&#x2F;#root
   * webæ€§èƒ½å»ºè®®çš„é…ç½®
   *&#x2F;
  performance?: Performance;
  &#x2F;**
   * https:&#x2F;&#x2F;webpack.docschina.org&#x2F;configuration&#x2F;plugins&#x2F;#plugins
   * å‘ç¼–è¯‘å™¨æ·»åŠ å…¶ä»–æ’ä»¶.
   *
   * https:&#x2F;&#x2F;sourcegraph.com&#x2F;github.com&#x2F;webpack&#x2F;webpack-cli&#x2F;-&#x2F;blob&#x2F;packages&#x2F;webpack-cli&#x2F;src&#x2F;plugins&#x2F;CLIPlugin.ts?L11
   * webpack-cli ä¼šé»˜è®¤åœ¨æ•°ç»„çš„æœ€å‰é¢æ’å…¥ CLIPlugin çš„å®ä¾‹  (why ??) ä¸»è¦æ˜¯åœ¨æ§åˆ¶å°è¾“å‡ºå†…å®¹ï¼ˆæ‰“å°æ—¥å¿—ï¼‰
   *&#x2F;
  plugins?: Plugins;
  &#x2F;**
   * https:&#x2F;&#x2F;webpack.docschina.org&#x2F;configuration&#x2F;other-options&#x2F;#profile
   * æ•è·æ¯ä¸ªæ¨¡å—çš„è®¡æ—¶ä¿¡æ¯
   *&#x2F;
  profile?: Profile;
  &#x2F;**
   * https:&#x2F;&#x2F;webpack.docschina.org&#x2F;configuration&#x2F;other-options&#x2F;#recordsinputpath
   * å°†ç¼–è¯‘å™¨çŠ¶æ€å­˜å‚¨åˆ°jsonæ–‡ä»¶ä¸­, æŒ‡å®šè¯»å–æœ€åä¸€æ¡è®°å½•çš„æ–‡ä»¶çš„åç§°ã€‚è¿™å¯ä»¥ç”¨æ¥é‡å‘½åä¸€ä¸ªè®°å½•æ–‡ä»¶
   *&#x2F;
  recordsInputPath?: string | false; &#x2F;&#x2F; RecordsInputPath;
  &#x2F;**
   * https:&#x2F;&#x2F;webpack.docschina.org&#x2F;configuration&#x2F;other-options&#x2F;#recordsoutputpath
   * ä»jsonæ–‡ä»¶åŠ è½½ç¼–è¯‘å™¨çŠ¶æ€
   *&#x2F;
  recordsOutputPath?: string | false; &#x2F;&#x2F; RecordsOutputPath;
  &#x2F;**
   * https:&#x2F;&#x2F;webpack.docschina.org&#x2F;configuration&#x2F;other-options&#x2F;#recordspath
   * å¼€å¯è¿™ä¸ªé€‰é¡¹å¯ä»¥ç”Ÿæˆä¸€ä¸ª JSON æ–‡ä»¶ï¼Œå…¶ä¸­å«æœ‰ webpack çš„ &quot;records&quot; è®°å½• - å³ã€Œç”¨äºå­˜å‚¨è·¨å¤šæ¬¡æ„å»º(across multiple builds)çš„æ¨¡å—æ ‡è¯†ç¬¦ã€çš„æ•°æ®ç‰‡æ®µã€‚å¯ä»¥ä½¿ç”¨æ­¤æ–‡ä»¶æ¥è·Ÿè¸ªåœ¨æ¯æ¬¡æ„å»ºä¹‹é—´çš„æ¨¡å—å˜åŒ–ã€‚åªè¦ç®€å•çš„è®¾ç½®ä¸€ä¸‹è·¯å¾„,å°±å¯ä»¥ç”Ÿæˆè¿™ä¸ª JSON æ–‡ä»¶
   *&#x2F;
  recordsPath?: RecordsPath;
  &#x2F;**
   * è§£æå™¨é€‰é¡¹
   *&#x2F;
  resolve?: Resolve;
  &#x2F;**
   * https:&#x2F;&#x2F;webpack.docschina.org&#x2F;configuration&#x2F;resolve&#x2F;#resolveloader
   * è§£æloadersæ—¶è§£æç¨‹åºçš„é€‰é¡¹
   *&#x2F;
  resolveLoader?: ResolveLoader;
  &#x2F;**
   * å½±å“æ–‡ä»¶ç³»ç»Ÿå¿«ç…§åˆ›å»ºå’ŒéªŒè¯æ–¹å¼çš„é€‰
   *&#x2F;
  snapshot?: SnapshotOptions;
  &#x2F;**
   * ç»Ÿè®¡é€‰é¡¹å¯¹è±¡æˆ–é¢„è®¾åç§°
   * é»˜è®¤: &#123;colors:false,preset:&#39;normal&#39;&#125;
   *&#x2F;
  stats?: StatsValue;
  &#x2F;**
   * è¦æ„å»ºçš„ç¯å¢ƒã€‚å°½å¯èƒ½ä¸ºæ‰€æœ‰ç”¨æˆ·æ„å»ºä¸€ç³»åˆ—ç¯å¢ƒ
   *&#x2F;
  target?: string | false | string[]; &#x2F;&#x2F; Target;
  &#x2F;**
   * https:&#x2F;&#x2F;webpack.docschina.org&#x2F;configuration&#x2F;watch#root
   * å¯ç”¨ Watch æ¨¡å¼ï¼Œè¯¥æ¨¡å¼å°†åœ¨æ–‡ä»¶æ›´æ”¹æ—¶é‡å»º
   * Compiler æ”¯æŒå¯ä»¥ç›‘æ§æ–‡ä»¶ç³»ç»Ÿçš„ ç›‘å¬(watching) æœºåˆ¶ï¼Œå¹¶ä¸”åœ¨æ–‡ä»¶ä¿®æ”¹æ—¶é‡æ–°ç¼–è¯‘ã€‚
   * å½“å¤„äºç›‘å¬æ¨¡å¼(watch mode)æ—¶ï¼Œ compiler ä¼šè§¦å‘è¯¸å¦‚ watchRun, watchClose å’Œ invalid ç­‰é¢å¤–çš„äº‹ä»¶
   *
   *&#x2F;
  watch?: boolean; &#x2F;&#x2F; Watch;
  &#x2F;**
   * https:&#x2F;&#x2F;webpack.docschina.org&#x2F;configuration&#x2F;watch#watchoptions
   * ä¸€ç»„ç”¨æ¥å®šåˆ¶ watch æ¨¡å¼çš„é€‰é¡¹
   *&#x2F;
  watchOptions?: WatchOptions;
&#125;</code></pre>

<h2 id="loader"><a href="#loader" class="headerlink" title="loader"></a>loader</h2><pre class="language-typescript" data-language="typescript"><code class="language-typescript">&#x2F;**
 * Custom values available in the loader context.
 *&#x2F;
export interface Loader &#123;
  [k: string]: any;
&#125;</code></pre>

<h2 id="plugin"><a href="#plugin" class="headerlink" title="plugin"></a>plugin</h2><pre class="language-typescript" data-language="typescript"><code class="language-typescript">&#x2F;**
 * å‘ç¼–è¯‘å™¨æ·»åŠ å…¶ä»–æ’ä»¶
 *&#x2F;
export type Plugins &#x3D; (WebpackPluginInstance | WebpackPluginFunction)[];

&#x2F;**
 * æ’ä»¶å®ä¾‹
 *&#x2F;
export interface WebpackPluginInstance &#123;
  &#x2F;**
   * The run point of the plugin, required method.
   *&#x2F;
  apply: (compiler: import(&quot;..&#x2F;lib&#x2F;Compiler&quot;)) &#x3D;&gt; void;
  [k: string]: any;
&#125;

&#x2F;**
 * Function acting as plugin.
 *&#x2F;
export type WebpackPluginFunction &#x3D; (
  this: import(&quot;..&#x2F;lib&#x2F;Compiler&quot;),
  compiler: import(&quot;..&#x2F;lib&#x2F;Compiler&quot;)
) &#x3D;&gt; void;</code></pre>
]]></content>
      <categories>
        <category>Webpack</category>
      </categories>
      <tags>
        <tag>Tool</tag>
        <tag>Webpack5</tag>
      </tags>
  </entry>
  <entry>
    <title>tapable ä½¿ç”¨éšç¬”</title>
    <url>/2022/11/28/webpack/tapable/</url>
    <content><![CDATA[<h2 id="tapable"><a href="#tapable" class="headerlink" title="tapable"></a>tapable</h2><p>The <a href="https://github.com/webpack/tapable">tapable</a> package expose many Hook classes, which can be used to create hooks for plugins.</p>
<p><code>tapable</code> æ˜¯ä¸€ä¸ªå‘å¸ƒè®¢é˜…æ¨¡å¼çš„å®ç°ï¼Œå®ƒæä¾›äº†å¾ˆå¤šåº”å¯¹ä¸šåŠ¡çš„ <code>hooks</code> å®ç°å’ŒæŠ½è±¡ã€‚ä¸»è¦åˆ†ä¸ºä¸¤å¤§ç±»åŒæ­¥å’Œå¼‚æ­¥ã€‚</p>
<h2 id="Base-Hooks"><a href="#Base-Hooks" class="headerlink" title="Base Hooks"></a>Base Hooks</h2><ul>
<li><a href="https://sourcegraph.com/github.com/webpack/tapable/-/blob/lib/Hook.js?L25:1">Hooks</a></li>
</ul>
<p>ç»§æ‰¿ <code>Hooks</code> çš„ç±»éœ€è¦è‡ªå·±å®ç°<code>compile</code>æŠ½è±¡æ–¹æ³•ã€‚</p>
<ul>
<li><a href="https://sourcegraph.com/github.com/webpack/tapable/-/blob/lib/HookCodeFactory.js?L7:1">HookCodeFactory</a></li>
</ul>
<p>ç»§æ‰¿<code>HookCodeFactory</code>ç±»éœ€è¦å®ç°æŠ½è±¡æ–¹æ³•<code>content</code>, è¿”å› <code>call</code>æˆ–<code>callAsync</code>æˆ–<code>promise</code> çš„å‡½æ•°ä½“çš„å®ç°çš„ä»£ç å­—ç¬¦ä¸²ï¼Œ ç„¶åä½¿ç”¨ <code>Function</code> ç”Ÿæˆä¸€ä¸ª<code>call</code>æˆ–<code>callAsync</code>æˆ–<code>promise</code> å‡½æ•°</p>
<h2 id="SyncHook"><a href="#SyncHook" class="headerlink" title="SyncHook"></a>SyncHook</h2><p><a href="https://sourcegraph.com/github.com/webpack/tapable/-/blob/lib/SyncHook.js?L35:1">SyncHook</a> æŒ‰æ³¨å†Œçš„å›è°ƒå‡½æ•°ä¸²è¡Œä¹‹è¡Œã€‚</p>
<p>ç®€å•ä½¿ç”¨ï¼š</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">const &#123; SyncHook &#125; &#x3D; require(&quot;tapable&quot;);
&#x2F;&#x2F; ç®€å•æ¥è¯´å°±æ˜¯å®ä¾‹åŒ– Hooks ç±»
&#x2F;&#x2F; æ¥æ”¶ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œå‚æ•°æ˜¯ä¸€ä¸ªå‚æ•°åçš„å­—ç¬¦ä¸²æ•°ç»„
&#x2F;&#x2F; è¿™ç»„å‚æ•°å’Œæ³¨å†Œå›è°ƒå‡½æ•°çš„å‚æ•°æœ‰å…³ï¼Œ
const hook &#x3D; new SyncHook([&quot;arg1&quot;, &quot;arg2&quot;, &quot;arg3&quot;]);
&#x2F;&#x2F; æ³¨å†Œ
&#x2F;&#x2F; ç¬¬ä¸€ä¸ªå…¥å‚ä¸ºæ³¨å†Œå
&#x2F;&#x2F; ç¬¬äºŒä¸ªä¸ºæ³¨å†Œå›è°ƒæ–¹æ³•ï¼Œå‚æ•°çš„å½¢å‚ä¸ªæ•°å’Œ&#96;SyncHook&#96;çš„å…¥å‚çš„æ•°ç»„æœ‰å…³ç³»
hook.tap(&quot;fn0&quot;, (arg1, arg2, arg3) &#x3D;&gt; &#123;
  console.log(1, arg1, arg2, arg3);
  return &quot;fn0&quot;; &#x2F;&#x2F; å›è°ƒå‡½æ•°çš„è¿”å›å€¼ä¹‹é—´æ²¡æœ‰è”ç³»
&#125;);
hook.tap(&quot;fn1&quot;, (arg1, arg2, arg3) &#x3D;&gt; &#123;
  console.log(2, arg1, arg2, arg3);
  return &quot;fn1&quot;;
&#125;);
hook.tap(&quot;fn2&quot;, (arg1, arg2, arg3) &#x3D;&gt; &#123;
  console.log(3, arg1, arg2, arg3);
  return &quot;fn2&quot;;
&#125;);
&#x2F;&#x2F; æ‰§è¡Œ
&#x2F;&#x2F; æ‰§è¡Œé¡ºåºåˆ™æ˜¯æ ¹æ®è¿™ä¸ªå®ä¾‹ç±»å‹æ¥å†³å®šçš„
hook.call(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;);</code></pre>

<p><code>call</code>ç”±<a href="https://sourcegraph.com/search?q=context:global+repo:%5Egithub%5C.com/webpack/tapable$+SyncHookCodeFactory&patternType=standard&sm=1">SyncHookCodeFactory</a>çš„<code>content</code>å®ç°, ç»“æœå¦‚ä¸‹ï¼š</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">&#x2F;&#x2F; è¿™æ˜¯ä¸€æ®µ&#96;call&#96;æ–¹æ³•å®ç°çš„ä»£ç å­—ç¬¦ä¸²
&#x2F;&#x2F; è¿™æ®µä»£ç éœ€è¦ä½¿ç”¨ &#96;Function&#96; æ¥ç”Ÿæˆ&#96;call&#96;æ–¹æ³•æ¥æ‰§è¡Œ
&#x2F;&#x2F; å…¶ä¸­&#96;this._x&#96;å°±æ˜¯æ³¨å†Œçš„å›è°ƒå‡½æ•°ç»„æˆçš„æ•°ç»„
&#x2F;&#x2F; å¯ä»¥çœ‹å‡ºå›è°ƒå‡½æ•°çš„è°ƒç”¨å°±æ˜¯æŠŠæ•°ç»„ä¸­çš„å‡½æ•°å±•å¼€
&quot;use strict&quot;;
var _context;
var _x &#x3D; this._x;
var _fn0 &#x3D; _x[0];
_fn0(arg3, arg2, arg1); &#x2F;&#x2F; å›è°ƒå‡½æ•° fn0
var _fn1 &#x3D; _x[1];
_fn1(arg3, arg2, arg1); &#x2F;&#x2F; å›è°ƒå‡½æ•° fn1
var _fn2 &#x3D; _x[2];
_fn2(arg3, arg2, arg1); &#x2F;&#x2F; å›è°ƒå‡½æ•° fn2</code></pre>

<h2 id="SyncBailHook"><a href="#SyncBailHook" class="headerlink" title="SyncBailHook"></a>SyncBailHook</h2><p><a href="https://sourcegraph.com/github.com/webpack/tapable/-/blob/lib/SyncBailHook.js?L40:1">SyncBailHook</a> ä¼šå¯¹æ¯æ¬¡æ‰§è¡Œçš„ç»“æœè¿›è¡Œæ£€æµ‹ï¼Œå¦‚æœç»“æœä¸æ˜¯ <code>undefined</code> å°±ç›´æ¥ <code>return</code> äº†ï¼Œåé¢çš„å›è°ƒå‡½æ•°å°±æ²¡æœ‰æœºä¼šæ‰§è¡Œäº†ã€‚</p>
<p>ç®€å•ä½¿ç”¨ï¼š</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">const &#123; SyncBailHook &#125; &#x3D; require(&quot;tapable&quot;);
&#x2F;&#x2F; ç®€å•æ¥è¯´å°±æ˜¯å®ä¾‹åŒ– Hooks ç±»
&#x2F;&#x2F; æ¥æ”¶ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œå‚æ•°æ˜¯ä¸€ä¸ªå‚æ•°åçš„å­—ç¬¦ä¸²æ•°ç»„
&#x2F;&#x2F; è¿™ç»„å‚æ•°å’Œæ³¨å†Œå›è°ƒå‡½æ•°çš„å‚æ•°æœ‰å…³ï¼Œ
&#x2F;&#x2F; åŒæ­¥æ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œå›è°ƒå‡½æ•°è¿”å›ç»“æœä¸æ˜¯ &#96;undefined&#96; å°±ç›´æ¥ &#96;return&#96; äº†ï¼Œåé¢çš„å›è°ƒå‡½æ•°å°±æ²¡æœ‰æœºä¼šæ‰§è¡Œäº†
const hook &#x3D; new SyncBailHook([&quot;arg1&quot;, &quot;arg2&quot;, &quot;arg3&quot;]);
&#x2F;&#x2F; æ³¨å†Œ
&#x2F;&#x2F; ç¬¬ä¸€ä¸ªå…¥å‚ä¸ºæ³¨å†Œå
&#x2F;&#x2F; ç¬¬äºŒä¸ªä¸ºæ³¨å†Œå›è°ƒæ–¹æ³•ï¼Œå‚æ•°çš„å½¢å‚ä¸ªæ•°å’Œ&#96;SyncBailHook&#96;çš„å…¥å‚çš„æ•°ç»„æœ‰å…³ç³»
hook.tap(&quot;fn0&quot;, (arg1, arg2, arg3) &#x3D;&gt; &#123;
  console.log(&quot;fn0&quot;, arg1, arg2, arg3);
  return undefined;
&#125;);
hook.tap(&quot;fn1&quot;, (arg1, arg2, arg3) &#x3D;&gt; &#123;
  console.log(&quot;fn1&quot;, arg1, arg2, arg3);
  &#x2F;&#x2F; å¦‚æœå›è°ƒå‡½æ•°çš„è¿”å›ç»“æœä¸æ˜¯ &#96;undefined&#96; å°±ç›´æ¥ &#96;return&#96; äº†ï¼Œåé¢çš„å›è°ƒå‡½æ•°å°±æ²¡æœ‰æœºä¼šæ‰§è¡Œäº†
  return &quot;fn1&quot;;
&#125;);
hook.tap(&quot;fn2&quot;, (arg1, arg2, arg3) &#x3D;&gt; &#123;
  console.log(&quot;fn2&quot;, arg1, arg2, arg3);
  return undefined;
&#125;);
&#x2F;&#x2F; æ‰§è¡Œ
&#x2F;&#x2F; æ‰§è¡Œé¡ºåºåˆ™æ˜¯æ ¹æ®è¿™ä¸ªå®ä¾‹ç±»å‹æ¥å†³å®šçš„
hook.call(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;);</code></pre>

<p><code>call</code>ç”±<code>SyncBailHookCodeFactory</code>çš„<code>content</code>å®ç°, ç»“æœå¦‚ä¸‹ï¼š</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">&#x2F;&#x2F; è¿™æ˜¯ä¸€æ®µ&#96;call&#96;æ–¹æ³•å®ç°çš„ä»£ç å­—ç¬¦ä¸²
&#x2F;&#x2F; å‚æ•°å’ŒSyncHookæ˜¯ä¸€è‡´çš„ï¼ŒåŒºåˆ«åœ¨äºå›è°ƒå‡½æ•°çš„è¿”å›å€¼
&#x2F;&#x2F; å¦‚æœå›è°ƒå‡½æ•°çš„è¿”å›ç»“æœä¸æ˜¯ &#96;undefined&#96; å°±ç›´æ¥ &#96;return&#96; äº†ï¼Œåé¢çš„å›è°ƒå‡½æ•°å°±æ²¡æœ‰æœºä¼šæ‰§è¡Œäº†ã€‚
&#x2F;&#x2F; å°±åƒä¸€ä¸ªæœ‰é™çš„å¥—å¨ƒğŸª†
&quot;use strict&quot;;
var _context;
var _x &#x3D; this._x;
var _fn0 &#x3D; _x[0];
var _result0 &#x3D; _fn0(arg3, arg2, arg1);
&#x2F;&#x2F; å¦‚æœè¿”å›ç»“æœä¸æ˜¯ &#96;undefined&#96; å°±ç›´æ¥ &#96;return&#96; äº†ï¼Œåé¢çš„å›è°ƒå‡½æ•°å°±æ²¡æœ‰æœºä¼šæ‰§è¡Œäº†ã€‚
if (_result0 !&#x3D;&#x3D; undefined) &#123;
  return _result0;
&#125; else &#123;
  var _fn1 &#x3D; _x[1];
  var _result1 &#x3D; _fn1(arg3, arg2, arg1);
  &#x2F;&#x2F; å¦‚æœè¿”å›ç»“æœä¸æ˜¯ &#96;undefined&#96; å°±ç›´æ¥ &#96;return&#96; äº†ï¼Œåé¢çš„å›è°ƒå‡½æ•°å°±æ²¡æœ‰æœºä¼šæ‰§è¡Œäº†ã€‚
  if (_result1 !&#x3D;&#x3D; undefined) &#123;
    return _result1;
  &#125; else &#123;
    var _fn2 &#x3D; _x[2];
    var _result2 &#x3D; _fn2(arg3, arg2, arg1);
    &#x2F;&#x2F; å¦‚æœè¿”å›ç»“æœä¸æ˜¯ &#96;undefined&#96; å°±ç›´æ¥ &#96;return&#96; äº†ï¼Œåé¢çš„å›è°ƒå‡½æ•°å°±æ²¡æœ‰æœºä¼šæ‰§è¡Œäº†ã€‚
    if (_result2 !&#x3D;&#x3D; undefined) &#123;
      return _result2;
    &#125; else &#123;
    &#125;
  &#125;
&#125;</code></pre>

<h2 id="SyncLoopHook"><a href="#SyncLoopHook" class="headerlink" title="SyncLoopHook"></a>SyncLoopHook</h2><p><a href="https://sourcegraph.com/github.com/webpack/tapable/-/blob/lib/SyncLoopHook.js?L35:1">SyncLoopHook</a> ä¼šå¯¹æ¯æ¬¡æ‰§è¡Œçš„ç»“æœè¿›è¡Œæ£€æµ‹ï¼Œå¦‚æœç»“æœä¸æ˜¯ <code>undefined</code> å°±ä¸åœå¾ªç¯ç¬¬ä¸€ä¸ªå›è°ƒå‡½æ•°åˆ°å½“å‰å›è°ƒå‡½æ•°ï¼Œç›´è‡³éƒ½è¿”å› <code>undefined</code>ã€‚</p>
<p>ç®€å•ä½¿ç”¨ï¼š</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">const &#123; SyncLoopHook &#125; &#x3D; require(&quot;tapable&quot;);
&#x2F;&#x2F; ç®€å•æ¥è¯´å°±æ˜¯å®ä¾‹åŒ– Hooks ç±»
&#x2F;&#x2F; æ¥æ”¶ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œå‚æ•°æ˜¯ä¸€ä¸ªå‚æ•°åçš„å­—ç¬¦ä¸²æ•°ç»„
&#x2F;&#x2F; è¿™ç»„å‚æ•°å’Œæ³¨å†Œå›è°ƒå‡½æ•°çš„å‚æ•°æœ‰å…³ï¼Œ
const hook &#x3D; new SyncLoopHook([&quot;arg1&quot;, &quot;arg2&quot;, &quot;arg3&quot;]);
let _loop &#x3D; 4;

&#x2F;&#x2F; æ³¨å†Œ
&#x2F;&#x2F; ç¬¬ä¸€ä¸ªå…¥å‚ä¸ºæ³¨å†Œå
&#x2F;&#x2F; ç¬¬äºŒä¸ªä¸ºæ³¨å†Œå›è°ƒæ–¹æ³•ï¼Œå‚æ•°çš„å½¢å‚ä¸ªæ•°å’Œ&#96;SyncLoopHook&#96;çš„å…¥å‚çš„æ•°ç»„æœ‰å…³ç³»
hook.tap(&quot;fn0&quot;, (arg1, arg2, arg3) &#x3D;&gt; &#123;
  console.log(&quot;fn0&quot;, arg1, arg2, arg3);
  return undefined;
&#125;);
hook.tap(&quot;fn1&quot;, (arg1, arg2, arg3) &#x3D;&gt; &#123;
  console.log(&quot;fn1&quot;, arg1, arg2, arg3);
  _loop &#x3D; _loop - 1;
  &#x2F;&#x2F; å¦‚æœè¿”å›ç»“æœä¸æ˜¯ &#96;undefined&#96; å°±ä¸åœå¾ªç¯ &#96;f0&#96; &#96;f1&#96;ï¼Œç›´è‡³éƒ½è¿”å› &#96;undefined&#96;ã€‚
  return _loop &gt; 0 ? _loop : undefined;
&#125;);
hook.tap(&quot;fn2&quot;, (arg1, arg2, arg3) &#x3D;&gt; &#123;
  console.log(&quot;fn2&quot;, arg1, arg2, arg3);
  return undefined;
&#125;);
&#x2F;&#x2F; æ‰§è¡Œ
&#x2F;&#x2F; æ‰§è¡Œé¡ºåºåˆ™æ˜¯æ ¹æ®è¿™ä¸ªå®ä¾‹ç±»å‹æ¥å†³å®šçš„
hook.call(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;);</code></pre>

<p><code>call</code>ç”±<a href="https://sourcegraph.com/github.com/webpack/tapable/-/blob/lib/SyncLoopHook.js?L10:1">SyncLoopHookCodeFactory</a>çš„<code>content</code>å®ç°, ç»“æœå¦‚ä¸‹ï¼š</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">&#x2F;&#x2F; è¿™æ˜¯ä¸€æ®µ&#96;call&#96;æ–¹æ³•å®ç°çš„ä»£ç å­—ç¬¦ä¸²
&#x2F;&#x2F; å‚æ•°å’ŒSyncHookæ˜¯ä¸€è‡´çš„ï¼ŒåŒºåˆ«åœ¨äºå›è°ƒå‡½æ•°çš„è¿”å›å€¼
&#x2F;&#x2F; å¦‚æœç»“æœä¸æ˜¯ &#96;undefined&#96; å°±ä¸åœå¾ªç¯ç¬¬ä¸€ä¸ªå›è°ƒå‡½æ•°åˆ°å½“å‰å›è°ƒå‡½æ•°ï¼Œç›´è‡³éƒ½è¿”å› &#96;undefined&#96;
&#x2F;&#x2F; æ³¨æ„: ä¸è¿”å›&#96;undefined&#96;å°±ä¸åœå¾ªç¯ï¼Œå®¹æ˜“é€ æˆæ­»å¾ªç¯
&quot;use strict&quot;;
var _context;
var _x &#x3D; this._x;
var _loop;
do &#123;
  _loop &#x3D; false;
  var _fn0 &#x3D; _x[0];
  var _result0 &#x3D; _fn0(arg3, arg2, arg1);
  if (_result0 !&#x3D;&#x3D; undefined) &#123;
    _loop &#x3D; true;
  &#125; else &#123;
    var _fn1 &#x3D; _x[1];
    var _result1 &#x3D; _fn1(arg3, arg2, arg1);
    if (_result1 !&#x3D;&#x3D; undefined) &#123;
      _loop &#x3D; true;
    &#125; else &#123;
      var _fn2 &#x3D; _x[2];
      var _result2 &#x3D; _fn2(arg3, arg2, arg1);
      if (_result2 !&#x3D;&#x3D; undefined) &#123;
        _loop &#x3D; true;
      &#125; else &#123;
        if (!_loop) &#123;
        &#125;
      &#125;
    &#125;
  &#125;
&#125; while (_loop);</code></pre>

<h2 id="SyncWaterfallHook"><a href="#SyncWaterfallHook" class="headerlink" title="SyncWaterfallHook"></a>SyncWaterfallHook</h2><p><a href="https://sourcegraph.com/github.com/webpack/tapable/-/blob/lib/SyncWaterfallHook.js?L44">SyncWaterfallHook</a> ä¼šå¯¹æ¯æ¬¡æ‰§è¡Œçš„ç»“æœå½“æˆä¸‹ä¸€ä¸ªå›è°ƒå‡½æ•°çš„å…¥å‚ï¼ˆ<code>call</code>çš„å…¥å‚ ï¼‰ï¼Œå¦‚æœè¿”å›å€¼æ˜¯ <code>undefined</code>ï¼Œä½¿ç”¨ä¸Šä¸€ä¸ªå‚æ•°ã€‚</p>
<p>ç®€å•ä½¿ç”¨ï¼š</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">const &#123; SyncWaterfallHook &#125; &#x3D; require(&quot;tapable&quot;);
&#x2F;&#x2F; ç®€å•æ¥è¯´å°±æ˜¯å®ä¾‹åŒ– Hooks ç±»
&#x2F;&#x2F; æ¥æ”¶ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œå‚æ•°æ˜¯ä¸€ä¸ªå‚æ•°åçš„å­—ç¬¦ä¸²æ•°ç»„
&#x2F;&#x2F; è¿™ç»„å‚æ•°å’Œæ³¨å†Œå›è°ƒå‡½æ•°çš„å‚æ•°æœ‰å…³ï¼Œ
const hook &#x3D; new SyncWaterfallHook([&quot;arg1&quot;, &quot;arg2&quot;, &quot;arg3&quot;]);

&#x2F;&#x2F; æ³¨å†Œ
&#x2F;&#x2F; ç¬¬ä¸€ä¸ªå…¥å‚ä¸ºæ³¨å†Œå
&#x2F;&#x2F; ç¬¬äºŒä¸ªä¸ºæ³¨å†Œå›è°ƒæ–¹æ³•ï¼Œå‚æ•°çš„å½¢å‚ä¸ªæ•°å’Œ&#96;SyncWaterfallHook&#96;çš„å…¥å‚çš„æ•°ç»„æœ‰å…³ç³»
hook.tap(&quot;fn0&quot;, (arg1, arg2, arg3) &#x3D;&gt; &#123;
  console.log(&quot;fn0&quot;, arg1, arg2, arg3);
  return &quot;fn0-result&quot;;
&#125;);
hook.tap(&quot;fn1&quot;, (arg1, arg2, arg3) &#x3D;&gt; &#123;
  console.log(&quot;fn1&quot;, arg1, arg2, arg3);
  return undefined;
&#125;);
hook.tap(&quot;fn2&quot;, (arg1, arg2, arg3) &#x3D;&gt; &#123;
  console.log(&quot;fn2&quot;, arg1, arg2, arg3);
  return &quot;fn2&quot;;
&#125;);
hook.tap(&quot;fn3&quot;, (arg1, arg2, arg3) &#x3D;&gt; &#123;
  console.log(&quot;fn3&quot;, arg1, arg2, arg3);
  return &quot;fn3&quot;;
&#125;);
&#x2F;&#x2F; æ‰§è¡Œ
&#x2F;&#x2F; æ‰§è¡Œé¡ºåºåˆ™æ˜¯æ ¹æ®è¿™ä¸ªå®ä¾‹ç±»å‹æ¥å†³å®šçš„
hook.call(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;);
&#x2F;&#x2F; æ‰§è¡Œç»“æœï¼š
&#x2F;&#x2F; fn0 a b c
&#x2F;&#x2F; fn1 fn0-result b c
&#x2F;&#x2F; fn2 fn0-result b c
&#x2F;&#x2F; fn3 fn2 b c</code></pre>

<p><code>call</code>ç”±<a href="https://sourcegraph.com/github.com/webpack/tapable/-/blob/lib/SyncWaterfallHook.js?L10:7">SyncWaterfallHookCodeFactory</a>çš„<code>content</code>å®ç°, ç»“æœå¦‚ä¸‹ï¼š</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">&#x2F;&#x2F; è¿™æ˜¯ä¸€æ®µ&#96;call&#96;æ–¹æ³•å®ç°çš„ä»£ç å­—ç¬¦ä¸²
&#x2F;&#x2F; å‚æ•°å’ŒSyncHookæ˜¯ä¸€è‡´çš„ï¼ŒåŒºåˆ«åœ¨äºå›è°ƒå‡½æ•°çš„è¿”å›å€¼
&#x2F;&#x2F; å¦‚æœè¿”å›å€¼æ˜¯ &#96;undefined&#96; , ä½¿ç”¨&#96;call&#96;çš„å‚æ•°ï¼Œå¦åˆ™ä½¿ç”¨è¿”å›çš„å€¼
&quot;use strict&quot;;
var _context;
var _x &#x3D; this._x;
var _fn0 &#x3D; _x[0];
var _result0 &#x3D; _fn0(arg1, arg2, arg3);
if (_result0 !&#x3D;&#x3D; undefined) &#123;
  &#x2F;&#x2F; å¦‚æœè¿”å›å€¼æ˜¯ &#96;undefined&#96; , ä½¿ç”¨&#96;call&#96;çš„å‚æ•°ï¼Œå¦åˆ™ä½¿ç”¨è¿”å›çš„å€¼
  arg1 &#x3D; _result0;
&#125;
var _fn1 &#x3D; _x[1];
var _result1 &#x3D; _fn1(arg1, arg2, arg3);
if (_result1 !&#x3D;&#x3D; undefined) &#123;
  &#x2F;&#x2F; å¦‚æœè¿”å›å€¼æ˜¯ &#96;undefined&#96; , ä½¿ç”¨&#96;call&#96;çš„å‚æ•°ï¼Œå¦åˆ™ä½¿ç”¨è¿”å›çš„å€¼
  arg1 &#x3D; _result1;
&#125;
var _fn2 &#x3D; _x[2];
var _result2 &#x3D; _fn2(arg1, arg2, arg3);
if (_result2 !&#x3D;&#x3D; undefined) &#123;
  &#x2F;&#x2F; å¦‚æœè¿”å›å€¼æ˜¯ &#96;undefined&#96; , ä½¿ç”¨&#96;call&#96;çš„å‚æ•°ï¼Œå¦åˆ™ä½¿ç”¨è¿”å›çš„å€¼
  arg1 &#x3D; _result2;
&#125;
var _fn3 &#x3D; _x[3];
var _result3 &#x3D; _fn3(arg1, arg2, arg3);
if (_result3 !&#x3D;&#x3D; undefined) &#123;
  arg1 &#x3D; _result3;
&#125;
return arg1;</code></pre>

<h2 id="AsyncSeriesHook"><a href="#AsyncSeriesHook" class="headerlink" title="AsyncSeriesHook"></a>AsyncSeriesHook</h2><p><a href="https://sourcegraph.com/github.com/webpack/tapable/-/blob/lib/AsyncSeriesHook.js?L26:1">AsyncSeriesHook</a>å¼‚æ­¥ä¸²è¡Œ</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">const &#123; AsyncSeriesHook &#125; &#x3D; require(&quot;tapable&quot;);
&#x2F;&#x2F; ç®€å•æ¥è¯´å°±æ˜¯å®ä¾‹åŒ– Hooks ç±»
&#x2F;&#x2F; æ¥æ”¶ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œå‚æ•°æ˜¯ä¸€ä¸ªå‚æ•°åçš„å­—ç¬¦ä¸²æ•°ç»„
&#x2F;&#x2F; è¿™ç»„å‚æ•°å’Œæ³¨å†Œå›è°ƒå‡½æ•°çš„å‚æ•°æœ‰å…³ï¼Œ
const hook &#x3D; new AsyncSeriesHook([&quot;arg1&quot;, &quot;arg2&quot;, &quot;arg3&quot;]);

&#x2F;&#x2F; æ³¨å†Œ
&#x2F;&#x2F; ç¬¬ä¸€ä¸ªå…¥å‚ä¸ºæ³¨å†Œå
&#x2F;&#x2F; ç¬¬äºŒä¸ªä¸ºæ³¨å†Œå›è°ƒæ–¹æ³•ï¼Œå‚æ•°çš„å½¢å‚ä¸ªæ•°å’Œ&#96;AsyncSeriesHook&#96;çš„å…¥å‚çš„æ•°ç»„æœ‰å…³ç³»
hook.tapAsync(&quot;fn0&quot;, (arg1, arg2, arg3, callback) &#x3D;&gt; &#123;
  setTimeout(() &#x3D;&gt; &#123;
    console.log(&quot;fn0&quot;, arg1, arg2, arg3);
    callback();
  &#125;, 1000);
&#125;);
hook.tapAsync(&quot;fn1&quot;, (arg1, arg2, arg3, callback) &#x3D;&gt; &#123;
  setTimeout(() &#x3D;&gt; &#123;
    console.log(&quot;fn1&quot;, arg1, arg2, arg3);
    callback();
  &#125;, 1000);
&#125;);
hook.tapAsync(&quot;fn2&quot;, (arg1, arg2, arg3, callback) &#x3D;&gt; &#123;
  setTimeout(() &#x3D;&gt; &#123;
    console.log(&quot;fn2&quot;, arg1, arg2, arg3);
    callback(); &#x2F;&#x2F; å†³å®š &#96;callAsync&#96; æœ€åçš„å®å‚callbackæ˜¯å¦ä¼šè¢«è°ƒç”¨
  &#125;, 1000);
&#125;);
&#x2F;&#x2F; æ‰§è¡Œ
&#x2F;&#x2F; æ‰§è¡Œé¡ºåºåˆ™æ˜¯æ ¹æ®è¿™ä¸ªå®ä¾‹ç±»å‹æ¥å†³å®šçš„
hook.callAsync(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, () &#x3D;&gt; &#123;
  console.log(&quot;AsyncSeriesHook async&quot;);
&#125;);

&#x2F;&#x2F; æ‰§è¡Œç»“æœï¼š
&#x2F;&#x2F; fn0 a b c
&#x2F;&#x2F; fn1 a b c
&#x2F;&#x2F; fn2 a b c
&#x2F;&#x2F; AsyncSeriesHook async</code></pre>

<p><code>callAsync</code> ç”±<a href="https://sourcegraph.com/github.com/webpack/tapable/-/blob/lib/AsyncSeriesHook.js?L10:1">AsyncSeriesHookCodeFactory</a>çš„<code>content</code>å®ç°, æ›´æ·±å±‚æ¬¡æ¥è¯´åº”è¯¥æ˜¯ç”±<a href="https://sourcegraph.com/github.com/webpack/tapable/-/blob/lib/HookCodeFactory.js?L7:1">HookCodeFactory</a>çš„<a href="https://sourcegraph.com/github.com/webpack/tapable/-/blob/lib/HookCodeFactory.js?L276">callTapsSeries</a>å®ç°ã€‚ ç»“æœå¦‚ä¸‹ï¼š</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">&quot;use strict&quot;;
var _context;
var _x &#x3D; this._x;
function _next1() &#123;
  var _fn2 &#x3D; _x[2];
  _fn2(arg1, arg2, arg3, function (_err2) &#123;
    &#x2F;&#x2F; ...
  &#125;);
&#125;
function _next0() &#123;
  var _fn1 &#x3D; _x[1];
  _fn1(arg1, arg2, arg3, function (_err1) &#123;
    &#x2F;&#x2F; ...
    _next1();
  &#125;);
&#125;
var _fn0 &#x3D; _x[0];
_fn0(arg1, arg2, arg3, function (_err0) &#123;
  &#x2F;&#x2F; ...
  _next0();
&#125;);</code></pre>

<p><code>Promise</code> æ–¹å¼</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">const &#123; AsyncSeriesHook &#125; &#x3D; require(&quot;tapable&quot;);

&#x2F;&#x2F; ç®€å•æ¥è¯´å°±æ˜¯å®ä¾‹åŒ– Hooks ç±»
&#x2F;&#x2F; æ¥æ”¶ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œå‚æ•°æ˜¯ä¸€ä¸ªå‚æ•°åçš„å­—ç¬¦ä¸²æ•°ç»„
&#x2F;&#x2F; è¿™ç»„å‚æ•°å’Œæ³¨å†Œå›è°ƒå‡½æ•°çš„å‚æ•°æœ‰å…³ï¼Œ
const hook &#x3D; new AsyncSeriesHook([&quot;arg1&quot;, &quot;arg2&quot;, &quot;arg3&quot;]);

&#x2F;&#x2F; æ³¨å†Œ
&#x2F;&#x2F; ç¬¬ä¸€ä¸ªå…¥å‚ä¸ºæ³¨å†Œå
&#x2F;&#x2F; ç¬¬äºŒä¸ªä¸ºæ³¨å†Œå›è°ƒæ–¹æ³•ï¼Œå‚æ•°çš„å½¢å‚ä¸ªæ•°å’Œ&#96;AsyncSeriesHook&#96;çš„å…¥å‚çš„æ•°ç»„æœ‰å…³ç³»
hook.tapPromise(&quot;fn0&quot;, (arg1, arg2, arg3) &#x3D;&gt; &#123;
  return new Promise((resolve, reject) &#x3D;&gt; &#123;
    setTimeout(() &#x3D;&gt; &#123;
      console.log(&quot;fn0&quot;, arg1, arg2, arg3);
      resolve();
    &#125;, 1000);
  &#125;);
&#125;);
hook.tapPromise(&quot;fn1&quot;, (arg1, arg2, arg3, callback) &#x3D;&gt; &#123;
  return new Promise((resolve, reject) &#x3D;&gt; &#123;
    setTimeout(() &#x3D;&gt; &#123;
      console.log(&quot;fn1&quot;, arg1, arg2, arg3);
      resolve();
    &#125;, 1000);
  &#125;);
&#125;);
hook.tapPromise(&quot;fn2&quot;, (arg1, arg2, arg3, callback) &#x3D;&gt; &#123;
  return new Promise((resolve, reject) &#x3D;&gt; &#123;
    setTimeout(() &#x3D;&gt; &#123;
      console.log(&quot;fn2&quot;, arg1, arg2, arg3);
      resolve();
    &#125;, 1000);
  &#125;);
&#125;);
&#x2F;&#x2F; æ‰§è¡Œ
&#x2F;&#x2F; æ‰§è¡Œé¡ºåºåˆ™æ˜¯æ ¹æ®è¿™ä¸ªå®ä¾‹ç±»å‹æ¥å†³å®šçš„
hook.promise(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;);</code></pre>

<p><code>promise</code> ç”±<a href="https://sourcegraph.com/github.com/webpack/tapable/-/blob/lib/AsyncSeriesHook.js?L10:1">AsyncSeriesHookCodeFactory</a>çš„<code>content</code>å®ç°, æ›´æ·±å±‚æ¬¡æ¥è¯´åº”è¯¥æ˜¯ç”±<a href="https://sourcegraph.com/github.com/webpack/tapable/-/blob/lib/HookCodeFactory.js?L7:1">HookCodeFactory</a>çš„<a href="https://sourcegraph.com/github.com/webpack/tapable/-/blob/lib/HookCodeFactory.js?L276">callTapsSeries</a>å®ç°ã€‚ ç»“æœå¦‚ä¸‹ï¼š</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">&quot;use strict&quot;;
var _context;
var _x &#x3D; this._x;
function _next1() &#123;
  var _fn2 &#x3D; _x[2];
  var _hasResult2 &#x3D; false;
  var _promise2 &#x3D; _fn2(arg1, arg2, arg3);
  _promise2.then(function (_result2) &#123;
    _hasResult2 &#x3D; true;
  &#125;);
&#125;
function _next0() &#123;
  var _fn1 &#x3D; _x[1];
  var _hasResult1 &#x3D; false;
  var _promise1 &#x3D; _fn1(arg1, arg2, arg3);
  _promise1.then(function (_result1) &#123;
    _hasResult1 &#x3D; true;
    _next1();
  &#125;);
&#125;
var _fn0 &#x3D; _x[0];
var _hasResult0 &#x3D; false;
var _promise0 &#x3D; _fn0(arg1, arg2, arg3);
_promise0.then(function (_result0) &#123;
  _hasResult0 &#x3D; true;
  _next0();
&#125;);</code></pre>

<h2 id="AsyncSeriesBailHook"><a href="#AsyncSeriesBailHook" class="headerlink" title="AsyncSeriesBailHook"></a>AsyncSeriesBailHook</h2><p><a href="https://sourcegraph.com/github.com/webpack/tapable/-/blob/lib/AsyncSeriesBailHook.js?L31">AsyncSeriesBailHook</a> ä¼šå¯¹æ¯æ¬¡å¼‚æ­¥æ‰§è¡Œçš„ç»“æœè¿›è¡Œæ£€æµ‹ï¼Œå¦‚æœç»“æœä¸æ˜¯ <code>undefined</code> å°±ç›´æ¥ <code>return</code> äº†ï¼Œåé¢çš„å›è°ƒå‡½æ•°å°±æ²¡æœ‰æœºä¼šæ‰§è¡Œäº†</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">const &#123; AsyncSeriesBailHook &#125; &#x3D; require(&quot;tapable&quot;);
&#x2F;&#x2F; ç®€å•æ¥è¯´å°±æ˜¯å®ä¾‹åŒ– Hooks ç±»
&#x2F;&#x2F; æ¥æ”¶ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œå‚æ•°æ˜¯ä¸€ä¸ªå‚æ•°åçš„å­—ç¬¦ä¸²æ•°ç»„
&#x2F;&#x2F; è¿™ç»„å‚æ•°å’Œæ³¨å†Œå›è°ƒå‡½æ•°çš„å‚æ•°æœ‰å…³ï¼Œ
const hook &#x3D; new AsyncSeriesBailHook([&quot;arg1&quot;, &quot;arg2&quot;, &quot;arg3&quot;]);

&#x2F;&#x2F; æ³¨å†Œ
&#x2F;&#x2F; ç¬¬ä¸€ä¸ªå…¥å‚ä¸ºæ³¨å†Œå
&#x2F;&#x2F; ç¬¬äºŒä¸ªä¸ºæ³¨å†Œå›è°ƒæ–¹æ³•ï¼Œå‚æ•°çš„å½¢å‚ä¸ªæ•°å’Œ&#96;AsyncSeriesBailHook&#96;çš„å…¥å‚çš„æ•°ç»„æœ‰å…³ç³»
&#x2F;&#x2F; ä¸²è¡Œè°ƒç”¨
hook.tapPromise(&quot;fn0&quot;, (arg1, arg2, arg3) &#x3D;&gt; &#123;
  return new Promise((resolve, reject) &#x3D;&gt; &#123;
    setTimeout(() &#x3D;&gt; &#123;
      console.log(&quot;fn0&quot;, arg1, arg2, arg3);
      resolve();
    &#125;, 1000);
  &#125;);
&#125;);
hook.tapPromise(&quot;fn1&quot;, (arg1, arg2, arg3, callback) &#x3D;&gt; &#123;
  return new Promise((resolve, reject) &#x3D;&gt; &#123;
    setTimeout(() &#x3D;&gt; &#123;
      console.log(&quot;fn1&quot;, arg1, arg2, arg3);
      resolve(12); &#x2F;&#x2F; åé¢çš„å›è°ƒä¸ä¼šæ‰§è¡Œ
    &#125;, 1000);
  &#125;);
&#125;);
hook.tapPromise(&quot;fn2&quot;, (arg1, arg2, arg3, callback) &#x3D;&gt; &#123;
  return new Promise((resolve, reject) &#x3D;&gt; &#123;
    setTimeout(() &#x3D;&gt; &#123;
      console.log(&quot;fn2&quot;, arg1, arg2, arg3);
      resolve();
    &#125;, 1000);
  &#125;);
&#125;);
&#x2F;&#x2F; æ‰§è¡Œ
&#x2F;&#x2F; æ‰§è¡Œé¡ºåºåˆ™æ˜¯æ ¹æ®è¿™ä¸ªå®ä¾‹ç±»å‹æ¥å†³å®šçš„
hook.promise(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;);

&#x2F;&#x2F; æ‰§è¡Œç»“æœï¼š
&#x2F;&#x2F; fn0 a b c
&#x2F;&#x2F; fn1 a b c</code></pre>

<p><code>tapAsync</code> å’Œ <code>callAsync</code>çš„ç»„åˆåŒç†</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">&quot;use strict&quot;;
var _context;
var _x &#x3D; this._x;
function _next1() &#123;
  var _fn2 &#x3D; _x[2];
  var _hasResult2 &#x3D; false;
  var _promise2 &#x3D; _fn2(arg1, arg2, arg3);
  &#x2F;&#x2F;...
  _promise2.then(function (_result2) &#123;
    _hasResult2 &#x3D; true;
    if (_result2 !&#x3D;&#x3D; undefined) &#123;
      return _result2;
    &#125; else &#123;
    &#125;
  &#125;);
&#125;
function _next0() &#123;
  var _fn1 &#x3D; _x[1];
  var _hasResult1 &#x3D; false;
  var _promise1 &#x3D; _fn1(arg1, arg2, arg3);
  &#x2F;&#x2F;...
  _promise1.then(
    function (_result1) &#123;
      _hasResult1 &#x3D; true;
      if (_result1 !&#x3D;&#x3D; undefined) &#123;
        return _result1;
      &#125; else &#123;
        return _next1();
      &#125;
    &#125;
    &#x2F;&#x2F;...
  );
&#125;
var _fn0 &#x3D; _x[0];
var _hasResult0 &#x3D; false;
var _promise0 &#x3D; _fn0(arg1, arg2, arg3);
&#x2F;&#x2F;...
_promise0.then(
  function (_result0) &#123;
    _hasResult0 &#x3D; true;
    if (_result0 !&#x3D;&#x3D; undefined) &#123;
      return _result0;
    &#125; else &#123;
      return _next0();
    &#125;
  &#125;
  &#x2F;&#x2F;...
);</code></pre>

<h2 id="AsyncSeriesLoopHook"><a href="#AsyncSeriesLoopHook" class="headerlink" title="AsyncSeriesLoopHook"></a>AsyncSeriesLoopHook</h2><p><a href="https://sourcegraph.com/github.com/webpack/tapable/-/blob/lib/AsyncSeriesLoopHook.js?L26">AsyncSeriesLoopHook</a>ä¼šå¯¹æ¯æ¬¡å¼‚æ­¥æ‰§è¡Œçš„ç»“æœè¿›è¡Œæ£€æµ‹ï¼Œå¦‚æœç»“æœä¸æ˜¯ <code>undefined</code> å°±ä¸åœå¾ªç¯ç¬¬ä¸€ä¸ªå›è°ƒå‡½æ•°åˆ°å½“å‰å›è°ƒå‡½æ•°ï¼Œç›´è‡³éƒ½è¿”å› <code>undefined</code>ã€‚</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">const &#123; AsyncSeriesLoopHook &#125; &#x3D; require(&quot;tapable&quot;);
&#x2F;&#x2F; ç®€å•æ¥è¯´å°±æ˜¯å®ä¾‹åŒ– Hooks ç±»
&#x2F;&#x2F; æ¥æ”¶ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œå‚æ•°æ˜¯ä¸€ä¸ªå‚æ•°åçš„å­—ç¬¦ä¸²æ•°ç»„
&#x2F;&#x2F; è¿™ç»„å‚æ•°å’Œæ³¨å†Œå›è°ƒå‡½æ•°çš„å‚æ•°æœ‰å…³ï¼Œ
const hook &#x3D; new AsyncSeriesLoopHook([&quot;arg1&quot;, &quot;arg2&quot;, &quot;arg3&quot;]);

let _loop &#x3D; 2; &#x2F;&#x2F; å¾ªç¯ä¸¤æ¬¡

&#x2F;&#x2F; æ³¨å†Œ
&#x2F;&#x2F; ç¬¬ä¸€ä¸ªå…¥å‚ä¸ºæ³¨å†Œå
&#x2F;&#x2F; ç¬¬äºŒä¸ªä¸ºæ³¨å†Œå›è°ƒæ–¹æ³•ï¼Œå‚æ•°çš„å½¢å‚ä¸ªæ•°å’Œ&#96;AsyncSeriesLoopHook&#96;çš„å…¥å‚çš„æ•°ç»„æœ‰å…³ç³»
hook.tapPromise(&quot;fn0&quot;, (arg1, arg2, arg3) &#x3D;&gt; &#123;
  return new Promise((resolve, reject) &#x3D;&gt; &#123;
    setTimeout(() &#x3D;&gt; &#123;
      console.log(&quot;fn0&quot;, arg1, arg2, arg3);
      resolve();
    &#125;, 1000);
  &#125;);
&#125;);
hook.tapPromise(&quot;fn1&quot;, (arg1, arg2, arg3, callback) &#x3D;&gt; &#123;
  return new Promise((resolve, reject) &#x3D;&gt; &#123;
    setTimeout(() &#x3D;&gt; &#123;
      console.log(&quot;fn1&quot;, arg1, arg2, arg3);
      resolve(_loop &gt; 0 ? &quot;fn1 result&quot; : undefined);
      _loop &#x3D; _loop - 1;
    &#125;, 1000);
  &#125;);
&#125;);
hook.tapPromise(&quot;fn2&quot;, (arg1, arg2, arg3, callback) &#x3D;&gt; &#123;
  return new Promise((resolve, reject) &#x3D;&gt; &#123;
    setTimeout(() &#x3D;&gt; &#123;
      console.log(&quot;fn2&quot;, arg1, arg2, arg3);
      resolve();
    &#125;, 1000);
  &#125;);
&#125;);
&#x2F;&#x2F; æ‰§è¡Œ
&#x2F;&#x2F; æ‰§è¡Œé¡ºåºåˆ™æ˜¯æ ¹æ®è¿™ä¸ªå®ä¾‹ç±»å‹æ¥å†³å®šçš„
hook.promise(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;);

&#x2F;&#x2F; æ‰§è¡Œç»“æœ
&#x2F;&#x2F; fn0 a b c
&#x2F;&#x2F; fn1 a b c
&#x2F;&#x2F; fn0 a b c &#x2F;&#x2F; å¾ªç¯
&#x2F;&#x2F; fn1 a b c &#x2F;&#x2F; å¾ªç¯
&#x2F;&#x2F; fn0 a b c &#x2F;&#x2F; å¾ªç¯
&#x2F;&#x2F; fn1 a b c &#x2F;&#x2F; å¾ªç¯
&#x2F;&#x2F; fn2 a b c</code></pre>

<p><code>tapAsync</code> å’Œ <code>callAsync</code>çš„ç»„åˆåŒç†</p>
<p><code>promise</code> ç”±<a href="https://sourcegraph.com/github.com/webpack/tapable/-/blob/lib/AsyncSeriesLoopHook.js?L10:1">AsyncSeriesLoopHookCodeFactory</a>çš„<code>content</code>å®ç°, æ›´æ·±å±‚æ¬¡æ¥è¯´åº”è¯¥æ˜¯ç”±<a href="https://sourcegraph.com/github.com/webpack/tapable/-/blob/lib/HookCodeFactory.js?L7:1">HookCodeFactory</a>çš„<a href="https://sourcegraph.com/github.com/webpack/tapable/-/blob/lib/HookCodeFactory.js?L324:2">callTapsLooping</a>å®ç°ã€‚ ç»“æœå¦‚ä¸‹ï¼š</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">&quot;use strict&quot;;
var _context;
var _x &#x3D; this._x;
var _looper &#x3D; function () &#123;
  var _loopAsync &#x3D; false;
  var _loop;
  do &#123;
    _loop &#x3D; false;
    function _next1() &#123;
      var _fn2 &#x3D; _x[2];
      var _hasResult2 &#x3D; false;
      var _promise2 &#x3D; _fn2(arg1, arg2, arg3);
      &#x2F;&#x2F; åˆ¤æ–­è¿”å›æ˜¯ä¸æ˜¯promise
      if (!_promise2 || !_promise2.then)
        throw new Error(
          &quot;Tap function (tapPromise) did not return promise (returned &quot; +
            _promise2 +
            &quot;)&quot;
        );
      _promise2.then(
        function (_result2) &#123;
          _hasResult2 &#x3D; true;
          if (_result2 !&#x3D;&#x3D; undefined) &#123;
            _loop &#x3D; true;
            if (_loopAsync) _looper();
          &#125; else &#123;
            if (!_loop) &#123;
            &#125;
          &#125;
        &#125;
        &#x2F;&#x2F; ... reject å¤„ç†
      );
    &#125;
    function _next0() &#123;
      var _fn1 &#x3D; _x[1];
      var _hasResult1 &#x3D; false;
      var _promise1 &#x3D; _fn1(arg1, arg2, arg3);
      &#x2F;&#x2F; ...
      _promise1.then(
        function (_result1) &#123;
          _hasResult1 &#x3D; true;
          if (_result1 !&#x3D;&#x3D; undefined) &#123;
            _loop &#x3D; true;
            if (_loopAsync) _looper();
          &#125; else &#123;
            _next1();
          &#125;
        &#125;
        &#x2F;&#x2F; ... reject å¤„ç†
      );
    &#125;
    var _fn0 &#x3D; _x[0];
    var _hasResult0 &#x3D; false;
    var _promise0 &#x3D; _fn0(arg1, arg2, arg3);
    &#x2F;&#x2F; ...
    _promise0.then(
      function (_result0) &#123;
        _hasResult0 &#x3D; true;
        if (_result0 !&#x3D;&#x3D; undefined) &#123;
          _loop &#x3D; true;
          if (_loopAsync) _looper();
        &#125; else &#123;
          _next0();
        &#125;
      &#125;
      &#x2F;&#x2F; ... reject å¤„ç†
    );
  &#125; while (_loop);
  _loopAsync &#x3D; true;
&#125;;
_looper();</code></pre>

<h2 id="AsyncSeriesWaterfallHook"><a href="#AsyncSeriesWaterfallHook" class="headerlink" title="AsyncSeriesWaterfallHook"></a>AsyncSeriesWaterfallHook</h2><p><a href="https://sourcegraph.com/github.com/webpack/tapable/-/blob/lib/AsyncSeriesWaterfallHook.js?L34">AsyncSeriesWaterfallHook</a>ä¼šå¯¹æ¯æ¬¡æ‰§è¡Œå¼‚æ­¥å‡½æ•°çš„ç»“æœå½“æˆä¸‹ä¸€ä¸ªå›è°ƒå‡½æ•°çš„å…¥å‚ï¼ˆ<code>callAsync</code>&#x2F;<code>promise</code>çš„å…¥å‚ ï¼‰ï¼Œå¦‚æœè¿”å›å€¼æ˜¯ <code>undefined</code>ï¼Œä½¿ç”¨ä¸Šä¸€ä¸ªå‚æ•°ã€‚</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">const &#123; AsyncSeriesWaterfallHook &#125; &#x3D; require(&quot;tapable&quot;);
&#x2F;&#x2F; ç®€å•æ¥è¯´å°±æ˜¯å®ä¾‹åŒ– Hooks ç±»
&#x2F;&#x2F; æ¥æ”¶ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œå‚æ•°æ˜¯ä¸€ä¸ªå‚æ•°åçš„å­—ç¬¦ä¸²æ•°ç»„
&#x2F;&#x2F; è¿™ç»„å‚æ•°å’Œæ³¨å†Œå›è°ƒå‡½æ•°çš„å‚æ•°æœ‰å…³ï¼Œ
const hook &#x3D; new AsyncSeriesWaterfallHook([&quot;arg1&quot;, &quot;arg2&quot;, &quot;arg3&quot;]);

&#x2F;&#x2F; æ³¨å†Œ
&#x2F;&#x2F; ç¬¬ä¸€ä¸ªå…¥å‚ä¸ºæ³¨å†Œå
&#x2F;&#x2F; ç¬¬äºŒä¸ªä¸ºæ³¨å†Œå›è°ƒæ–¹æ³•ï¼Œå‚æ•°çš„å½¢å‚ä¸ªæ•°å’Œ&#96;AsyncSeriesWaterfallHook&#96;çš„å…¥å‚çš„æ•°ç»„æœ‰å…³ç³»
hook.tapPromise(&quot;fn0&quot;, (arg1, arg2, arg3) &#x3D;&gt; &#123;
  return new Promise((resolve, reject) &#x3D;&gt; &#123;
    setTimeout(() &#x3D;&gt; &#123;
      console.log(&quot;fn0&quot;, arg1, arg2, arg3);
      resolve();
    &#125;, 1000);
  &#125;);
&#125;);
hook.tapPromise(&quot;fn1&quot;, (arg1, arg2, arg3, callback) &#x3D;&gt; &#123;
  return new Promise((resolve, reject) &#x3D;&gt; &#123;
    setTimeout(() &#x3D;&gt; &#123;
      console.log(&quot;fn1&quot;, arg1, arg2, arg3);
      resolve(&quot;fn1-result&quot;); &#x2F;&#x2F; è¿”å›å€¼ä½œä¸ºfn2çš„ç¬¬ä¸€ä¸ªå…¥å‚
    &#125;, 1000);
  &#125;);
&#125;);
hook.tapPromise(&quot;fn2&quot;, (arg1, arg2, arg3, callback) &#x3D;&gt; &#123;
  return new Promise((resolve, reject) &#x3D;&gt; &#123;
    setTimeout(() &#x3D;&gt; &#123;
      console.log(&quot;fn2&quot;, arg1, arg2, arg3);
      resolve();
    &#125;, 1000);
  &#125;);
&#125;);
&#x2F;&#x2F; æ‰§è¡Œ
&#x2F;&#x2F; æ‰§è¡Œé¡ºåºåˆ™æ˜¯æ ¹æ®è¿™ä¸ªå®ä¾‹ç±»å‹æ¥å†³å®šçš„
hook.promise(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;);

&#x2F;&#x2F; æ‰§è¡Œç»“æœ
&#x2F;&#x2F; fn0 a b c
&#x2F;&#x2F; fn1 a b c
&#x2F;&#x2F; fn2 fn1-result b c</code></pre>

<p><code>tapAsync</code> å’Œ <code>callAsync</code>çš„ç»„åˆåŒç†</p>
<p><code>promise</code> ç”±<a href="https://sourcegraph.com/github.com/webpack/tapable/-/blob/lib/AsyncSeriesWaterfallHook.js?L10:1">AsyncSeriesWaterfallHookCodeFactory</a>çš„<code>content</code>å®ç°, æ›´æ·±å±‚æ¬¡æ¥è¯´åº”è¯¥æ˜¯ç”±<a href="https://sourcegraph.com/github.com/webpack/tapable/-/blob/lib/HookCodeFactory.js?L7:1">HookCodeFactory</a>çš„<a href="https://sourcegraph.com/github.com/webpack/tapable/-/blob/lib/HookCodeFactory.js?L276">callTapsSeries</a>å®ç°ã€‚ ç»“æœå¦‚ä¸‹ï¼š</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">&quot;use strict&quot;;
var _context;
var _x &#x3D; this._x;
function _next2() &#123;
  var _fn3 &#x3D; _x[3];
  var _hasResult3 &#x3D; false;
  var _promise3 &#x3D; _fn3(arg1, arg2, arg3);
  if (!_promise3 || !_promise3.then)
    &#x2F;&#x2F; åˆ¤æ–­è¿”å›æ˜¯ä¸æ˜¯promise
    throw new Error(
      &quot;Tap function (tapPromise) did not return promise (returned &quot; +
        _promise3 +
        &quot;)&quot;
    );
  _promise3.then(
    function (_result3) &#123;
      _hasResult3 &#x3D; true;
      if (_result3 !&#x3D;&#x3D; undefined) &#123;
        arg1 &#x3D; _result3;
      &#125;
      return arg1;
    &#125;
    &#x2F;&#x2F; ...
  );
&#125;
function _next1() &#123;
  var _fn2 &#x3D; _x[2];
  var _hasResult2 &#x3D; false;
  var _promise2 &#x3D; _fn2(arg1, arg2, arg3);
  &#x2F;&#x2F; ...
  _promise2.then(function (_result2) &#123;
    _hasResult2 &#x3D; true;
    if (_result2 !&#x3D;&#x3D; undefined) &#123;
      arg1 &#x3D; _result2;
    &#125;
    _next2();
  &#125;);
&#125;
function _next0() &#123;
  var _fn1 &#x3D; _x[1];
  var _hasResult1 &#x3D; false;
  var _promise1 &#x3D; _fn1(arg1, arg2, arg3);
  &#x2F;&#x2F; ...
  _promise1.then(
    function (_result1) &#123;
      _hasResult1 &#x3D; true;
      if (_result1 !&#x3D;&#x3D; undefined) &#123;
        arg1 &#x3D; _result1;
      &#125;
      _next1();
    &#125;
    &#x2F;&#x2F; ...
  );
&#125;
var _fn0 &#x3D; _x[0];
var _hasResult0 &#x3D; false;
var _promise0 &#x3D; _fn0(arg1, arg2, arg3);
&#x2F;&#x2F; ...
_promise0.then(
  function (_result0) &#123;
    _hasResult0 &#x3D; true;
    if (_result0 !&#x3D;&#x3D; undefined) &#123;
      arg1 &#x3D; _result0;
    &#125;
    _next0();
  &#125;
  &#x2F;&#x2F; ...
);</code></pre>

<h2 id="AsyncParallelHook"><a href="#AsyncParallelHook" class="headerlink" title="AsyncParallelHook"></a>AsyncParallelHook</h2><p><a href="https://sourcegraph.com/github.com/webpack/tapable/-/blob/lib/AsyncParallelHook.js?L26:1">AsyncParallelHook</a>å¹¶è¡Œæ‰§è¡Œ, ä¸å…³å¿ƒå›è°ƒå‡½æ•°çš„è¿”å›å€¼ã€‚</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">const &#123; AsyncParallelHook &#125; &#x3D; require(&quot;tapable&quot;);
&#x2F;&#x2F; ç®€å•æ¥è¯´å°±æ˜¯å®ä¾‹åŒ– Hooks ç±»
&#x2F;&#x2F; æ¥æ”¶ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œå‚æ•°æ˜¯ä¸€ä¸ªå‚æ•°åçš„å­—ç¬¦ä¸²æ•°ç»„
&#x2F;&#x2F; è¿™ç»„å‚æ•°å’Œæ³¨å†Œå›è°ƒå‡½æ•°çš„å‚æ•°æœ‰å…³ï¼Œ
&#x2F;&#x2F; å¹¶è¡Œæ‰§è¡Œ ä¸å…³å¿ƒå›è°ƒå‡½æ•°çš„è¿”å›å€¼ã€‚
const hook &#x3D; new AsyncParallelHook([&quot;arg1&quot;, &quot;arg2&quot;, &quot;arg3&quot;]);

&#x2F;&#x2F; æ³¨å†Œ
&#x2F;&#x2F; ç¬¬ä¸€ä¸ªå…¥å‚ä¸ºæ³¨å†Œå
&#x2F;&#x2F; ç¬¬äºŒä¸ªä¸ºæ³¨å†Œå›è°ƒæ–¹æ³•ï¼Œå‚æ•°çš„å½¢å‚ä¸ªæ•°å’Œ&#96;AsyncParallelHook&#96;çš„å…¥å‚çš„æ•°ç»„æœ‰å…³ç³»
hook.tapPromise(&quot;fn0&quot;, (arg1, arg2, arg3) &#x3D;&gt; &#123;
  return new Promise((resolve, reject) &#x3D;&gt; &#123;
    setTimeout(() &#x3D;&gt; &#123;
      console.log(&quot;fn0&quot;, arg1, arg2, arg3);
      resolve();
    &#125;, 1000);
  &#125;);
&#125;);
hook.tapPromise(&quot;fn1&quot;, (arg1, arg2, arg3) &#x3D;&gt; &#123;
  return new Promise((resolve, reject) &#x3D;&gt; &#123;
    setTimeout(() &#x3D;&gt; &#123;
      console.log(&quot;fn1&quot;, arg1, arg2, arg3);
      resolve(&quot;fn1-result&quot;);
    &#125;, 1000);
  &#125;);
&#125;);
hook.tapPromise(&quot;fn2&quot;, (arg1, arg2, arg3) &#x3D;&gt; &#123;
  return new Promise((resolve, reject) &#x3D;&gt; &#123;
    setTimeout(() &#x3D;&gt; &#123;
      console.log(&quot;fn2&quot;, arg1, arg2, arg3);
      resolve();
    &#125;, 500);
  &#125;);
&#125;);
&#x2F;&#x2F; æ‰§è¡Œ
&#x2F;&#x2F; æ‰§è¡Œé¡ºåºåˆ™æ˜¯æ ¹æ®è¿™ä¸ªå®ä¾‹ç±»å‹æ¥å†³å®šçš„
hook.promise(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;);

&#x2F;&#x2F; æ‰§è¡Œç»“æœ
&#x2F;&#x2F; fn2 a b c
&#x2F;&#x2F; fn0 a b c
&#x2F;&#x2F; fn1 a b c</code></pre>

<p><code>tapAsync</code> å’Œ <code>callAsync</code>çš„ç»„åˆåŒç†</p>
<p><code>promise</code> ç”±<a href="https://sourcegraph.com/github.com/webpack/tapable/-/blob/lib/AsyncParallelHook.js?L10:1">AsyncParallelHookCodeFactory</a>çš„<code>content</code>å®ç°, æ›´æ·±å±‚æ¬¡æ¥è¯´åº”è¯¥æ˜¯ç”±<a href="https://sourcegraph.com/github.com/webpack/tapable/-/blob/lib/HookCodeFactory.js?L7:1">HookCodeFactory</a>çš„<a href="https://sourcegraph.com/github.com/webpack/tapable/-/blob/lib/HookCodeFactory.js?L376:2">callTapsParallel</a>å®ç°ã€‚ ç»“æœå¦‚ä¸‹ï¼š</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">&quot;use strict&quot;;
var _context;
var _x &#x3D; this._x;
do &#123;
  var _counter &#x3D; 3;
  var _done &#x3D; function () &#123;&#125;;
  if (_counter &lt;&#x3D; 0) break;
  var _fn0 &#x3D; _x[0];
  var _hasResult0 &#x3D; false;
  var _promise0 &#x3D; _fn0(arg1, arg2, arg3);

  &#x2F;&#x2F; åˆ¤æ–­è¿”å›æ˜¯ä¸æ˜¯promise
  if (!_promise0 || !_promise0.then)
    throw new Error(
      &quot;Tap function (tapPromise) did not return promise (returned &quot; +
        _promise0 +
        &quot;)&quot;
    );
  _promise0.then(
    function (_result0) &#123;
      _hasResult0 &#x3D; true;
      if (--_counter &#x3D;&#x3D;&#x3D; 0) _done();
    &#125;,
    function (_err0) &#123;
      if (_hasResult0) throw _err0;
      if (_counter &gt; 0) &#123;
        throw _err0;
        _counter &#x3D; 0;
      &#125;
    &#125;
  );
  if (_counter &lt;&#x3D; 0) break;
  var _fn1 &#x3D; _x[1];
  var _hasResult1 &#x3D; false;
  var _promise1 &#x3D; _fn1(arg1, arg2, arg3);
  &#x2F;&#x2F; ...
  _promise1.then(
    function (_result1) &#123;
      _hasResult1 &#x3D; true;
      if (--_counter &#x3D;&#x3D;&#x3D; 0) _done();
    &#125;,
    function (_err1) &#123;
      if (_hasResult1) throw _err1;
      if (_counter &gt; 0) &#123;
        throw _err1;
        _counter &#x3D; 0;
      &#125;
    &#125;
  );
  if (_counter &lt;&#x3D; 0) break;
  var _fn2 &#x3D; _x[2];
  var _hasResult2 &#x3D; false;
  var _promise2 &#x3D; _fn2(arg1, arg2, arg3);
  &#x2F;&#x2F; ...
  _promise2.then(
    function (_result2) &#123;
      _hasResult2 &#x3D; true;
      if (--_counter &#x3D;&#x3D;&#x3D; 0) _done();
    &#125;,
    function (_err2) &#123;
      if (_hasResult2) throw _err2;
      if (_counter &gt; 0) &#123;
        throw _err2;
        _counter &#x3D; 0;
      &#125;
    &#125;
  );
&#125; while (false);</code></pre>

<h2 id="AsyncParallelBailHook"><a href="#AsyncParallelBailHook" class="headerlink" title="AsyncParallelBailHook"></a>AsyncParallelBailHook</h2><p><a href="https://sourcegraph.com/github.com/webpack/tapable/-/blob/lib/AsyncParallelBailHook.js?L74:1">AsyncParallelBailHook</a> åªè¦å›è°ƒå‡½æ•°çš„è¿”å›å€¼ä¸ä¸º <code>undefined</code>, å°±ä¼šå¿½ç•¥åé¢çš„å›è°ƒå‡½æ•°æ‰§è¡Œ, ç›´æ¥è·³è·ƒåˆ° <code>callAsync</code> ç­‰è§¦å‘å‡½æ•°ç»‘å®šçš„å›è°ƒå‡½æ•°, ç„¶åæ‰§è¡Œè¿™ä¸ªè¢«ç»‘å®šçš„å›è°ƒå‡½æ•°ã€‚</p>
<p>ä½¿ç”¨å’ŒåŸç†ä¸ SyncBailHook ç›¸ä¼¼</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">const &#123; AsyncParallelBailHook &#125; &#x3D; require(&quot;tabable&quot;);
&#x2F;&#x2F; ç®€å•æ¥è¯´å°±æ˜¯å®ä¾‹åŒ– Hooks ç±»
&#x2F;&#x2F; æ¥æ”¶ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œå‚æ•°æ˜¯ä¸€ä¸ªå‚æ•°åçš„å­—ç¬¦ä¸²æ•°ç»„
&#x2F;&#x2F; è¿™ç»„å‚æ•°å’Œæ³¨å†Œå›è°ƒå‡½æ•°çš„å‚æ•°æœ‰å…³ï¼Œ
&#x2F;&#x2F; å¹¶è¡Œæ‰§è¡Œ ä¸å…³å¿ƒå›è°ƒå‡½æ•°çš„è¿”å›å€¼ã€‚
const hook &#x3D; new AsyncParallelBailHook([&quot;arg1&quot;, &quot;arg2&quot;, &quot;arg3&quot;]);

&#x2F;&#x2F; æ³¨å†Œ
&#x2F;&#x2F; ç¬¬ä¸€ä¸ªå…¥å‚ä¸ºæ³¨å†Œå
&#x2F;&#x2F; ç¬¬äºŒä¸ªä¸ºæ³¨å†Œå›è°ƒæ–¹æ³•ï¼Œå‚æ•°çš„å½¢å‚ä¸ªæ•°å’Œ&#96;AsyncParallelBailHook&#96;çš„å…¥å‚çš„æ•°ç»„æœ‰å…³ç³»
hook.tapPromise(&quot;fn0&quot;, (arg1, arg2, arg3) &#x3D;&gt; &#123;
  return new Promise((resolve, reject) &#x3D;&gt; &#123;
    setTimeout(() &#x3D;&gt; &#123;
      console.log(&quot;fn0&quot;, arg1, arg2, arg3);
      resolve();
    &#125;, 1000);
  &#125;);
&#125;);
hook.tapPromise(&quot;fn1&quot;, (arg1, arg2, arg3) &#x3D;&gt; &#123;
  return new Promise((resolve, reject) &#x3D;&gt; &#123;
    setTimeout(() &#x3D;&gt; &#123;
      console.log(&quot;fn1&quot;, arg1, arg2, arg3);
      resolve(&quot;fn1-result&quot;);
    &#125;, 1000);
  &#125;);
&#125;);
hook.tapPromise(&quot;fn2&quot;, (arg1, arg2, arg3) &#x3D;&gt; &#123;
  return new Promise((resolve, reject) &#x3D;&gt; &#123;
    setTimeout(() &#x3D;&gt; &#123;
      console.log(&quot;fn2&quot;, arg1, arg2, arg3);
      resolve();
    &#125;, 500);
  &#125;);
&#125;);
&#x2F;&#x2F; æ‰§è¡Œ
&#x2F;&#x2F; æ‰§è¡Œé¡ºåºåˆ™æ˜¯æ ¹æ®è¿™ä¸ªå®ä¾‹ç±»å‹æ¥å†³å®šçš„
hook.promise(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;);

&#x2F;&#x2F; æ‰§è¡Œç»“æœ
&#x2F;&#x2F; fn2 a b c
&#x2F;&#x2F; fn0 a b c
&#x2F;&#x2F; fn1 a b c</code></pre>

<p><code>tapAsync</code> å’Œ <code>callAsync</code>çš„ç»„åˆåŒç†</p>
<p><code>promise</code> ç”±<a href="https://sourcegraph.com/github.com/webpack/tapable/-/blob/lib/AsyncParallelBailHook.js?L10:1">AsyncParallelBailHookCodeFactory</a>çš„<code>content</code>å®ç°ã€‚ ç»“æœå¦‚ä¸‹ï¼š</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">&quot;use strict&quot;;
var _context;
var _x &#x3D; this._x;
var _results &#x3D; new Array(3);
var _checkDone &#x3D; function () &#123;
  for (var i &#x3D; 0; i &lt; _results.length; i++) &#123;
    var item &#x3D; _results[i];
    if (item &#x3D;&#x3D;&#x3D; undefined) return false;
    if (item.result !&#x3D;&#x3D; undefined) &#123;
      return item.result;
      return true;
    &#125;
    if (item.error) &#123;
      throw item.error;
      return true;
    &#125;
  &#125;
  return false;
&#125;;
do &#123;
  var _counter &#x3D; 3;
  var _done &#x3D; function () &#123;&#125;;
  if (_counter &lt;&#x3D; 0) break;
  var _fn0 &#x3D; _x[0];
  var _hasResult0 &#x3D; false;
  var _promise0 &#x3D; _fn0(arg1, arg2, arg3);
  &#x2F;&#x2F; åˆ¤æ–­è¿”å›æ˜¯ä¸æ˜¯promise
  if (!_promise0 || !_promise0.then)
    throw new Error(
      &quot;Tap function (tapPromise) did not return promise (returned &quot; +
        _promise0 +
        &quot;)&quot;
    );
  _promise0.then(
    function (_result0) &#123;
      _hasResult0 &#x3D; true;
      if (_counter &gt; 0) &#123;
        if (
          0 &lt; _results.length &amp;&amp;
          (_result0 !&#x3D;&#x3D; undefined &amp;&amp; (_results.length &#x3D; 1),
          (_results[0] &#x3D; &#123; result: _result0 &#125;),
          _checkDone())
        ) &#123;
          _counter &#x3D; 0;
        &#125; else &#123;
          if (--_counter &#x3D;&#x3D;&#x3D; 0) _done();
        &#125;
      &#125;
    &#125;,
    function (_err0) &#123;
      if (_hasResult0) throw _err0;
      if (_counter &gt; 0) &#123;
        if (
          0 &lt; _results.length &amp;&amp;
          ((_results.length &#x3D; 1),
          (_results[0] &#x3D; &#123; error: _err0 &#125;),
          _checkDone())
        ) &#123;
          _counter &#x3D; 0;
        &#125; else &#123;
          if (--_counter &#x3D;&#x3D;&#x3D; 0) _done();
        &#125;
      &#125;
    &#125;
  );
  if (_counter &lt;&#x3D; 0) break;
  if (1 &gt;&#x3D; _results.length) &#123;
    if (--_counter &#x3D;&#x3D;&#x3D; 0) _done();
  &#125; else &#123;
    var _fn1 &#x3D; _x[1];
    var _hasResult1 &#x3D; false;
    var _promise1 &#x3D; _fn1(arg1, arg2, arg3);
    &#x2F;&#x2F; ...
    _promise1.then(
      function (_result1) &#123;
        _hasResult1 &#x3D; true;
        if (_counter &gt; 0) &#123;
          if (
            1 &lt; _results.length &amp;&amp;
            (_result1 !&#x3D;&#x3D; undefined &amp;&amp; (_results.length &#x3D; 2),
            (_results[1] &#x3D; &#123; result: _result1 &#125;),
            _checkDone())
          ) &#123;
            _counter &#x3D; 0;
          &#125; else &#123;
            if (--_counter &#x3D;&#x3D;&#x3D; 0) _done();
          &#125;
        &#125;
      &#125;,
      function (_err1) &#123;
        if (_hasResult1) throw _err1;
        if (_counter &gt; 0) &#123;
          if (
            1 &lt; _results.length &amp;&amp;
            ((_results.length &#x3D; 2),
            (_results[1] &#x3D; &#123; error: _err1 &#125;),
            _checkDone())
          ) &#123;
            _counter &#x3D; 0;
          &#125; else &#123;
            if (--_counter &#x3D;&#x3D;&#x3D; 0) _done();
          &#125;
        &#125;
      &#125;
    );
  &#125;
  if (_counter &lt;&#x3D; 0) break;
  if (2 &gt;&#x3D; _results.length) &#123;
    if (--_counter &#x3D;&#x3D;&#x3D; 0) _done();
  &#125; else &#123;
    var _fn2 &#x3D; _x[2];
    var _hasResult2 &#x3D; false;
    var _promise2 &#x3D; _fn2(arg1, arg2, arg3);
    &#x2F;&#x2F; ...
    _promise2.then(
      function (_result2) &#123;
        _hasResult2 &#x3D; true;
        if (_counter &gt; 0) &#123;
          if (
            2 &lt; _results.length &amp;&amp;
            (_result2 !&#x3D;&#x3D; undefined &amp;&amp; (_results.length &#x3D; 3),
            (_results[2] &#x3D; &#123; result: _result2 &#125;),
            _checkDone())
          ) &#123;
            _counter &#x3D; 0;
          &#125; else &#123;
            if (--_counter &#x3D;&#x3D;&#x3D; 0) _done();
          &#125;
        &#125;
      &#125;,
      function (_err2) &#123;
        if (_hasResult2) throw _err2;
        if (_counter &gt; 0) &#123;
          if (
            2 &lt; _results.length &amp;&amp;
            ((_results.length &#x3D; 3),
            (_results[2] &#x3D; &#123; error: _err2 &#125;),
            _checkDone())
          ) &#123;
            _counter &#x3D; 0;
          &#125; else &#123;
            if (--_counter &#x3D;&#x3D;&#x3D; 0) _done();
          &#125;
        &#125;
      &#125;
    );
  &#125;
&#125; while (false);</code></pre>

<p>å‚è€ƒ</p>
<p><a href="https://github.com/webpack/tapable">tapable</a></p>
<p><a href="https://www.cnblogs.com/dennisj/p/14606902.html">webpack æ ¸å¿ƒæ¨¡å— tapable æºç è§£æ</a></p>
]]></content>
      <categories>
        <category>Webpack</category>
      </categories>
      <tags>
        <tag>Webpack</tag>
      </tags>
  </entry>
</search>
