<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, minimal-ui"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="format-detection" content="telephone=no, email=no"/><title>yarn workspaces (ShineShao)</title><meta name="description" content="前端 yarn workspaces 应用 ShineShao 博客"/><meta name="keywords" content="ShineShao freeshineit Next.js Blog "/><meta name="next-head-count" content="8"/><link rel="shortcut icon" href="https://www.nextjs.cn/static/favicon/favicon.ico"/><script>var _hmt = _hmt || [];(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?50c47ad58047f480726591cca679297b";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();</script><link rel="preload" href="/_next/static/css/9808abe97595e698.css" as="style"/><link rel="stylesheet" href="/_next/static/css/9808abe97595e698.css" data-n-g=""/><link rel="preload" href="/_next/static/css/533f50564cca5a0f.css" as="style"/><link rel="stylesheet" href="/_next/static/css/533f50564cca5a0f.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-dc0e1a98ad447e36.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-d719a31ca00eb19c.js" defer=""></script><script src="/_next/static/chunks/pages/_app-e39d184a87bb06f5.js" defer=""></script><script src="/_next/static/chunks/pages/blog/yarn/worksapces-01ea146b57fce961.js" defer=""></script><script src="/_next/static/4BTZEqipsAYOUZ2YrrXLX/_buildManifest.js" defer=""></script><script src="/_next/static/4BTZEqipsAYOUZ2YrrXLX/_ssgManifest.js" defer=""></script></head><body class="custom_class"><div id="__next" data-reactroot=""><div class="Layout_layout__vMu_3 main-mdx" style="width:100%"><header class="Layout_header__IaoaF"><div class="Layout_container__gktH6"><nav><ul><li><a href="/">Home</a></li><li><a href="/blog">Blog</a></li><li><a href="/readme">README</a></li></ul></nav><div class="Layout_right__v6_Oh"><div class="Layout_Theme__d6pd0">🌜</div><a href="https://github.com/freeshineit" target="_block"><img src="/static/images/ShineShao.jpg" alt="ShineShao" class="ShineShao_ShineShao__JZXYF" style="width:34px;height:34px;border-radius:50%"/></a></div></div></header><div class="Layout_main__evUHx" style="margin:0 auto"><div class="Cover_top__3shUC"><div class="Cover_coverWrapper__EHcKj"><div class="Cover_cover__anmEM" style="background-image:url(/static/images/bg/3.jpeg)"></div><div class="Cover_coverBg__vB_Og"></div><div class="Cover_dateWrapper__cx6Xo"><span class="Cover_date__Q1mZh"><span class="Cover_dateDay__RyIzT">05</span><span class="Cover_dateMonth__hW3W0">Aug</span><span class="Cover_dateMonth__hW3W0">2021</span></span><h1>yarn workspaces</h1></div></div><div class="Photographer_photographer__tesd0"><svg viewBox="0 0 1024 1024" version="1.1" width="1em" height="1em" fill="currentColor"><path d="M860.414581 207.449017 509.333781 207.449017c0-52.808332-43.003528-95.81186-95.81186-95.81186l-63.817235 0c-52.808332 0-95.81186 43.003528-95.81186 95.81186L158.424996 207.449017c-52.808332 0-95.81186 43.003528-95.81186 95.81186l0 510.53788c0 52.808332 43.003528 95.81186 95.81186 95.81186l701.989585 0c52.808332 0 95.81186-43.003528 95.81186-95.81186L956.22644 303.260877C956.054426 250.452545 913.050899 207.449017 860.414581 207.449017zM509.333781 749.981522c-105.616664 0-191.451705-85.835041-191.451705-191.451705s85.835041-191.451705 191.451705-191.451705 191.451705 85.835041 191.451705 191.451705S614.950445 749.981522 509.333781 749.981522zM812.422644 430.895347c-26.490173 0-47.819923-21.501764-47.819923-47.819923s21.501764-47.819923 47.819923-47.819923c26.490173 0 47.819923 21.501764 47.819923 47.819923S838.912817 430.895347 812.422644 430.895347z"></path></svg> <!-- -->ShineShao</div></div><div class="Content_content__KEvUj"><article><h2 id="说明" class="Heading_H2__kexLO h2-tag"><a href="/blog/yarn/worksapces#%E8%AF%B4%E6%98%8E"><svg class="icon" height="1em" width="1em" viewBox="0 0 16 16" aria-hidden="true" fill="currentcolor"><path d="M7.775 3.275C7.64252 3.41717 7.57039 3.60522 7.57382 3.79952C7.57725 3.99382 7.65596 4.1792 7.79337 4.31662C7.93079 4.45403 8.11617 4.53274 8.31047 4.53617C8.50477 4.5396 8.69282 4.46748 8.835 4.335L10.085 3.085C10.2708 2.89918 10.4914 2.75177 10.7342 2.65121C10.977 2.55064 11.2372 2.49888 11.5 2.49888C11.7628 2.49888 12.023 2.55064 12.2658 2.65121C12.5086 2.75177 12.7292 2.89918 12.915 3.085C13.1008 3.27082 13.2482 3.49142 13.3488 3.7342C13.4493 3.97699 13.5011 4.23721 13.5011 4.5C13.5011 4.76279 13.4493 5.023 13.3488 5.26579C13.2482 5.50857 13.1008 5.72917 12.915 5.915L10.415 8.415C10.2292 8.60095 10.0087 8.74847 9.76588 8.84911C9.52308 8.94976 9.26283 9.00157 9 9.00157C8.73716 9.00157 8.47691 8.94976 8.23411 8.84911C7.99132 8.74847 7.77074 8.60095 7.585 8.415C7.44282 8.28252 7.25477 8.21039 7.06047 8.21382C6.86617 8.21725 6.68079 8.29596 6.54337 8.43337C6.40596 8.57079 6.32725 8.75617 6.32382 8.95047C6.32039 9.14477 6.39252 9.33282 6.525 9.475C6.85001 9.80004 7.23586 10.0579 7.66052 10.2338C8.08518 10.4097 8.54034 10.5002 9 10.5002C9.45965 10.5002 9.91481 10.4097 10.3395 10.2338C10.7641 10.0579 11.15 9.80004 11.475 9.475L13.975 6.975C14.6314 6.31858 15.0002 5.4283 15.0002 4.5C15.0002 3.57169 14.6314 2.68141 13.975 2.025C13.3186 1.36858 12.4283 0.999817 11.5 0.999817C10.5717 0.999817 9.68141 1.36858 9.02499 2.025L7.775 3.275ZM3.085 12.915C2.89904 12.7292 2.75152 12.5087 2.65088 12.2659C2.55023 12.0231 2.49842 11.7628 2.49842 11.5C2.49842 11.2372 2.55023 10.9769 2.65088 10.7341C2.75152 10.4913 2.89904 10.2707 3.085 10.085L5.585 7.585C5.77074 7.39904 5.99132 7.25152 6.23411 7.15088C6.47691 7.05023 6.73716 6.99842 7 6.99842C7.26283 6.99842 7.52308 7.05023 7.76588 7.15088C8.00867 7.25152 8.22925 7.39904 8.415 7.585C8.55717 7.71748 8.74522 7.7896 8.93952 7.78617C9.13382 7.78274 9.3192 7.70403 9.45662 7.56662C9.59403 7.4292 9.67274 7.24382 9.67617 7.04952C9.6796 6.85522 9.60748 6.66717 9.475 6.525C9.14999 6.19995 8.76413 5.94211 8.33947 5.7662C7.91481 5.59029 7.45965 5.49974 7 5.49974C6.54034 5.49974 6.08518 5.59029 5.66052 5.7662C5.23586 5.94211 4.85001 6.19995 4.525 6.525L2.025 9.02499C1.36858 9.68141 0.999817 10.5717 0.999817 11.5C0.999817 12.4283 1.36858 13.3186 2.025 13.975C2.68141 14.6314 3.57169 15.0002 4.5 15.0002C5.4283 15.0002 6.31858 14.6314 6.975 13.975L8.225 12.725C8.35748 12.5828 8.4296 12.3948 8.42617 12.2005C8.42274 12.0062 8.34403 11.8208 8.20662 11.6834C8.0692 11.546 7.88382 11.4672 7.68952 11.4638C7.49522 11.4604 7.30717 11.5325 7.165 11.665L5.915 12.915C5.72925 13.1009 5.50867 13.2485 5.26588 13.3491C5.02308 13.4498 4.76283 13.5016 4.5 13.5016C4.23716 13.5016 3.97691 13.4498 3.73411 13.3491C3.49132 13.2485 3.27074 13.1009 3.085 12.915Z"></path></svg></a>说明</h2><p class="P_P__B5cWA p-tag"><a href="https://yarnpkg.com/features/workspaces" class="A_A__MIDyA a-tag">yarn Workspaces</a> 旨在简化 monorepos 的使用，以更具声明性的方式解决 yarn 链接的主要用例之一。简言之，它们允许您的多个项目一起生活在同一个存储库中，并相互交叉引用——对一个项目的源代码的任何修改都会立即应用于其他项目。</p><p class="P_P__B5cWA p-tag">首先，一些词汇：在工作区特性的上下文中，项目是组成工作区的整个目录树（通常是存储库本身）。工作区是由同一项目中您自己的源组成的本地包。最后，工作树是为列出自己的子工作空间的工作空间指定的名称。项目包含一个或多个工作树，这些工作树本身可能包含任意数量的工作空间。任何项目都至少包含一个工作区：根工作区。</p><p style="text-align:center;font-size:24px" class="P_P__B5cWA p-tag">Yarn Workspaces</p><p class="P_P__B5cWA p-tag"><img src="/static/images/yarn_workspaces.png" class="Img_Img__FTZrh img-tag"/></p><p style="text-align:center;font-size:12px;color:" class="P_P__B5cWA p-tag">https://engineering.brigad.co/react-native-monorepos-code-sharing-f6c08172b417</p><h2 id="创建" class="Heading_H2__kexLO h2-tag"><a href="/blog/yarn/worksapces#%E5%88%9B%E5%BB%BA"><svg class="icon" height="1em" width="1em" viewBox="0 0 16 16" aria-hidden="true" fill="currentcolor"><path d="M7.775 3.275C7.64252 3.41717 7.57039 3.60522 7.57382 3.79952C7.57725 3.99382 7.65596 4.1792 7.79337 4.31662C7.93079 4.45403 8.11617 4.53274 8.31047 4.53617C8.50477 4.5396 8.69282 4.46748 8.835 4.335L10.085 3.085C10.2708 2.89918 10.4914 2.75177 10.7342 2.65121C10.977 2.55064 11.2372 2.49888 11.5 2.49888C11.7628 2.49888 12.023 2.55064 12.2658 2.65121C12.5086 2.75177 12.7292 2.89918 12.915 3.085C13.1008 3.27082 13.2482 3.49142 13.3488 3.7342C13.4493 3.97699 13.5011 4.23721 13.5011 4.5C13.5011 4.76279 13.4493 5.023 13.3488 5.26579C13.2482 5.50857 13.1008 5.72917 12.915 5.915L10.415 8.415C10.2292 8.60095 10.0087 8.74847 9.76588 8.84911C9.52308 8.94976 9.26283 9.00157 9 9.00157C8.73716 9.00157 8.47691 8.94976 8.23411 8.84911C7.99132 8.74847 7.77074 8.60095 7.585 8.415C7.44282 8.28252 7.25477 8.21039 7.06047 8.21382C6.86617 8.21725 6.68079 8.29596 6.54337 8.43337C6.40596 8.57079 6.32725 8.75617 6.32382 8.95047C6.32039 9.14477 6.39252 9.33282 6.525 9.475C6.85001 9.80004 7.23586 10.0579 7.66052 10.2338C8.08518 10.4097 8.54034 10.5002 9 10.5002C9.45965 10.5002 9.91481 10.4097 10.3395 10.2338C10.7641 10.0579 11.15 9.80004 11.475 9.475L13.975 6.975C14.6314 6.31858 15.0002 5.4283 15.0002 4.5C15.0002 3.57169 14.6314 2.68141 13.975 2.025C13.3186 1.36858 12.4283 0.999817 11.5 0.999817C10.5717 0.999817 9.68141 1.36858 9.02499 2.025L7.775 3.275ZM3.085 12.915C2.89904 12.7292 2.75152 12.5087 2.65088 12.2659C2.55023 12.0231 2.49842 11.7628 2.49842 11.5C2.49842 11.2372 2.55023 10.9769 2.65088 10.7341C2.75152 10.4913 2.89904 10.2707 3.085 10.085L5.585 7.585C5.77074 7.39904 5.99132 7.25152 6.23411 7.15088C6.47691 7.05023 6.73716 6.99842 7 6.99842C7.26283 6.99842 7.52308 7.05023 7.76588 7.15088C8.00867 7.25152 8.22925 7.39904 8.415 7.585C8.55717 7.71748 8.74522 7.7896 8.93952 7.78617C9.13382 7.78274 9.3192 7.70403 9.45662 7.56662C9.59403 7.4292 9.67274 7.24382 9.67617 7.04952C9.6796 6.85522 9.60748 6.66717 9.475 6.525C9.14999 6.19995 8.76413 5.94211 8.33947 5.7662C7.91481 5.59029 7.45965 5.49974 7 5.49974C6.54034 5.49974 6.08518 5.59029 5.66052 5.7662C5.23586 5.94211 4.85001 6.19995 4.525 6.525L2.025 9.02499C1.36858 9.68141 0.999817 10.5717 0.999817 11.5C0.999817 12.4283 1.36858 13.3186 2.025 13.975C2.68141 14.6314 3.57169 15.0002 4.5 15.0002C5.4283 15.0002 6.31858 14.6314 6.975 13.975L8.225 12.725C8.35748 12.5828 8.4296 12.3948 8.42617 12.2005C8.42274 12.0062 8.34403 11.8208 8.20662 11.6834C8.0692 11.546 7.88382 11.4672 7.68952 11.4638C7.49522 11.4604 7.30717 11.5325 7.165 11.665L5.915 12.915C5.72925 13.1009 5.50867 13.2485 5.26588 13.3491C5.02308 13.4498 4.76283 13.5016 4.5 13.5016C4.23716 13.5016 3.97691 13.4498 3.73411 13.3491C3.49132 13.2485 3.27074 13.1009 3.085 12.915Z"></path></svg></a>创建</h2><ul class="List_Ul__3CIZX ul-tag"><li class="li-tag">初始化</li></ul><div class="Pre_Pre__qlOYF pre-tag"><pre class="Code_pre__YasK9 pre-tag prism-code language-bash " style="background-color:#2a2734;color:#9a86fd;overflow:scroll;margin-top:20px;margin-bottom:20px;padding:16px"><span class="Code_language__rKJ5i">bash</span><span class="Code_languageCopy__HEVTF"><svg viewBox="0 0 1024 1024" version="1.1" width="1em" height="1em" fill="currentColor"><path d="M768 682.666667V170.666667a85.333333 85.333333 0 0 0-85.333333-85.333334H170.666667a85.333333 85.333333 0 0 0-85.333334 85.333334v512a85.333333 85.333333 0 0 0 85.333334 85.333333h512a85.333333 85.333333 0 0 0 85.333333-85.333333zM170.666667 170.666667h512v512H170.666667z m682.666666 85.333333v512a85.333333 85.333333 0 0 1-85.333333 85.333333H256a85.333333 85.333333 0 0 0 85.333333 85.333334h426.666667a170.666667 170.666667 0 0 0 170.666667-170.666667V341.333333a85.333333 85.333333 0 0 0-85.333334-85.333333z"></path></svg></span><div><div class="token-line"><span class="token function" style="display:inline-block">mkdir</span><span class="token plain" style="display:inline-block"> yarn_workspaces </span><span class="token operator" style="display:inline-block">&amp;&amp;</span><span class="token plain" style="display:inline-block"> </span><span class="token builtin class-name" style="display:inline-block">cd</span><span class="token plain" style="display:inline-block"> yarn_workspaces</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block"># 初始化</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block"># 配置 package.json</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token function" style="display:inline-block">yarn</span><span class="token plain" style="display:inline-block"> init</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token function" style="display:inline-block">mkdir</span><span class="token plain" style="display:inline-block"> packages</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block"># 配置 workspaces</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block"># &quot;workspaces&quot;: [</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block">#  &quot;packages/*&quot;</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block"># ]</span></div></div></pre></div><ul class="List_Ul__3CIZX ul-tag"><li class="li-tag">配置根目录下<code>package.json</code></li></ul><div class="Pre_Pre__qlOYF pre-tag"><pre class="Code_pre__YasK9 pre-tag prism-code language-json " style="background-color:#2a2734;color:#9a86fd;overflow:scroll;margin-top:20px;margin-bottom:20px;padding:16px"><span class="Code_language__rKJ5i">json</span><span class="Code_languageCopy__HEVTF"><svg viewBox="0 0 1024 1024" version="1.1" width="1em" height="1em" fill="currentColor"><path d="M768 682.666667V170.666667a85.333333 85.333333 0 0 0-85.333333-85.333334H170.666667a85.333333 85.333333 0 0 0-85.333334 85.333334v512a85.333333 85.333333 0 0 0 85.333334 85.333333h512a85.333333 85.333333 0 0 0 85.333333-85.333333zM170.666667 170.666667h512v512H170.666667z m682.666666 85.333333v512a85.333333 85.333333 0 0 1-85.333333 85.333333H256a85.333333 85.333333 0 0 0 85.333333 85.333334h426.666667a170.666667 170.666667 0 0 0 170.666667-170.666667V341.333333a85.333333 85.333333 0 0 0-85.333334-85.333333z"></path></svg></span><div><div class="token-line"><span class="token punctuation" style="display:inline-block">{</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">  </span><span class="token property" style="display:inline-block">&quot;private&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token boolean" style="display:inline-block">true</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">  </span><span class="token property" style="display:inline-block">&quot;workspaces&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token punctuation" style="display:inline-block">[</span><span class="token string" style="display:inline-block">&quot;packages/*&quot;</span><span class="token punctuation" style="display:inline-block">]</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token punctuation" style="display:inline-block">}</span></div></div></pre></div><ul class="List_Ul__3CIZX ul-tag"><li class="li-tag"><p class="P_P__B5cWA p-tag">create common package (components、utils...)</p><ul class="List_Ul__3CIZX ul-tag"><li class="li-tag">初始化 <code>@mono/common</code> package</li></ul><div class="Pre_Pre__qlOYF pre-tag"><pre class="Code_pre__YasK9 pre-tag prism-code language-bash " style="background-color:#2a2734;color:#9a86fd;overflow:scroll;margin-top:20px;margin-bottom:20px;padding:16px"><span class="Code_language__rKJ5i">bash</span><span class="Code_languageCopy__HEVTF"><svg viewBox="0 0 1024 1024" version="1.1" width="1em" height="1em" fill="currentColor"><path d="M768 682.666667V170.666667a85.333333 85.333333 0 0 0-85.333333-85.333334H170.666667a85.333333 85.333333 0 0 0-85.333334 85.333334v512a85.333333 85.333333 0 0 0 85.333334 85.333333h512a85.333333 85.333333 0 0 0 85.333333-85.333333zM170.666667 170.666667h512v512H170.666667z m682.666666 85.333333v512a85.333333 85.333333 0 0 1-85.333333 85.333333H256a85.333333 85.333333 0 0 0 85.333333 85.333334h426.666667a170.666667 170.666667 0 0 0 170.666667-170.666667V341.333333a85.333333 85.333333 0 0 0-85.333334-85.333333z"></path></svg></span><div><div class="token-line"><span class="token builtin class-name" style="display:inline-block">cd</span><span class="token plain" style="display:inline-block"> packages </span><span class="token operator" style="display:inline-block">&amp;&amp;</span><span class="token plain" style="display:inline-block"> </span><span class="token function" style="display:inline-block">mkdir</span><span class="token plain" style="display:inline-block"> common</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token function" style="display:inline-block">yarn</span><span class="token plain" style="display:inline-block"> init -y</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token function" style="display:inline-block">mkdir</span><span class="token plain" style="display:inline-block"> components </span><span class="token operator" style="display:inline-block">&amp;&amp;</span><span class="token plain" style="display:inline-block"> </span><span class="token function" style="display:inline-block">mkdir</span><span class="token plain" style="display:inline-block"> utils</span></div></div></pre></div><ul class="List_Ul__3CIZX ul-tag"><li class="li-tag">配置 <code>package.json</code></li></ul><div class="Pre_Pre__qlOYF pre-tag"><pre class="Code_pre__YasK9 pre-tag prism-code language-json " style="background-color:#2a2734;color:#9a86fd;overflow:scroll;margin-top:20px;margin-bottom:20px;padding:16px"><span class="Code_language__rKJ5i">json</span><span class="Code_languageCopy__HEVTF"><svg viewBox="0 0 1024 1024" version="1.1" width="1em" height="1em" fill="currentColor"><path d="M768 682.666667V170.666667a85.333333 85.333333 0 0 0-85.333333-85.333334H170.666667a85.333333 85.333333 0 0 0-85.333334 85.333334v512a85.333333 85.333333 0 0 0 85.333334 85.333333h512a85.333333 85.333333 0 0 0 85.333333-85.333333zM170.666667 170.666667h512v512H170.666667z m682.666666 85.333333v512a85.333333 85.333333 0 0 1-85.333333 85.333333H256a85.333333 85.333333 0 0 0 85.333333 85.333334h426.666667a170.666667 170.666667 0 0 0 170.666667-170.666667V341.333333a85.333333 85.333333 0 0 0-85.333334-85.333333z"></path></svg></span><div><div class="token-line"><span class="token punctuation" style="display:inline-block">{</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">  </span><span class="token property" style="display:inline-block">&quot;name&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;@mono/common&quot;</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">  </span><span class="token property" style="display:inline-block">&quot;main&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;index.ts&quot;</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token punctuation" style="display:inline-block">}</span></div></div></pre></div><p class="P_P__B5cWA p-tag">注：由于整个项目都是基于<code>typescript</code>的, 所以 <code>main</code> 就直接指定 <code>index.ts</code>。如果要发布到 npm 上最好还是使用<code>.js</code>。</p></li><li class="li-tag"><p class="P_P__B5cWA p-tag">create mobile web app (html5)</p><ul class="List_Ul__3CIZX ul-tag"><li class="li-tag">初始化 app</li></ul><div class="Pre_Pre__qlOYF pre-tag"><pre class="Code_pre__YasK9 pre-tag prism-code language-bash " style="background-color:#2a2734;color:#9a86fd;overflow:scroll;margin-top:20px;margin-bottom:20px;padding:16px"><span class="Code_language__rKJ5i">bash</span><span class="Code_languageCopy__HEVTF"><svg viewBox="0 0 1024 1024" version="1.1" width="1em" height="1em" fill="currentColor"><path d="M768 682.666667V170.666667a85.333333 85.333333 0 0 0-85.333333-85.333334H170.666667a85.333333 85.333333 0 0 0-85.333334 85.333334v512a85.333333 85.333333 0 0 0 85.333334 85.333333h512a85.333333 85.333333 0 0 0 85.333333-85.333333zM170.666667 170.666667h512v512H170.666667z m682.666666 85.333333v512a85.333333 85.333333 0 0 1-85.333333 85.333333H256a85.333333 85.333333 0 0 0 85.333333 85.333334h426.666667a170.666667 170.666667 0 0 0 170.666667-170.666667V341.333333a85.333333 85.333333 0 0 0-85.333334-85.333333z"></path></svg></span><div><div class="token-line"><span class="token builtin class-name" style="display:inline-block">cd</span><span class="token plain" style="display:inline-block"> packages </span><span class="token operator" style="display:inline-block">&amp;&amp;</span><span class="token plain" style="display:inline-block"> </span><span class="token function" style="display:inline-block">mkdir</span><span class="token plain" style="display:inline-block"> mobile</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block"># 创建 index.html</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token function" style="display:inline-block">touch</span><span class="token plain" style="display:inline-block"> index.html</span></div></div></pre></div></li><li class="li-tag"><p class="P_P__B5cWA p-tag">create web app (react spa)</p><ul class="List_Ul__3CIZX ul-tag"><li class="li-tag">初始化 app</li></ul><div class="Pre_Pre__qlOYF pre-tag"><pre class="Code_pre__YasK9 pre-tag prism-code language-bash " style="background-color:#2a2734;color:#9a86fd;overflow:scroll;margin-top:20px;margin-bottom:20px;padding:16px"><span class="Code_language__rKJ5i">bash</span><span class="Code_languageCopy__HEVTF"><svg viewBox="0 0 1024 1024" version="1.1" width="1em" height="1em" fill="currentColor"><path d="M768 682.666667V170.666667a85.333333 85.333333 0 0 0-85.333333-85.333334H170.666667a85.333333 85.333333 0 0 0-85.333334 85.333334v512a85.333333 85.333333 0 0 0 85.333334 85.333333h512a85.333333 85.333333 0 0 0 85.333333-85.333333zM170.666667 170.666667h512v512H170.666667z m682.666666 85.333333v512a85.333333 85.333333 0 0 1-85.333333 85.333333H256a85.333333 85.333333 0 0 0 85.333333 85.333334h426.666667a170.666667 170.666667 0 0 0 170.666667-170.666667V341.333333a85.333333 85.333333 0 0 0-85.333334-85.333333z"></path></svg></span><div><div class="token-line"><span class="token builtin class-name" style="display:inline-block">cd</span><span class="token plain" style="display:inline-block"> packages</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block"># 创建 react spa app</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token function" style="display:inline-block">yarn</span><span class="token plain" style="display:inline-block"> create react-app my-app --template typescript</span></div></div></pre></div><ul class="List_Ul__3CIZX ul-tag"><li class="li-tag">scripts</li></ul><p class="P_P__B5cWA p-tag">在项目根目录下<code>package.json</code>中<code>scripts</code>添加下面脚本</p><div class="Pre_Pre__qlOYF pre-tag"><pre class="Code_pre__YasK9 pre-tag prism-code language-json " style="background-color:#2a2734;color:#9a86fd;overflow:scroll;margin-top:20px;margin-bottom:20px;padding:16px"><span class="Code_language__rKJ5i">json</span><span class="Code_languageCopy__HEVTF"><svg viewBox="0 0 1024 1024" version="1.1" width="1em" height="1em" fill="currentColor"><path d="M768 682.666667V170.666667a85.333333 85.333333 0 0 0-85.333333-85.333334H170.666667a85.333333 85.333333 0 0 0-85.333334 85.333334v512a85.333333 85.333333 0 0 0 85.333334 85.333333h512a85.333333 85.333333 0 0 0 85.333333-85.333333zM170.666667 170.666667h512v512H170.666667z m682.666666 85.333333v512a85.333333 85.333333 0 0 1-85.333333 85.333333H256a85.333333 85.333333 0 0 0 85.333333 85.333334h426.666667a170.666667 170.666667 0 0 0 170.666667-170.666667V341.333333a85.333333 85.333333 0 0 0-85.333334-85.333333z"></path></svg></span><div><div class="token-line"><span class="token punctuation" style="display:inline-block">{</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">  </span><span class="token property" style="display:inline-block">&quot;react-sap-app&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;yarn workspace react-spa-app start&quot;</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token punctuation" style="display:inline-block">}</span></div></div></pre></div><ul class="List_Ul__3CIZX ul-tag"><li class="li-tag">配置使用本地 package</li></ul><div class="Pre_Pre__qlOYF pre-tag"><pre class="Code_pre__YasK9 pre-tag prism-code language-bash " style="background-color:#2a2734;color:#9a86fd;overflow:scroll;margin-top:20px;margin-bottom:20px;padding:16px"><span class="Code_language__rKJ5i">bash</span><span class="Code_languageCopy__HEVTF"><svg viewBox="0 0 1024 1024" version="1.1" width="1em" height="1em" fill="currentColor"><path d="M768 682.666667V170.666667a85.333333 85.333333 0 0 0-85.333333-85.333334H170.666667a85.333333 85.333333 0 0 0-85.333334 85.333334v512a85.333333 85.333333 0 0 0 85.333334 85.333333h512a85.333333 85.333333 0 0 0 85.333333-85.333333zM170.666667 170.666667h512v512H170.666667z m682.666666 85.333333v512a85.333333 85.333333 0 0 1-85.333333 85.333333H256a85.333333 85.333333 0 0 0 85.333333 85.333334h426.666667a170.666667 170.666667 0 0 0 170.666667-170.666667V341.333333a85.333333 85.333333 0 0 0-85.333334-85.333333z"></path></svg></span><div><div class="token-line"><span class="token comment" style="display:inline-block"># 安装 @craco/craco</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block"># 在不执行`eject`的条件下注入webpacke等 配置</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token function" style="display:inline-block">yarn</span><span class="token plain" style="display:inline-block"> </span><span class="token function" style="display:inline-block">add</span><span class="token plain" style="display:inline-block"> @craco/craco -D</span></div></div></pre></div><p class="P_P__B5cWA p-tag">在<code>react-spa-app</code>根目录下新建创建<code>craco.config.js</code>文件</p><div class="Pre_Pre__qlOYF pre-tag"><pre class="Code_pre__YasK9 pre-tag prism-code language-js " style="background-color:#2a2734;color:#9a86fd;overflow:scroll;margin-top:20px;margin-bottom:20px;padding:16px"><span class="Code_language__rKJ5i">js</span><span class="Code_languageCopy__HEVTF"><svg viewBox="0 0 1024 1024" version="1.1" width="1em" height="1em" fill="currentColor"><path d="M768 682.666667V170.666667a85.333333 85.333333 0 0 0-85.333333-85.333334H170.666667a85.333333 85.333333 0 0 0-85.333334 85.333334v512a85.333333 85.333333 0 0 0 85.333334 85.333333h512a85.333333 85.333333 0 0 0 85.333333-85.333333zM170.666667 170.666667h512v512H170.666667z m682.666666 85.333333v512a85.333333 85.333333 0 0 1-85.333333 85.333333H256a85.333333 85.333333 0 0 0 85.333333 85.333334h426.666667a170.666667 170.666667 0 0 0 170.666667-170.666667V341.333333a85.333333 85.333333 0 0 0-85.333334-85.333333z"></path></svg></span><div><div class="token-line"><span class="token keyword" style="display:inline-block">const</span><span class="token plain" style="display:inline-block"> path </span><span class="token operator" style="display:inline-block">=</span><span class="token plain" style="display:inline-block"> </span><span class="token function" style="display:inline-block">require</span><span class="token punctuation" style="display:inline-block">(</span><span class="token string" style="display:inline-block">&quot;path&quot;</span><span class="token punctuation" style="display:inline-block">)</span><span class="token punctuation" style="display:inline-block">;</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token keyword" style="display:inline-block">const</span><span class="token plain" style="display:inline-block"> </span><span class="token punctuation" style="display:inline-block">{</span><span class="token plain" style="display:inline-block"> getLoader</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"> loaderByName </span><span class="token punctuation" style="display:inline-block">}</span><span class="token plain" style="display:inline-block"> </span><span class="token operator" style="display:inline-block">=</span><span class="token plain" style="display:inline-block"> </span><span class="token function" style="display:inline-block">require</span><span class="token punctuation" style="display:inline-block">(</span><span class="token string" style="display:inline-block">&quot;@craco/craco&quot;</span><span class="token punctuation" style="display:inline-block">)</span><span class="token punctuation" style="display:inline-block">;</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block">// 配置包括根目录以外文件路径</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block">// absolutePath 包名 `@mono/common`</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block">// 在`react-spa-app`项目中可以直接使用 import nameFn from &quot;@mono/common&quot;</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token keyword" style="display:inline-block">const</span><span class="token plain" style="display:inline-block"> absolutePath </span><span class="token operator" style="display:inline-block">=</span><span class="token plain" style="display:inline-block"> path</span><span class="token punctuation" style="display:inline-block">.</span><span class="token method function property-access" style="display:inline-block">join</span><span class="token punctuation" style="display:inline-block">(</span><span class="token plain" style="display:inline-block">__dirname</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;../common&quot;</span><span class="token punctuation" style="display:inline-block">)</span><span class="token punctuation" style="display:inline-block">;</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain" style="display:inline-block">module</span><span class="token punctuation" style="display:inline-block">.</span><span class="token property-access" style="display:inline-block">exports</span><span class="token plain" style="display:inline-block"> </span><span class="token operator" style="display:inline-block">=</span><span class="token plain" style="display:inline-block"> </span><span class="token punctuation" style="display:inline-block">{</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">  </span><span class="token literal-property property" style="display:inline-block">webpack</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token punctuation" style="display:inline-block">{</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    </span><span class="token literal-property property" style="display:inline-block">alias</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token punctuation" style="display:inline-block">{</span><span class="token punctuation" style="display:inline-block">}</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    </span><span class="token literal-property property" style="display:inline-block">plugins</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token punctuation" style="display:inline-block">[</span><span class="token punctuation" style="display:inline-block">]</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    </span><span class="token function-variable function" style="display:inline-block">configure</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token punctuation" style="display:inline-block">(</span><span class="token parameter" style="display:inline-block">webpackConfig</span><span class="token parameter punctuation" style="display:inline-block">,</span><span class="token parameter" style="display:inline-block"> </span><span class="token parameter punctuation" style="display:inline-block">{</span><span class="token parameter" style="display:inline-block"> env</span><span class="token parameter punctuation" style="display:inline-block">,</span><span class="token parameter" style="display:inline-block"> paths </span><span class="token parameter punctuation" style="display:inline-block">}</span><span class="token punctuation" style="display:inline-block">)</span><span class="token plain" style="display:inline-block"> </span><span class="token arrow operator" style="display:inline-block">=&gt;</span><span class="token plain" style="display:inline-block"> </span><span class="token punctuation" style="display:inline-block">{</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">      </span><span class="token keyword" style="display:inline-block">const</span><span class="token plain" style="display:inline-block"> </span><span class="token punctuation" style="display:inline-block">{</span><span class="token plain" style="display:inline-block"> isFound</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"> match </span><span class="token punctuation" style="display:inline-block">}</span><span class="token plain" style="display:inline-block"> </span><span class="token operator" style="display:inline-block">=</span><span class="token plain" style="display:inline-block"> </span><span class="token function" style="display:inline-block">getLoader</span><span class="token punctuation" style="display:inline-block">(</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">        webpackConfig</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">        </span><span class="token function" style="display:inline-block">loaderByName</span><span class="token punctuation" style="display:inline-block">(</span><span class="token string" style="display:inline-block">&quot;babel-loader&quot;</span><span class="token punctuation" style="display:inline-block">)</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">      </span><span class="token punctuation" style="display:inline-block">)</span><span class="token punctuation" style="display:inline-block">;</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">      </span><span class="token keyword control-flow" style="display:inline-block">if</span><span class="token plain" style="display:inline-block"> </span><span class="token punctuation" style="display:inline-block">(</span><span class="token plain" style="display:inline-block">isFound</span><span class="token punctuation" style="display:inline-block">)</span><span class="token plain" style="display:inline-block"> </span><span class="token punctuation" style="display:inline-block">{</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">        </span><span class="token keyword" style="display:inline-block">const</span><span class="token plain" style="display:inline-block"> include </span><span class="token operator" style="display:inline-block">=</span><span class="token plain" style="display:inline-block"> </span><span class="token known-class-name class-name" style="display:inline-block">Array</span><span class="token punctuation" style="display:inline-block">.</span><span class="token method function property-access" style="display:inline-block">isArray</span><span class="token punctuation" style="display:inline-block">(</span><span class="token plain" style="display:inline-block">match</span><span class="token punctuation" style="display:inline-block">.</span><span class="token property-access" style="display:inline-block">loader</span><span class="token punctuation" style="display:inline-block">.</span><span class="token property-access" style="display:inline-block">include</span><span class="token punctuation" style="display:inline-block">)</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">          </span><span class="token operator" style="display:inline-block">?</span><span class="token plain" style="display:inline-block"> match</span><span class="token punctuation" style="display:inline-block">.</span><span class="token property-access" style="display:inline-block">loader</span><span class="token punctuation" style="display:inline-block">.</span><span class="token property-access" style="display:inline-block">include</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">          </span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token punctuation" style="display:inline-block">[</span><span class="token plain" style="display:inline-block">match</span><span class="token punctuation" style="display:inline-block">.</span><span class="token property-access" style="display:inline-block">loader</span><span class="token punctuation" style="display:inline-block">.</span><span class="token property-access" style="display:inline-block">include</span><span class="token punctuation" style="display:inline-block">]</span><span class="token punctuation" style="display:inline-block">;</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">        match</span><span class="token punctuation" style="display:inline-block">.</span><span class="token property-access" style="display:inline-block">loader</span><span class="token punctuation" style="display:inline-block">.</span><span class="token property-access" style="display:inline-block">include</span><span class="token plain" style="display:inline-block"> </span><span class="token operator" style="display:inline-block">=</span><span class="token plain" style="display:inline-block"> include</span><span class="token punctuation" style="display:inline-block">.</span><span class="token property-access" style="display:inline-block">concat</span><span class="token punctuation" style="display:inline-block">[</span><span class="token plain" style="display:inline-block">absolutePath</span><span class="token punctuation" style="display:inline-block">]</span><span class="token punctuation" style="display:inline-block">;</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">      </span><span class="token punctuation" style="display:inline-block">}</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">      </span><span class="token keyword control-flow" style="display:inline-block">return</span><span class="token plain" style="display:inline-block"> webpackConfig</span><span class="token punctuation" style="display:inline-block">;</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    </span><span class="token punctuation" style="display:inline-block">}</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">  </span><span class="token punctuation" style="display:inline-block">}</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token punctuation" style="display:inline-block">}</span><span class="token punctuation" style="display:inline-block">;</span></div></div></pre></div></li><li class="li-tag"><p class="P_P__B5cWA p-tag">create ssr web app (next.js)</p><ul class="List_Ul__3CIZX ul-tag"><li class="li-tag">初始化 ssr web app</li></ul><div class="Pre_Pre__qlOYF pre-tag"><pre class="Code_pre__YasK9 pre-tag prism-code language-bash " style="background-color:#2a2734;color:#9a86fd;overflow:scroll;margin-top:20px;margin-bottom:20px;padding:16px"><span class="Code_language__rKJ5i">bash</span><span class="Code_languageCopy__HEVTF"><svg viewBox="0 0 1024 1024" version="1.1" width="1em" height="1em" fill="currentColor"><path d="M768 682.666667V170.666667a85.333333 85.333333 0 0 0-85.333333-85.333334H170.666667a85.333333 85.333333 0 0 0-85.333334 85.333334v512a85.333333 85.333333 0 0 0 85.333334 85.333333h512a85.333333 85.333333 0 0 0 85.333333-85.333333zM170.666667 170.666667h512v512H170.666667z m682.666666 85.333333v512a85.333333 85.333333 0 0 1-85.333333 85.333333H256a85.333333 85.333333 0 0 0 85.333333 85.333334h426.666667a170.666667 170.666667 0 0 0 170.666667-170.666667V341.333333a85.333333 85.333333 0 0 0-85.333334-85.333333z"></path></svg></span><div><div class="token-line"><span class="token builtin class-name" style="display:inline-block">cd</span><span class="token plain" style="display:inline-block"> packages</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block"># 创建 react ssr app</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token function" style="display:inline-block">yarn</span><span class="token plain" style="display:inline-block"> create next-app --example with-typescript nextjs-app</span></div></div></pre></div><ul class="List_Ul__3CIZX ul-tag"><li class="li-tag">scripts</li></ul><p class="P_P__B5cWA p-tag">在项目根目录下<code>package.json</code>中<code>scripts</code>添加下面脚本</p><div class="Pre_Pre__qlOYF pre-tag"><pre class="Code_pre__YasK9 pre-tag prism-code language-json " style="background-color:#2a2734;color:#9a86fd;overflow:scroll;margin-top:20px;margin-bottom:20px;padding:16px"><span class="Code_language__rKJ5i">json</span><span class="Code_languageCopy__HEVTF"><svg viewBox="0 0 1024 1024" version="1.1" width="1em" height="1em" fill="currentColor"><path d="M768 682.666667V170.666667a85.333333 85.333333 0 0 0-85.333333-85.333334H170.666667a85.333333 85.333333 0 0 0-85.333334 85.333334v512a85.333333 85.333333 0 0 0 85.333334 85.333333h512a85.333333 85.333333 0 0 0 85.333333-85.333333zM170.666667 170.666667h512v512H170.666667z m682.666666 85.333333v512a85.333333 85.333333 0 0 1-85.333333 85.333333H256a85.333333 85.333333 0 0 0 85.333333 85.333334h426.666667a170.666667 170.666667 0 0 0 170.666667-170.666667V341.333333a85.333333 85.333333 0 0 0-85.333334-85.333333z"></path></svg></span><div><div class="token-line"><span class="token punctuation" style="display:inline-block">{</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">  </span><span class="token property" style="display:inline-block">&quot;react-sap-app&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;yarn workspace nextjs-app dev&quot;</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token punctuation" style="display:inline-block">}</span></div></div></pre></div><ul class="List_Ul__3CIZX ul-tag"><li class="li-tag">配置使用本地 package</li></ul><div class="Pre_Pre__qlOYF pre-tag"><pre class="Code_pre__YasK9 pre-tag prism-code language-bash " style="background-color:#2a2734;color:#9a86fd;overflow:scroll;margin-top:20px;margin-bottom:20px;padding:16px"><span class="Code_language__rKJ5i">bash</span><span class="Code_languageCopy__HEVTF"><svg viewBox="0 0 1024 1024" version="1.1" width="1em" height="1em" fill="currentColor"><path d="M768 682.666667V170.666667a85.333333 85.333333 0 0 0-85.333333-85.333334H170.666667a85.333333 85.333333 0 0 0-85.333334 85.333334v512a85.333333 85.333333 0 0 0 85.333334 85.333333h512a85.333333 85.333333 0 0 0 85.333333-85.333333zM170.666667 170.666667h512v512H170.666667z m682.666666 85.333333v512a85.333333 85.333333 0 0 1-85.333333 85.333333H256a85.333333 85.333333 0 0 0 85.333333 85.333334h426.666667a170.666667 170.666667 0 0 0 170.666667-170.666667V341.333333a85.333333 85.333333 0 0 0-85.333334-85.333333z"></path></svg></span><div><div class="token-line"><span class="token comment" style="display:inline-block"># 注意⚠️ `next-transpile-modules`版本有很大区别</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block"># https://www.npmjs.com/package/next-transpile-modules#user-content-compatibility-table</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token function" style="display:inline-block">yarn</span><span class="token plain" style="display:inline-block"> </span><span class="token function" style="display:inline-block">add</span><span class="token plain" style="display:inline-block"> next-transpile-modules -D</span></div></div></pre></div><p class="P_P__B5cWA p-tag">在<code>nextjs-app</code>根目录下新建创建<code>next.config.js</code>文件</p><div class="Pre_Pre__qlOYF pre-tag"><pre class="Code_pre__YasK9 pre-tag prism-code language-js " style="background-color:#2a2734;color:#9a86fd;overflow:scroll;margin-top:20px;margin-bottom:20px;padding:16px"><span class="Code_language__rKJ5i">js</span><span class="Code_languageCopy__HEVTF"><svg viewBox="0 0 1024 1024" version="1.1" width="1em" height="1em" fill="currentColor"><path d="M768 682.666667V170.666667a85.333333 85.333333 0 0 0-85.333333-85.333334H170.666667a85.333333 85.333333 0 0 0-85.333334 85.333334v512a85.333333 85.333333 0 0 0 85.333334 85.333333h512a85.333333 85.333333 0 0 0 85.333333-85.333333zM170.666667 170.666667h512v512H170.666667z m682.666666 85.333333v512a85.333333 85.333333 0 0 1-85.333333 85.333333H256a85.333333 85.333333 0 0 0 85.333333 85.333334h426.666667a170.666667 170.666667 0 0 0 170.666667-170.666667V341.333333a85.333333 85.333333 0 0 0-85.333334-85.333333z"></path></svg></span><div><div class="token-line"><span class="token comment" style="display:inline-block">// pass the modules you would like to see transpiled</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token keyword" style="display:inline-block">const</span><span class="token plain" style="display:inline-block"> withTM </span><span class="token operator" style="display:inline-block">=</span><span class="token plain" style="display:inline-block"> </span><span class="token function" style="display:inline-block">require</span><span class="token punctuation" style="display:inline-block">(</span><span class="token string" style="display:inline-block">&quot;next-transpile-modules&quot;</span><span class="token punctuation" style="display:inline-block">)</span><span class="token punctuation" style="display:inline-block">(</span><span class="token punctuation" style="display:inline-block">[</span><span class="token string" style="display:inline-block">&quot;@mono/common&quot;</span><span class="token punctuation" style="display:inline-block">]</span><span class="token punctuation" style="display:inline-block">)</span><span class="token punctuation" style="display:inline-block">;</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">module</span><span class="token punctuation" style="display:inline-block">.</span><span class="token property-access" style="display:inline-block">exports</span><span class="token plain" style="display:inline-block"> </span><span class="token operator" style="display:inline-block">=</span><span class="token plain" style="display:inline-block"> </span><span class="token function" style="display:inline-block">withTM</span><span class="token punctuation" style="display:inline-block">(</span><span class="token punctuation" style="display:inline-block">)</span><span class="token punctuation" style="display:inline-block">;</span></div></div></pre></div></li><li class="li-tag"><p class="P_P__B5cWA p-tag">配置</p></li><li class="li-tag"><p class="P_P__B5cWA p-tag">create service app (koa service)</p><ul class="List_Ul__3CIZX ul-tag"><li class="li-tag">初始化 service app</li></ul><div class="Pre_Pre__qlOYF pre-tag"><pre class="Code_pre__YasK9 pre-tag prism-code language-bash " style="background-color:#2a2734;color:#9a86fd;overflow:scroll;margin-top:20px;margin-bottom:20px;padding:16px"><span class="Code_language__rKJ5i">bash</span><span class="Code_languageCopy__HEVTF"><svg viewBox="0 0 1024 1024" version="1.1" width="1em" height="1em" fill="currentColor"><path d="M768 682.666667V170.666667a85.333333 85.333333 0 0 0-85.333333-85.333334H170.666667a85.333333 85.333333 0 0 0-85.333334 85.333334v512a85.333333 85.333333 0 0 0 85.333334 85.333333h512a85.333333 85.333333 0 0 0 85.333333-85.333333zM170.666667 170.666667h512v512H170.666667z m682.666666 85.333333v512a85.333333 85.333333 0 0 1-85.333333 85.333333H256a85.333333 85.333333 0 0 0 85.333333 85.333334h426.666667a170.666667 170.666667 0 0 0 170.666667-170.666667V341.333333a85.333333 85.333333 0 0 0-85.333334-85.333333z"></path></svg></span><div><div class="token-line"><span class="token builtin class-name" style="display:inline-block">cd</span><span class="token plain" style="display:inline-block"> packages </span><span class="token operator" style="display:inline-block">&amp;&amp;</span><span class="token plain" style="display:inline-block"> </span><span class="token function" style="display:inline-block">mkdir</span><span class="token plain" style="display:inline-block"> koa-service-app </span><span class="token operator" style="display:inline-block">&amp;&amp;</span><span class="token plain" style="display:inline-block"> </span><span class="token builtin class-name" style="display:inline-block">cd</span><span class="token plain" style="display:inline-block"> koa-service-app</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token function" style="display:inline-block">yarn</span><span class="token plain" style="display:inline-block"> init -y</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block"># 创建服务入口</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token function" style="display:inline-block">touch</span><span class="token plain" style="display:inline-block"> server.ts</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token function" style="display:inline-block">yarn</span><span class="token plain" style="display:inline-block"> </span><span class="token function" style="display:inline-block">add</span><span class="token plain" style="display:inline-block"> typescript ts-node @types/node nodemon -D</span></div></div></pre></div><ul class="List_Ul__3CIZX ul-tag"><li class="li-tag">scripts</li></ul><p class="P_P__B5cWA p-tag">在<code>koa-service-app</code>目录下<code>package.json</code>中<code>scripts</code>添加下面脚本</p><div class="Pre_Pre__qlOYF pre-tag"><pre class="Code_pre__YasK9 pre-tag prism-code language-json " style="background-color:#2a2734;color:#9a86fd;overflow:scroll;margin-top:20px;margin-bottom:20px;padding:16px"><span class="Code_language__rKJ5i">json</span><span class="Code_languageCopy__HEVTF"><svg viewBox="0 0 1024 1024" version="1.1" width="1em" height="1em" fill="currentColor"><path d="M768 682.666667V170.666667a85.333333 85.333333 0 0 0-85.333333-85.333334H170.666667a85.333333 85.333333 0 0 0-85.333334 85.333334v512a85.333333 85.333333 0 0 0 85.333334 85.333333h512a85.333333 85.333333 0 0 0 85.333333-85.333333zM170.666667 170.666667h512v512H170.666667z m682.666666 85.333333v512a85.333333 85.333333 0 0 1-85.333333 85.333333H256a85.333333 85.333333 0 0 0 85.333333 85.333334h426.666667a170.666667 170.666667 0 0 0 170.666667-170.666667V341.333333a85.333333 85.333333 0 0 0-85.333334-85.333333z"></path></svg></span><div><div class="token-line"><span class="token punctuation" style="display:inline-block">{</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">  </span><span class="token property" style="display:inline-block">&quot;dev&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;nodemon --watch &#x27;./**/*.ts&#x27; --watch &#x27;../common/**/*.ts&#x27; --exec &#x27;ts-node&#x27; server.ts&quot;</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token punctuation" style="display:inline-block">}</span></div></div></pre></div><p class="P_P__B5cWA p-tag">在项目根目录下<code>package.json</code>中<code>scripts</code>添加下面脚本</p><div class="Pre_Pre__qlOYF pre-tag"><pre class="Code_pre__YasK9 pre-tag prism-code language-json " style="background-color:#2a2734;color:#9a86fd;overflow:scroll;margin-top:20px;margin-bottom:20px;padding:16px"><span class="Code_language__rKJ5i">json</span><span class="Code_languageCopy__HEVTF"><svg viewBox="0 0 1024 1024" version="1.1" width="1em" height="1em" fill="currentColor"><path d="M768 682.666667V170.666667a85.333333 85.333333 0 0 0-85.333333-85.333334H170.666667a85.333333 85.333333 0 0 0-85.333334 85.333334v512a85.333333 85.333333 0 0 0 85.333334 85.333333h512a85.333333 85.333333 0 0 0 85.333333-85.333333zM170.666667 170.666667h512v512H170.666667z m682.666666 85.333333v512a85.333333 85.333333 0 0 1-85.333333 85.333333H256a85.333333 85.333333 0 0 0 85.333333 85.333334h426.666667a170.666667 170.666667 0 0 0 170.666667-170.666667V341.333333a85.333333 85.333333 0 0 0-85.333334-85.333333z"></path></svg></span><div><div class="token-line"><span class="token punctuation" style="display:inline-block">{</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">  </span><span class="token property" style="display:inline-block">&quot;koa-service-app&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;yarn workspace koa-service-app dev&quot;</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token punctuation" style="display:inline-block">}</span></div></div></pre></div></li></ul><h2 id="scripts-说明" class="Heading_H2__kexLO h2-tag"><a href="/blog/yarn/worksapces#scripts-%E8%AF%B4%E6%98%8E"><svg class="icon" height="1em" width="1em" viewBox="0 0 16 16" aria-hidden="true" fill="currentcolor"><path d="M7.775 3.275C7.64252 3.41717 7.57039 3.60522 7.57382 3.79952C7.57725 3.99382 7.65596 4.1792 7.79337 4.31662C7.93079 4.45403 8.11617 4.53274 8.31047 4.53617C8.50477 4.5396 8.69282 4.46748 8.835 4.335L10.085 3.085C10.2708 2.89918 10.4914 2.75177 10.7342 2.65121C10.977 2.55064 11.2372 2.49888 11.5 2.49888C11.7628 2.49888 12.023 2.55064 12.2658 2.65121C12.5086 2.75177 12.7292 2.89918 12.915 3.085C13.1008 3.27082 13.2482 3.49142 13.3488 3.7342C13.4493 3.97699 13.5011 4.23721 13.5011 4.5C13.5011 4.76279 13.4493 5.023 13.3488 5.26579C13.2482 5.50857 13.1008 5.72917 12.915 5.915L10.415 8.415C10.2292 8.60095 10.0087 8.74847 9.76588 8.84911C9.52308 8.94976 9.26283 9.00157 9 9.00157C8.73716 9.00157 8.47691 8.94976 8.23411 8.84911C7.99132 8.74847 7.77074 8.60095 7.585 8.415C7.44282 8.28252 7.25477 8.21039 7.06047 8.21382C6.86617 8.21725 6.68079 8.29596 6.54337 8.43337C6.40596 8.57079 6.32725 8.75617 6.32382 8.95047C6.32039 9.14477 6.39252 9.33282 6.525 9.475C6.85001 9.80004 7.23586 10.0579 7.66052 10.2338C8.08518 10.4097 8.54034 10.5002 9 10.5002C9.45965 10.5002 9.91481 10.4097 10.3395 10.2338C10.7641 10.0579 11.15 9.80004 11.475 9.475L13.975 6.975C14.6314 6.31858 15.0002 5.4283 15.0002 4.5C15.0002 3.57169 14.6314 2.68141 13.975 2.025C13.3186 1.36858 12.4283 0.999817 11.5 0.999817C10.5717 0.999817 9.68141 1.36858 9.02499 2.025L7.775 3.275ZM3.085 12.915C2.89904 12.7292 2.75152 12.5087 2.65088 12.2659C2.55023 12.0231 2.49842 11.7628 2.49842 11.5C2.49842 11.2372 2.55023 10.9769 2.65088 10.7341C2.75152 10.4913 2.89904 10.2707 3.085 10.085L5.585 7.585C5.77074 7.39904 5.99132 7.25152 6.23411 7.15088C6.47691 7.05023 6.73716 6.99842 7 6.99842C7.26283 6.99842 7.52308 7.05023 7.76588 7.15088C8.00867 7.25152 8.22925 7.39904 8.415 7.585C8.55717 7.71748 8.74522 7.7896 8.93952 7.78617C9.13382 7.78274 9.3192 7.70403 9.45662 7.56662C9.59403 7.4292 9.67274 7.24382 9.67617 7.04952C9.6796 6.85522 9.60748 6.66717 9.475 6.525C9.14999 6.19995 8.76413 5.94211 8.33947 5.7662C7.91481 5.59029 7.45965 5.49974 7 5.49974C6.54034 5.49974 6.08518 5.59029 5.66052 5.7662C5.23586 5.94211 4.85001 6.19995 4.525 6.525L2.025 9.02499C1.36858 9.68141 0.999817 10.5717 0.999817 11.5C0.999817 12.4283 1.36858 13.3186 2.025 13.975C2.68141 14.6314 3.57169 15.0002 4.5 15.0002C5.4283 15.0002 6.31858 14.6314 6.975 13.975L8.225 12.725C8.35748 12.5828 8.4296 12.3948 8.42617 12.2005C8.42274 12.0062 8.34403 11.8208 8.20662 11.6834C8.0692 11.546 7.88382 11.4672 7.68952 11.4638C7.49522 11.4604 7.30717 11.5325 7.165 11.665L5.915 12.915C5.72925 13.1009 5.50867 13.2485 5.26588 13.3491C5.02308 13.4498 4.76283 13.5016 4.5 13.5016C4.23716 13.5016 3.97691 13.4498 3.73411 13.3491C3.49132 13.2485 3.27074 13.1009 3.085 12.915Z"></path></svg></a>scripts 说明</h2><div class="Pre_Pre__qlOYF pre-tag"><pre class="Code_pre__YasK9 pre-tag prism-code language-bash " style="background-color:#2a2734;color:#9a86fd;overflow:scroll;margin-top:20px;margin-bottom:20px;padding:16px"><span class="Code_language__rKJ5i">bash</span><span class="Code_languageCopy__HEVTF"><svg viewBox="0 0 1024 1024" version="1.1" width="1em" height="1em" fill="currentColor"><path d="M768 682.666667V170.666667a85.333333 85.333333 0 0 0-85.333333-85.333334H170.666667a85.333333 85.333333 0 0 0-85.333334 85.333334v512a85.333333 85.333333 0 0 0 85.333334 85.333333h512a85.333333 85.333333 0 0 0 85.333333-85.333333zM170.666667 170.666667h512v512H170.666667z m682.666666 85.333333v512a85.333333 85.333333 0 0 1-85.333333 85.333333H256a85.333333 85.333333 0 0 0 85.333333 85.333334h426.666667a170.666667 170.666667 0 0 0 170.666667-170.666667V341.333333a85.333333 85.333333 0 0 0-85.333334-85.333333z"></path></svg></span><div><div class="token-line"><span class="token comment" style="display:inline-block"># 启动 mobile app</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block"># 首先已经安装 http-server</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">http-server -p ./package/mobile</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block"># 启动 react spa app</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token function" style="display:inline-block">yarn</span><span class="token plain" style="display:inline-block"> workspace react-spa-app start</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block"># 启动 next.js ssr app</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token function" style="display:inline-block">yarn</span><span class="token plain" style="display:inline-block"> workspace nextjs-app dev</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block"># 启动 koa node server</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token function" style="display:inline-block">yarn</span><span class="token plain" style="display:inline-block"> workspace koa-service-app start</span></div></div></pre></div><h2 id="yarn-workspace-cli" class="Heading_H2__kexLO h2-tag"><a href="/blog/yarn/worksapces#yarn-workspace-cli"><svg class="icon" height="1em" width="1em" viewBox="0 0 16 16" aria-hidden="true" fill="currentcolor"><path d="M7.775 3.275C7.64252 3.41717 7.57039 3.60522 7.57382 3.79952C7.57725 3.99382 7.65596 4.1792 7.79337 4.31662C7.93079 4.45403 8.11617 4.53274 8.31047 4.53617C8.50477 4.5396 8.69282 4.46748 8.835 4.335L10.085 3.085C10.2708 2.89918 10.4914 2.75177 10.7342 2.65121C10.977 2.55064 11.2372 2.49888 11.5 2.49888C11.7628 2.49888 12.023 2.55064 12.2658 2.65121C12.5086 2.75177 12.7292 2.89918 12.915 3.085C13.1008 3.27082 13.2482 3.49142 13.3488 3.7342C13.4493 3.97699 13.5011 4.23721 13.5011 4.5C13.5011 4.76279 13.4493 5.023 13.3488 5.26579C13.2482 5.50857 13.1008 5.72917 12.915 5.915L10.415 8.415C10.2292 8.60095 10.0087 8.74847 9.76588 8.84911C9.52308 8.94976 9.26283 9.00157 9 9.00157C8.73716 9.00157 8.47691 8.94976 8.23411 8.84911C7.99132 8.74847 7.77074 8.60095 7.585 8.415C7.44282 8.28252 7.25477 8.21039 7.06047 8.21382C6.86617 8.21725 6.68079 8.29596 6.54337 8.43337C6.40596 8.57079 6.32725 8.75617 6.32382 8.95047C6.32039 9.14477 6.39252 9.33282 6.525 9.475C6.85001 9.80004 7.23586 10.0579 7.66052 10.2338C8.08518 10.4097 8.54034 10.5002 9 10.5002C9.45965 10.5002 9.91481 10.4097 10.3395 10.2338C10.7641 10.0579 11.15 9.80004 11.475 9.475L13.975 6.975C14.6314 6.31858 15.0002 5.4283 15.0002 4.5C15.0002 3.57169 14.6314 2.68141 13.975 2.025C13.3186 1.36858 12.4283 0.999817 11.5 0.999817C10.5717 0.999817 9.68141 1.36858 9.02499 2.025L7.775 3.275ZM3.085 12.915C2.89904 12.7292 2.75152 12.5087 2.65088 12.2659C2.55023 12.0231 2.49842 11.7628 2.49842 11.5C2.49842 11.2372 2.55023 10.9769 2.65088 10.7341C2.75152 10.4913 2.89904 10.2707 3.085 10.085L5.585 7.585C5.77074 7.39904 5.99132 7.25152 6.23411 7.15088C6.47691 7.05023 6.73716 6.99842 7 6.99842C7.26283 6.99842 7.52308 7.05023 7.76588 7.15088C8.00867 7.25152 8.22925 7.39904 8.415 7.585C8.55717 7.71748 8.74522 7.7896 8.93952 7.78617C9.13382 7.78274 9.3192 7.70403 9.45662 7.56662C9.59403 7.4292 9.67274 7.24382 9.67617 7.04952C9.6796 6.85522 9.60748 6.66717 9.475 6.525C9.14999 6.19995 8.76413 5.94211 8.33947 5.7662C7.91481 5.59029 7.45965 5.49974 7 5.49974C6.54034 5.49974 6.08518 5.59029 5.66052 5.7662C5.23586 5.94211 4.85001 6.19995 4.525 6.525L2.025 9.02499C1.36858 9.68141 0.999817 10.5717 0.999817 11.5C0.999817 12.4283 1.36858 13.3186 2.025 13.975C2.68141 14.6314 3.57169 15.0002 4.5 15.0002C5.4283 15.0002 6.31858 14.6314 6.975 13.975L8.225 12.725C8.35748 12.5828 8.4296 12.3948 8.42617 12.2005C8.42274 12.0062 8.34403 11.8208 8.20662 11.6834C8.0692 11.546 7.88382 11.4672 7.68952 11.4638C7.49522 11.4604 7.30717 11.5325 7.165 11.665L5.915 12.915C5.72925 13.1009 5.50867 13.2485 5.26588 13.3491C5.02308 13.4498 4.76283 13.5016 4.5 13.5016C4.23716 13.5016 3.97691 13.4498 3.73411 13.3491C3.49132 13.2485 3.27074 13.1009 3.085 12.915Z"></path></svg></a>yarn workspace cli</h2><div class="Pre_Pre__qlOYF pre-tag"><pre class="Code_pre__YasK9 pre-tag prism-code language-bash " style="background-color:#2a2734;color:#9a86fd;overflow:scroll;margin-top:20px;margin-bottom:20px;padding:16px"><span class="Code_language__rKJ5i">bash</span><span class="Code_languageCopy__HEVTF"><svg viewBox="0 0 1024 1024" version="1.1" width="1em" height="1em" fill="currentColor"><path d="M768 682.666667V170.666667a85.333333 85.333333 0 0 0-85.333333-85.333334H170.666667a85.333333 85.333333 0 0 0-85.333334 85.333334v512a85.333333 85.333333 0 0 0 85.333334 85.333333h512a85.333333 85.333333 0 0 0 85.333333-85.333333zM170.666667 170.666667h512v512H170.666667z m682.666666 85.333333v512a85.333333 85.333333 0 0 1-85.333333 85.333333H256a85.333333 85.333333 0 0 0 85.333333 85.333334h426.666667a170.666667 170.666667 0 0 0 170.666667-170.666667V341.333333a85.333333 85.333333 0 0 0-85.333334-85.333333z"></path></svg></span><div><div class="token-line"><span class="token comment" style="display:inline-block"># root install dependency xxxxx</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token function" style="display:inline-block">yarn</span><span class="token plain" style="display:inline-block"> </span><span class="token function" style="display:inline-block">add</span><span class="token plain" style="display:inline-block"> -W -D xxxxx</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block"># root remove dependency xxxxx</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token function" style="display:inline-block">yarn</span><span class="token plain" style="display:inline-block"> remove -W xxxxx</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block"># package app1 install dependency xxxx</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token function" style="display:inline-block">yarn</span><span class="token plain" style="display:inline-block"> workspace app1 </span><span class="token function" style="display:inline-block">add</span><span class="token plain" style="display:inline-block"> xxxx</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block"># run app1 dev</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token function" style="display:inline-block">yarn</span><span class="token plain" style="display:inline-block"> workspace app1 dev</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token comment" style="display:inline-block"># build all package</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token function" style="display:inline-block">yarn</span><span class="token plain" style="display:inline-block"> workspaces run build</span></div></div></pre></div><h2 id="提取公共依赖包" class="Heading_H2__kexLO h2-tag"><a href="/blog/yarn/worksapces#%E6%8F%90%E5%8F%96%E5%85%AC%E5%85%B1%E4%BE%9D%E8%B5%96%E5%8C%85"><svg class="icon" height="1em" width="1em" viewBox="0 0 16 16" aria-hidden="true" fill="currentcolor"><path d="M7.775 3.275C7.64252 3.41717 7.57039 3.60522 7.57382 3.79952C7.57725 3.99382 7.65596 4.1792 7.79337 4.31662C7.93079 4.45403 8.11617 4.53274 8.31047 4.53617C8.50477 4.5396 8.69282 4.46748 8.835 4.335L10.085 3.085C10.2708 2.89918 10.4914 2.75177 10.7342 2.65121C10.977 2.55064 11.2372 2.49888 11.5 2.49888C11.7628 2.49888 12.023 2.55064 12.2658 2.65121C12.5086 2.75177 12.7292 2.89918 12.915 3.085C13.1008 3.27082 13.2482 3.49142 13.3488 3.7342C13.4493 3.97699 13.5011 4.23721 13.5011 4.5C13.5011 4.76279 13.4493 5.023 13.3488 5.26579C13.2482 5.50857 13.1008 5.72917 12.915 5.915L10.415 8.415C10.2292 8.60095 10.0087 8.74847 9.76588 8.84911C9.52308 8.94976 9.26283 9.00157 9 9.00157C8.73716 9.00157 8.47691 8.94976 8.23411 8.84911C7.99132 8.74847 7.77074 8.60095 7.585 8.415C7.44282 8.28252 7.25477 8.21039 7.06047 8.21382C6.86617 8.21725 6.68079 8.29596 6.54337 8.43337C6.40596 8.57079 6.32725 8.75617 6.32382 8.95047C6.32039 9.14477 6.39252 9.33282 6.525 9.475C6.85001 9.80004 7.23586 10.0579 7.66052 10.2338C8.08518 10.4097 8.54034 10.5002 9 10.5002C9.45965 10.5002 9.91481 10.4097 10.3395 10.2338C10.7641 10.0579 11.15 9.80004 11.475 9.475L13.975 6.975C14.6314 6.31858 15.0002 5.4283 15.0002 4.5C15.0002 3.57169 14.6314 2.68141 13.975 2.025C13.3186 1.36858 12.4283 0.999817 11.5 0.999817C10.5717 0.999817 9.68141 1.36858 9.02499 2.025L7.775 3.275ZM3.085 12.915C2.89904 12.7292 2.75152 12.5087 2.65088 12.2659C2.55023 12.0231 2.49842 11.7628 2.49842 11.5C2.49842 11.2372 2.55023 10.9769 2.65088 10.7341C2.75152 10.4913 2.89904 10.2707 3.085 10.085L5.585 7.585C5.77074 7.39904 5.99132 7.25152 6.23411 7.15088C6.47691 7.05023 6.73716 6.99842 7 6.99842C7.26283 6.99842 7.52308 7.05023 7.76588 7.15088C8.00867 7.25152 8.22925 7.39904 8.415 7.585C8.55717 7.71748 8.74522 7.7896 8.93952 7.78617C9.13382 7.78274 9.3192 7.70403 9.45662 7.56662C9.59403 7.4292 9.67274 7.24382 9.67617 7.04952C9.6796 6.85522 9.60748 6.66717 9.475 6.525C9.14999 6.19995 8.76413 5.94211 8.33947 5.7662C7.91481 5.59029 7.45965 5.49974 7 5.49974C6.54034 5.49974 6.08518 5.59029 5.66052 5.7662C5.23586 5.94211 4.85001 6.19995 4.525 6.525L2.025 9.02499C1.36858 9.68141 0.999817 10.5717 0.999817 11.5C0.999817 12.4283 1.36858 13.3186 2.025 13.975C2.68141 14.6314 3.57169 15.0002 4.5 15.0002C5.4283 15.0002 6.31858 14.6314 6.975 13.975L8.225 12.725C8.35748 12.5828 8.4296 12.3948 8.42617 12.2005C8.42274 12.0062 8.34403 11.8208 8.20662 11.6834C8.0692 11.546 7.88382 11.4672 7.68952 11.4638C7.49522 11.4604 7.30717 11.5325 7.165 11.665L5.915 12.915C5.72925 13.1009 5.50867 13.2485 5.26588 13.3491C5.02308 13.4498 4.76283 13.5016 4.5 13.5016C4.23716 13.5016 3.97691 13.4498 3.73411 13.3491C3.49132 13.2485 3.27074 13.1009 3.085 12.915Z"></path></svg></a>提取公共依赖包</h2><p class="P_P__B5cWA p-tag">把各个项目中公共依赖提取到根目录<code>package.json</code>中方便统一管理</p><div class="Pre_Pre__qlOYF pre-tag"><pre class="Code_pre__YasK9 pre-tag prism-code language-json " style="background-color:#2a2734;color:#9a86fd;overflow:scroll;margin-top:20px;margin-bottom:20px;padding:16px"><span class="Code_language__rKJ5i">json</span><span class="Code_languageCopy__HEVTF"><svg viewBox="0 0 1024 1024" version="1.1" width="1em" height="1em" fill="currentColor"><path d="M768 682.666667V170.666667a85.333333 85.333333 0 0 0-85.333333-85.333334H170.666667a85.333333 85.333333 0 0 0-85.333334 85.333334v512a85.333333 85.333333 0 0 0 85.333334 85.333333h512a85.333333 85.333333 0 0 0 85.333333-85.333333zM170.666667 170.666667h512v512H170.666667z m682.666666 85.333333v512a85.333333 85.333333 0 0 1-85.333333 85.333333H256a85.333333 85.333333 0 0 0 85.333333 85.333334h426.666667a170.666667 170.666667 0 0 0 170.666667-170.666667V341.333333a85.333333 85.333333 0 0 0-85.333334-85.333333z"></path></svg></span><div><div class="token-line"><span class="token punctuation" style="display:inline-block">{</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">  </span><span class="token property" style="display:inline-block">&quot;dependencies&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token punctuation" style="display:inline-block">{</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    </span><span class="token property" style="display:inline-block">&quot;react&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;^17.0.2&quot;</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    </span><span class="token property" style="display:inline-block">&quot;react-dom&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;^17.0.2&quot;</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">  </span><span class="token punctuation" style="display:inline-block">}</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">  </span><span class="token property" style="display:inline-block">&quot;devDependencies&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token punctuation" style="display:inline-block">{</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    </span><span class="token property" style="display:inline-block">&quot;@craco/craco&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;^6.1.2&quot;</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    </span><span class="token property" style="display:inline-block">&quot;@types/koa&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;^2.13.3&quot;</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    </span><span class="token property" style="display:inline-block">&quot;@types/node&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;^15.12.4&quot;</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    </span><span class="token property" style="display:inline-block">&quot;@types/react&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;^17.0.11&quot;</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    </span><span class="token property" style="display:inline-block">&quot;@types/react-dom&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;^17.0.8&quot;</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    </span><span class="token property" style="display:inline-block">&quot;koa&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;^2.13.1&quot;</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    </span><span class="token property" style="display:inline-block">&quot;next&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;^11.0.1&quot;</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    </span><span class="token property" style="display:inline-block">&quot;next-transpile-modules&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;^8.0.0&quot;</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    </span><span class="token property" style="display:inline-block">&quot;ts-node&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;^10.0.0&quot;</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    </span><span class="token property" style="display:inline-block">&quot;typescript&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;^4.3.4&quot;</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    </span><span class="token property" style="display:inline-block">&quot;@testing-library/jest-dom&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;^5.11.4&quot;</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    </span><span class="token property" style="display:inline-block">&quot;@testing-library/react&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;^11.1.0&quot;</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    </span><span class="token property" style="display:inline-block">&quot;@testing-library/user-event&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;^12.1.10&quot;</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    </span><span class="token property" style="display:inline-block">&quot;@types/jest&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;^26.0.15&quot;</span><span class="token punctuation" style="display:inline-block">,</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">    </span><span class="token property" style="display:inline-block">&quot;react-scripts&quot;</span><span class="token operator" style="display:inline-block">:</span><span class="token plain" style="display:inline-block"> </span><span class="token string" style="display:inline-block">&quot;4.0.3&quot;</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">  </span><span class="token punctuation" style="display:inline-block">}</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span><span class="token punctuation" style="display:inline-block">}</span></div></div></pre></div><h2 id="docker" class="Heading_H2__kexLO h2-tag"><a href="/blog/yarn/worksapces#docker"><svg class="icon" height="1em" width="1em" viewBox="0 0 16 16" aria-hidden="true" fill="currentcolor"><path d="M7.775 3.275C7.64252 3.41717 7.57039 3.60522 7.57382 3.79952C7.57725 3.99382 7.65596 4.1792 7.79337 4.31662C7.93079 4.45403 8.11617 4.53274 8.31047 4.53617C8.50477 4.5396 8.69282 4.46748 8.835 4.335L10.085 3.085C10.2708 2.89918 10.4914 2.75177 10.7342 2.65121C10.977 2.55064 11.2372 2.49888 11.5 2.49888C11.7628 2.49888 12.023 2.55064 12.2658 2.65121C12.5086 2.75177 12.7292 2.89918 12.915 3.085C13.1008 3.27082 13.2482 3.49142 13.3488 3.7342C13.4493 3.97699 13.5011 4.23721 13.5011 4.5C13.5011 4.76279 13.4493 5.023 13.3488 5.26579C13.2482 5.50857 13.1008 5.72917 12.915 5.915L10.415 8.415C10.2292 8.60095 10.0087 8.74847 9.76588 8.84911C9.52308 8.94976 9.26283 9.00157 9 9.00157C8.73716 9.00157 8.47691 8.94976 8.23411 8.84911C7.99132 8.74847 7.77074 8.60095 7.585 8.415C7.44282 8.28252 7.25477 8.21039 7.06047 8.21382C6.86617 8.21725 6.68079 8.29596 6.54337 8.43337C6.40596 8.57079 6.32725 8.75617 6.32382 8.95047C6.32039 9.14477 6.39252 9.33282 6.525 9.475C6.85001 9.80004 7.23586 10.0579 7.66052 10.2338C8.08518 10.4097 8.54034 10.5002 9 10.5002C9.45965 10.5002 9.91481 10.4097 10.3395 10.2338C10.7641 10.0579 11.15 9.80004 11.475 9.475L13.975 6.975C14.6314 6.31858 15.0002 5.4283 15.0002 4.5C15.0002 3.57169 14.6314 2.68141 13.975 2.025C13.3186 1.36858 12.4283 0.999817 11.5 0.999817C10.5717 0.999817 9.68141 1.36858 9.02499 2.025L7.775 3.275ZM3.085 12.915C2.89904 12.7292 2.75152 12.5087 2.65088 12.2659C2.55023 12.0231 2.49842 11.7628 2.49842 11.5C2.49842 11.2372 2.55023 10.9769 2.65088 10.7341C2.75152 10.4913 2.89904 10.2707 3.085 10.085L5.585 7.585C5.77074 7.39904 5.99132 7.25152 6.23411 7.15088C6.47691 7.05023 6.73716 6.99842 7 6.99842C7.26283 6.99842 7.52308 7.05023 7.76588 7.15088C8.00867 7.25152 8.22925 7.39904 8.415 7.585C8.55717 7.71748 8.74522 7.7896 8.93952 7.78617C9.13382 7.78274 9.3192 7.70403 9.45662 7.56662C9.59403 7.4292 9.67274 7.24382 9.67617 7.04952C9.6796 6.85522 9.60748 6.66717 9.475 6.525C9.14999 6.19995 8.76413 5.94211 8.33947 5.7662C7.91481 5.59029 7.45965 5.49974 7 5.49974C6.54034 5.49974 6.08518 5.59029 5.66052 5.7662C5.23586 5.94211 4.85001 6.19995 4.525 6.525L2.025 9.02499C1.36858 9.68141 0.999817 10.5717 0.999817 11.5C0.999817 12.4283 1.36858 13.3186 2.025 13.975C2.68141 14.6314 3.57169 15.0002 4.5 15.0002C5.4283 15.0002 6.31858 14.6314 6.975 13.975L8.225 12.725C8.35748 12.5828 8.4296 12.3948 8.42617 12.2005C8.42274 12.0062 8.34403 11.8208 8.20662 11.6834C8.0692 11.546 7.88382 11.4672 7.68952 11.4638C7.49522 11.4604 7.30717 11.5325 7.165 11.665L5.915 12.915C5.72925 13.1009 5.50867 13.2485 5.26588 13.3491C5.02308 13.4498 4.76283 13.5016 4.5 13.5016C4.23716 13.5016 3.97691 13.4498 3.73411 13.3491C3.49132 13.2485 3.27074 13.1009 3.085 12.915Z"></path></svg></a>docker</h2><h2 id="注意事项" class="Heading_H2__kexLO h2-tag"><a href="/blog/yarn/worksapces#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><svg class="icon" height="1em" width="1em" viewBox="0 0 16 16" aria-hidden="true" fill="currentcolor"><path d="M7.775 3.275C7.64252 3.41717 7.57039 3.60522 7.57382 3.79952C7.57725 3.99382 7.65596 4.1792 7.79337 4.31662C7.93079 4.45403 8.11617 4.53274 8.31047 4.53617C8.50477 4.5396 8.69282 4.46748 8.835 4.335L10.085 3.085C10.2708 2.89918 10.4914 2.75177 10.7342 2.65121C10.977 2.55064 11.2372 2.49888 11.5 2.49888C11.7628 2.49888 12.023 2.55064 12.2658 2.65121C12.5086 2.75177 12.7292 2.89918 12.915 3.085C13.1008 3.27082 13.2482 3.49142 13.3488 3.7342C13.4493 3.97699 13.5011 4.23721 13.5011 4.5C13.5011 4.76279 13.4493 5.023 13.3488 5.26579C13.2482 5.50857 13.1008 5.72917 12.915 5.915L10.415 8.415C10.2292 8.60095 10.0087 8.74847 9.76588 8.84911C9.52308 8.94976 9.26283 9.00157 9 9.00157C8.73716 9.00157 8.47691 8.94976 8.23411 8.84911C7.99132 8.74847 7.77074 8.60095 7.585 8.415C7.44282 8.28252 7.25477 8.21039 7.06047 8.21382C6.86617 8.21725 6.68079 8.29596 6.54337 8.43337C6.40596 8.57079 6.32725 8.75617 6.32382 8.95047C6.32039 9.14477 6.39252 9.33282 6.525 9.475C6.85001 9.80004 7.23586 10.0579 7.66052 10.2338C8.08518 10.4097 8.54034 10.5002 9 10.5002C9.45965 10.5002 9.91481 10.4097 10.3395 10.2338C10.7641 10.0579 11.15 9.80004 11.475 9.475L13.975 6.975C14.6314 6.31858 15.0002 5.4283 15.0002 4.5C15.0002 3.57169 14.6314 2.68141 13.975 2.025C13.3186 1.36858 12.4283 0.999817 11.5 0.999817C10.5717 0.999817 9.68141 1.36858 9.02499 2.025L7.775 3.275ZM3.085 12.915C2.89904 12.7292 2.75152 12.5087 2.65088 12.2659C2.55023 12.0231 2.49842 11.7628 2.49842 11.5C2.49842 11.2372 2.55023 10.9769 2.65088 10.7341C2.75152 10.4913 2.89904 10.2707 3.085 10.085L5.585 7.585C5.77074 7.39904 5.99132 7.25152 6.23411 7.15088C6.47691 7.05023 6.73716 6.99842 7 6.99842C7.26283 6.99842 7.52308 7.05023 7.76588 7.15088C8.00867 7.25152 8.22925 7.39904 8.415 7.585C8.55717 7.71748 8.74522 7.7896 8.93952 7.78617C9.13382 7.78274 9.3192 7.70403 9.45662 7.56662C9.59403 7.4292 9.67274 7.24382 9.67617 7.04952C9.6796 6.85522 9.60748 6.66717 9.475 6.525C9.14999 6.19995 8.76413 5.94211 8.33947 5.7662C7.91481 5.59029 7.45965 5.49974 7 5.49974C6.54034 5.49974 6.08518 5.59029 5.66052 5.7662C5.23586 5.94211 4.85001 6.19995 4.525 6.525L2.025 9.02499C1.36858 9.68141 0.999817 10.5717 0.999817 11.5C0.999817 12.4283 1.36858 13.3186 2.025 13.975C2.68141 14.6314 3.57169 15.0002 4.5 15.0002C5.4283 15.0002 6.31858 14.6314 6.975 13.975L8.225 12.725C8.35748 12.5828 8.4296 12.3948 8.42617 12.2005C8.42274 12.0062 8.34403 11.8208 8.20662 11.6834C8.0692 11.546 7.88382 11.4672 7.68952 11.4638C7.49522 11.4604 7.30717 11.5325 7.165 11.665L5.915 12.915C5.72925 13.1009 5.50867 13.2485 5.26588 13.3491C5.02308 13.4498 4.76283 13.5016 4.5 13.5016C4.23716 13.5016 3.97691 13.4498 3.73411 13.3491C3.49132 13.2485 3.27074 13.1009 3.085 12.915Z"></path></svg></a>注意事项</h2><ul class="List_Ul__3CIZX ul-tag"><li class="li-tag">如果本地新增 package 记得执行 <code>yarn install</code></li></ul><h2 id="版本管理" class="Heading_H2__kexLO h2-tag"><a href="/blog/yarn/worksapces#%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86"><svg class="icon" height="1em" width="1em" viewBox="0 0 16 16" aria-hidden="true" fill="currentcolor"><path d="M7.775 3.275C7.64252 3.41717 7.57039 3.60522 7.57382 3.79952C7.57725 3.99382 7.65596 4.1792 7.79337 4.31662C7.93079 4.45403 8.11617 4.53274 8.31047 4.53617C8.50477 4.5396 8.69282 4.46748 8.835 4.335L10.085 3.085C10.2708 2.89918 10.4914 2.75177 10.7342 2.65121C10.977 2.55064 11.2372 2.49888 11.5 2.49888C11.7628 2.49888 12.023 2.55064 12.2658 2.65121C12.5086 2.75177 12.7292 2.89918 12.915 3.085C13.1008 3.27082 13.2482 3.49142 13.3488 3.7342C13.4493 3.97699 13.5011 4.23721 13.5011 4.5C13.5011 4.76279 13.4493 5.023 13.3488 5.26579C13.2482 5.50857 13.1008 5.72917 12.915 5.915L10.415 8.415C10.2292 8.60095 10.0087 8.74847 9.76588 8.84911C9.52308 8.94976 9.26283 9.00157 9 9.00157C8.73716 9.00157 8.47691 8.94976 8.23411 8.84911C7.99132 8.74847 7.77074 8.60095 7.585 8.415C7.44282 8.28252 7.25477 8.21039 7.06047 8.21382C6.86617 8.21725 6.68079 8.29596 6.54337 8.43337C6.40596 8.57079 6.32725 8.75617 6.32382 8.95047C6.32039 9.14477 6.39252 9.33282 6.525 9.475C6.85001 9.80004 7.23586 10.0579 7.66052 10.2338C8.08518 10.4097 8.54034 10.5002 9 10.5002C9.45965 10.5002 9.91481 10.4097 10.3395 10.2338C10.7641 10.0579 11.15 9.80004 11.475 9.475L13.975 6.975C14.6314 6.31858 15.0002 5.4283 15.0002 4.5C15.0002 3.57169 14.6314 2.68141 13.975 2.025C13.3186 1.36858 12.4283 0.999817 11.5 0.999817C10.5717 0.999817 9.68141 1.36858 9.02499 2.025L7.775 3.275ZM3.085 12.915C2.89904 12.7292 2.75152 12.5087 2.65088 12.2659C2.55023 12.0231 2.49842 11.7628 2.49842 11.5C2.49842 11.2372 2.55023 10.9769 2.65088 10.7341C2.75152 10.4913 2.89904 10.2707 3.085 10.085L5.585 7.585C5.77074 7.39904 5.99132 7.25152 6.23411 7.15088C6.47691 7.05023 6.73716 6.99842 7 6.99842C7.26283 6.99842 7.52308 7.05023 7.76588 7.15088C8.00867 7.25152 8.22925 7.39904 8.415 7.585C8.55717 7.71748 8.74522 7.7896 8.93952 7.78617C9.13382 7.78274 9.3192 7.70403 9.45662 7.56662C9.59403 7.4292 9.67274 7.24382 9.67617 7.04952C9.6796 6.85522 9.60748 6.66717 9.475 6.525C9.14999 6.19995 8.76413 5.94211 8.33947 5.7662C7.91481 5.59029 7.45965 5.49974 7 5.49974C6.54034 5.49974 6.08518 5.59029 5.66052 5.7662C5.23586 5.94211 4.85001 6.19995 4.525 6.525L2.025 9.02499C1.36858 9.68141 0.999817 10.5717 0.999817 11.5C0.999817 12.4283 1.36858 13.3186 2.025 13.975C2.68141 14.6314 3.57169 15.0002 4.5 15.0002C5.4283 15.0002 6.31858 14.6314 6.975 13.975L8.225 12.725C8.35748 12.5828 8.4296 12.3948 8.42617 12.2005C8.42274 12.0062 8.34403 11.8208 8.20662 11.6834C8.0692 11.546 7.88382 11.4672 7.68952 11.4638C7.49522 11.4604 7.30717 11.5325 7.165 11.665L5.915 12.915C5.72925 13.1009 5.50867 13.2485 5.26588 13.3491C5.02308 13.4498 4.76283 13.5016 4.5 13.5016C4.23716 13.5016 3.97691 13.4498 3.73411 13.3491C3.49132 13.2485 3.27074 13.1009 3.085 12.915Z"></path></svg></a>版本管理</h2><p class="P_P__B5cWA p-tag">如果想对版本进行管理可以结合 <a href="https://lerna.js.org/" class="A_A__MIDyA a-tag">leran</a></p><h2 id="github-地址" class="Heading_H2__kexLO h2-tag"><a href="/blog/yarn/worksapces#github-%E5%9C%B0%E5%9D%80"><svg class="icon" height="1em" width="1em" viewBox="0 0 16 16" aria-hidden="true" fill="currentcolor"><path d="M7.775 3.275C7.64252 3.41717 7.57039 3.60522 7.57382 3.79952C7.57725 3.99382 7.65596 4.1792 7.79337 4.31662C7.93079 4.45403 8.11617 4.53274 8.31047 4.53617C8.50477 4.5396 8.69282 4.46748 8.835 4.335L10.085 3.085C10.2708 2.89918 10.4914 2.75177 10.7342 2.65121C10.977 2.55064 11.2372 2.49888 11.5 2.49888C11.7628 2.49888 12.023 2.55064 12.2658 2.65121C12.5086 2.75177 12.7292 2.89918 12.915 3.085C13.1008 3.27082 13.2482 3.49142 13.3488 3.7342C13.4493 3.97699 13.5011 4.23721 13.5011 4.5C13.5011 4.76279 13.4493 5.023 13.3488 5.26579C13.2482 5.50857 13.1008 5.72917 12.915 5.915L10.415 8.415C10.2292 8.60095 10.0087 8.74847 9.76588 8.84911C9.52308 8.94976 9.26283 9.00157 9 9.00157C8.73716 9.00157 8.47691 8.94976 8.23411 8.84911C7.99132 8.74847 7.77074 8.60095 7.585 8.415C7.44282 8.28252 7.25477 8.21039 7.06047 8.21382C6.86617 8.21725 6.68079 8.29596 6.54337 8.43337C6.40596 8.57079 6.32725 8.75617 6.32382 8.95047C6.32039 9.14477 6.39252 9.33282 6.525 9.475C6.85001 9.80004 7.23586 10.0579 7.66052 10.2338C8.08518 10.4097 8.54034 10.5002 9 10.5002C9.45965 10.5002 9.91481 10.4097 10.3395 10.2338C10.7641 10.0579 11.15 9.80004 11.475 9.475L13.975 6.975C14.6314 6.31858 15.0002 5.4283 15.0002 4.5C15.0002 3.57169 14.6314 2.68141 13.975 2.025C13.3186 1.36858 12.4283 0.999817 11.5 0.999817C10.5717 0.999817 9.68141 1.36858 9.02499 2.025L7.775 3.275ZM3.085 12.915C2.89904 12.7292 2.75152 12.5087 2.65088 12.2659C2.55023 12.0231 2.49842 11.7628 2.49842 11.5C2.49842 11.2372 2.55023 10.9769 2.65088 10.7341C2.75152 10.4913 2.89904 10.2707 3.085 10.085L5.585 7.585C5.77074 7.39904 5.99132 7.25152 6.23411 7.15088C6.47691 7.05023 6.73716 6.99842 7 6.99842C7.26283 6.99842 7.52308 7.05023 7.76588 7.15088C8.00867 7.25152 8.22925 7.39904 8.415 7.585C8.55717 7.71748 8.74522 7.7896 8.93952 7.78617C9.13382 7.78274 9.3192 7.70403 9.45662 7.56662C9.59403 7.4292 9.67274 7.24382 9.67617 7.04952C9.6796 6.85522 9.60748 6.66717 9.475 6.525C9.14999 6.19995 8.76413 5.94211 8.33947 5.7662C7.91481 5.59029 7.45965 5.49974 7 5.49974C6.54034 5.49974 6.08518 5.59029 5.66052 5.7662C5.23586 5.94211 4.85001 6.19995 4.525 6.525L2.025 9.02499C1.36858 9.68141 0.999817 10.5717 0.999817 11.5C0.999817 12.4283 1.36858 13.3186 2.025 13.975C2.68141 14.6314 3.57169 15.0002 4.5 15.0002C5.4283 15.0002 6.31858 14.6314 6.975 13.975L8.225 12.725C8.35748 12.5828 8.4296 12.3948 8.42617 12.2005C8.42274 12.0062 8.34403 11.8208 8.20662 11.6834C8.0692 11.546 7.88382 11.4672 7.68952 11.4638C7.49522 11.4604 7.30717 11.5325 7.165 11.665L5.915 12.915C5.72925 13.1009 5.50867 13.2485 5.26588 13.3491C5.02308 13.4498 4.76283 13.5016 4.5 13.5016C4.23716 13.5016 3.97691 13.4498 3.73411 13.3491C3.49132 13.2485 3.27074 13.1009 3.085 12.915Z"></path></svg></a>github 地址</h2><p class="P_P__B5cWA p-tag"><a href="https://github.com/qqxs/monorepo" class="A_A__MIDyA a-tag">yarn workspaces monorepo</a></p><h2 id="参考" class="Heading_H2__kexLO h2-tag"><a href="/blog/yarn/worksapces#%E5%8F%82%E8%80%83"><svg class="icon" height="1em" width="1em" viewBox="0 0 16 16" aria-hidden="true" fill="currentcolor"><path d="M7.775 3.275C7.64252 3.41717 7.57039 3.60522 7.57382 3.79952C7.57725 3.99382 7.65596 4.1792 7.79337 4.31662C7.93079 4.45403 8.11617 4.53274 8.31047 4.53617C8.50477 4.5396 8.69282 4.46748 8.835 4.335L10.085 3.085C10.2708 2.89918 10.4914 2.75177 10.7342 2.65121C10.977 2.55064 11.2372 2.49888 11.5 2.49888C11.7628 2.49888 12.023 2.55064 12.2658 2.65121C12.5086 2.75177 12.7292 2.89918 12.915 3.085C13.1008 3.27082 13.2482 3.49142 13.3488 3.7342C13.4493 3.97699 13.5011 4.23721 13.5011 4.5C13.5011 4.76279 13.4493 5.023 13.3488 5.26579C13.2482 5.50857 13.1008 5.72917 12.915 5.915L10.415 8.415C10.2292 8.60095 10.0087 8.74847 9.76588 8.84911C9.52308 8.94976 9.26283 9.00157 9 9.00157C8.73716 9.00157 8.47691 8.94976 8.23411 8.84911C7.99132 8.74847 7.77074 8.60095 7.585 8.415C7.44282 8.28252 7.25477 8.21039 7.06047 8.21382C6.86617 8.21725 6.68079 8.29596 6.54337 8.43337C6.40596 8.57079 6.32725 8.75617 6.32382 8.95047C6.32039 9.14477 6.39252 9.33282 6.525 9.475C6.85001 9.80004 7.23586 10.0579 7.66052 10.2338C8.08518 10.4097 8.54034 10.5002 9 10.5002C9.45965 10.5002 9.91481 10.4097 10.3395 10.2338C10.7641 10.0579 11.15 9.80004 11.475 9.475L13.975 6.975C14.6314 6.31858 15.0002 5.4283 15.0002 4.5C15.0002 3.57169 14.6314 2.68141 13.975 2.025C13.3186 1.36858 12.4283 0.999817 11.5 0.999817C10.5717 0.999817 9.68141 1.36858 9.02499 2.025L7.775 3.275ZM3.085 12.915C2.89904 12.7292 2.75152 12.5087 2.65088 12.2659C2.55023 12.0231 2.49842 11.7628 2.49842 11.5C2.49842 11.2372 2.55023 10.9769 2.65088 10.7341C2.75152 10.4913 2.89904 10.2707 3.085 10.085L5.585 7.585C5.77074 7.39904 5.99132 7.25152 6.23411 7.15088C6.47691 7.05023 6.73716 6.99842 7 6.99842C7.26283 6.99842 7.52308 7.05023 7.76588 7.15088C8.00867 7.25152 8.22925 7.39904 8.415 7.585C8.55717 7.71748 8.74522 7.7896 8.93952 7.78617C9.13382 7.78274 9.3192 7.70403 9.45662 7.56662C9.59403 7.4292 9.67274 7.24382 9.67617 7.04952C9.6796 6.85522 9.60748 6.66717 9.475 6.525C9.14999 6.19995 8.76413 5.94211 8.33947 5.7662C7.91481 5.59029 7.45965 5.49974 7 5.49974C6.54034 5.49974 6.08518 5.59029 5.66052 5.7662C5.23586 5.94211 4.85001 6.19995 4.525 6.525L2.025 9.02499C1.36858 9.68141 0.999817 10.5717 0.999817 11.5C0.999817 12.4283 1.36858 13.3186 2.025 13.975C2.68141 14.6314 3.57169 15.0002 4.5 15.0002C5.4283 15.0002 6.31858 14.6314 6.975 13.975L8.225 12.725C8.35748 12.5828 8.4296 12.3948 8.42617 12.2005C8.42274 12.0062 8.34403 11.8208 8.20662 11.6834C8.0692 11.546 7.88382 11.4672 7.68952 11.4638C7.49522 11.4604 7.30717 11.5325 7.165 11.665L5.915 12.915C5.72925 13.1009 5.50867 13.2485 5.26588 13.3491C5.02308 13.4498 4.76283 13.5016 4.5 13.5016C4.23716 13.5016 3.97691 13.4498 3.73411 13.3491C3.49132 13.2485 3.27074 13.1009 3.085 12.915Z"></path></svg></a>参考</h2><ul class="List_Ul__3CIZX ul-tag"><li class="li-tag"><a href="https://yarnpkg.com/features/workspaces" class="A_A__MIDyA a-tag">yarn workspace</a></li><li class="li-tag"><a href="https://create-react-app.dev/docs/adding-typescript" class="A_A__MIDyA a-tag">create-react-app</a></li><li class="li-tag"><a href="https://nextjs.org/" class="A_A__MIDyA a-tag">next.js</a></li><li class="li-tag"><a href="https://koajs.com/" class="A_A__MIDyA a-tag">koa2</a></li><li class="li-tag"><a href="https://nodemon.io/" class="A_A__MIDyA a-tag">nodemon</a></li></ul><p class="P_P__B5cWA p-tag"><a href="LICENSE" class="A_A__MIDyA a-tag">MIT</a> © <a href="https://wooorm.com" class="A_A__MIDyA a-tag">ShineShao</a></p></article></div></div><footer class="Layout_footer__bkcZ6"><span style="margin-right:20px">I&#x27;m here </span><a href="https://github.com/freeshineit" target="_block">ShineShao</a><a href="https://github.com/freeshineit/freeshineit.github.io/issues" target="_blank" style="margin-left:20px">issues</a></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/blog/yarn/worksapces","query":{},"buildId":"4BTZEqipsAYOUZ2YrrXLX","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script><script src="/static/js/heading.js"></script></body></html>